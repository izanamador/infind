[
    {
        "id": "7a2a228bff5f9b1b",
        "type": "tab",
        "label": "Tarea 4",
        "disabled": true,
        "info": ""
    },
    {
        "id": "28aa48179e689485",
        "type": "tab",
        "label": "Flow 3",
        "disabled": true,
        "info": ""
    },
    {
        "id": "240e9138468e39f6",
        "type": "tab",
        "label": "Tarea 2",
        "disabled": true,
        "info": ""
    },
    {
        "id": "79e1efd2b7cf0d02",
        "type": "tab",
        "label": "Tarea 1 + extra",
        "disabled": true,
        "info": ""
    },
    {
        "id": "24ab647bb9010131",
        "type": "tab",
        "label": "ui test",
        "disabled": true,
        "info": ""
    },
    {
        "id": "13df9ad25c9618e4",
        "type": "tab",
        "label": "Tarea ESP826",
        "disabled": true,
        "info": "# Tarea de grupo ESP826\n\n## Grupo 3\n- Izan Amador Bustos\n- Irene Guijarro Molina\n- Jorge Luis Benavides Macías\n- Ricardo Panero Lamothe\n\n## Descripción de la práctica\n\nHay que programar usando el IDE Arduino la placa de desarrollo ESP8266 NodeMCU Dev Kit para que realice las siguientes funciones.\n\n1. Conexión \n2. Envío periódico de datos\n3. Escritura en LED\n4. Lectura del LED\n\nHay dos opciones para usar como servidor MQTT, el de vuestra máquina virtual. Hay que usar como IP del servidor la del PC que estáis usando. También podéis usar el servidor iot.ac.uma.es usando como usuario y clave: infind / zancudo . Siempre que se use este servidor los topics tienen que empezar obligatoriamente por infind/\n\nEn los topics hay que usar el nombre del grupo, por ejemplo GRUPO5 si se trata del prototipo del grupo 5. Si dentro del mismo grupo hay varios prototipos en marcha añadir otro nivel intermedio al topic con el nombre propio del programador si se quiere evitar interferencias.\n\nImplementar flujos Node-RED para que sean funcionales con este nuevo prototipo. Se deben recibir los datos de sensores y estado para visualizarlos en el Dashboard y permitir configurar el nivel de brillo del LED.\n\nEntregar en grupo el programa Arduino y flujo NodeRED desarrollados.\nLibrerías de interés\n\nPara configurar la conexión MQTT, LWT, publicar y suscribirse a topics, ... usamos la librería PubSubClient. Consultar referencia en: https://pubsubclient.knolleary.net/ \n\nPara manejar las cadenas formateadas con JSON se recomienda utilizar la librería ArduinoJson (https://arduinojson.org/) instalable desde el gestor de librerías de la herramienta. O imprimir las cadenas con el formato adecuado usando funciones de C como sprintf().\n\n\n## 1. Conexión \n\nConectar usando el punto de acceso WiFi con SSID: infind  y password: 1518wifi si estamos en el laboratorio y vuestra WiFi si estáis en casa.\n\n\n\n## 2. Envío periódico de datos\n\nEl dispositivo debe leer un sensor de humedad y tempertaura DHT11, también la entrada analógica para controlar el nivel de la batería/alimentación (ver https://arduino-esp8266.readthedocs.io/en/latest/reference.html#analog-input) y enviar periodicamente (cada 30 segundos) los valores mediante MQTT.  \n\nEn este envío periódico se incluirá también información de la conexión WiFi (SSid), IP asignada y potencia de señal (RSSI). \n\nHabrá que realizar el conexionado del sensor DHT11 como vimos en tareas anteriores. Para la lectura del nivel de voltaje (Vcc) hay que usar las indicaciones del enlace en el párrafo anterior, la función para leer ESP.getVcc() devolverá los milivoltios observados en la entrada de alimentación (https://arduino-esp8266.readthedocs.io/en/latest/libraries.html#esp-specific-apis).\n\nPara el campo \"Uptime\", enviaremos el número de milisegundos desde que inició la placa.\n\nLa información sobre la conexión WiFi del dispositivo se podrá consultar mediante la clases disponibles en la librería WiFi (https://www.arduino.cc/en/Reference/WiFi). Algunas particularidades para ESP8266 estarán mejor descritas en la librería ESP8266WiFi (https://arduino-esp8266.readthedocs.io/en/latest/esp8266wifi/station-class.html)  y en el API de la librería  ( https://links2004.github.io/Arduino/df/d1c/class_e_s_p8266_wi_fi_scan_class.html).\n\n\n\n\n## 3. Escritura en LED\n\nTambién mediante el mismo protocolo debe recibir ordenes para actuar sobre la salida GPIO2 (conectada a un LED azul sobre la placa), informando de los cambios realizados.\n\nEl control del LED (GPIO2) esta vez lo haremos usando PWM (https://arduino-esp8266.readthedocs.io/en/latest/reference.html#analog-output) de forma que se configurará su funcionamiento con un número entero entre 0 y 100, que representará el nivel de brillo del LED en tanto por ciento. \n\nLos valores 0 y 100 deben funcionar como hasta ahora apagando y encendiendo totalmente el LED y los valores intermedios deben encenderlo con la atenuación indicada usando PWM.\n\nPosiblemente el rango de actuación de analogWrite() sea de [0-1023] o [0-255], dependerá de la versión que estemos usando del soporte para ESP8266 en Arduino.\n\n## 4. Lectura del LED\n\n\n\n## 1 Envío periódico de datos\n\nEl dispositivo debe leer un sensor de humedad y tempertaura DHT11, también la entrada analógica para controlar el nivel de la batería/alimentación ( ver https://arduino-esp8266.readthedocs.io/en/latest/reference.html#analog-input) y enviar periodicamente (cada 30 segundos) los valores mediante MQTT.  \n\nEn este envío periódico se incluirá también información de la conexión WiFi (SSid), IP asignada y potencia de señal (RSSI). También mediante el mismo protocolo debe recibir ordenes para actuar sobre la salida GPIO2 (conectada a un LED azul sobre la placa), informando de los cambios realizados."
    },
    {
        "id": "a43193f9452562d4",
        "type": "tab",
        "label": "FOTA",
        "disabled": true,
        "info": ""
    },
    {
        "id": "45a4e39f.03efac",
        "type": "tab",
        "label": "Tarea 9",
        "disabled": true,
        "info": ""
    },
    {
        "id": "ccd8ad10.a1f6a",
        "type": "tab",
        "label": "Tarea 10",
        "disabled": true,
        "info": ""
    },
    {
        "id": "122f65d809b34d8e",
        "type": "tab",
        "label": "Upload intomongo",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b056b4cf9a298e0d",
        "type": "tab",
        "label": "La caja - Game",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e124bbec17d40651",
        "type": "tab",
        "label": "Agregaciones",
        "disabled": true,
        "info": ""
    },
    {
        "id": "03c76acfc9a07adb",
        "type": "tab",
        "label": "Examen",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "1736e63b25650818",
        "type": "subflow",
        "name": "Json-Parametros",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 240,
                "y": 180,
                "wires": [
                    {
                        "id": "4e09efcff6e84b0c"
                    },
                    {
                        "id": "95164f1d4c36c5d5"
                    },
                    {
                        "id": "6c4c38ff165dbd18"
                    },
                    {
                        "id": "b03cec66fb391724"
                    },
                    {
                        "id": "b0c38e47413631d4"
                    },
                    {
                        "id": "fa36c4f9fd494fa8"
                    },
                    {
                        "id": "8579e5a838f746f2"
                    },
                    {
                        "id": "c80f38ea1c9620b4"
                    },
                    {
                        "id": "3ab993c9aaeb02a9"
                    },
                    {
                        "id": "ed54312aaa364df5"
                    },
                    {
                        "id": "cbca515058def3f9"
                    },
                    {
                        "id": "965433bea2abdd7f"
                    },
                    {
                        "id": "02ad691c4d094030"
                    },
                    {
                        "id": "37ec8e592794dd5a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 700,
                "y": 60,
                "wires": [
                    {
                        "id": "4e09efcff6e84b0c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 100,
                "wires": [
                    {
                        "id": "95164f1d4c36c5d5",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 140,
                "wires": [
                    {
                        "id": "6c4c38ff165dbd18",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 180,
                "wires": [
                    {
                        "id": "b03cec66fb391724",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 220,
                "wires": [
                    {
                        "id": "b0c38e47413631d4",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 260,
                "wires": [
                    {
                        "id": "fa36c4f9fd494fa8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 300,
                "wires": [
                    {
                        "id": "8579e5a838f746f2",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 340,
                "wires": [
                    {
                        "id": "c80f38ea1c9620b4",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 380,
                "wires": [
                    {
                        "id": "3ab993c9aaeb02a9",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 420,
                "wires": [
                    {
                        "id": "ed54312aaa364df5",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 460,
                "wires": [
                    {
                        "id": "cbca515058def3f9",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 500,
                "wires": [
                    {
                        "id": "965433bea2abdd7f",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 540,
                "wires": [
                    {
                        "id": "02ad691c4d094030",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 580,
                "wires": [
                    {
                        "id": "37ec8e592794dd5a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "entrada",
                "type": "str",
                "value": "salida"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "inputLabels": [
            "json"
        ],
        "outputLabels": [
            "SSID",
            "RSSI",
            "localIP",
            "macAddress",
            "uptime_ms",
            "interval_s",
            "ChipID",
            "Des",
            "Rojo",
            "Verde",
            "Temperatura",
            "Humedad",
            "Presion",
            "Illuminacion"
        ],
        "icon": "node-red/parser-json.svg"
    },
    {
        "id": "7cbc96056c55979a",
        "type": "subflow",
        "name": "Prueba 1",
        "info": "Este bloque funsiona asin",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "d8fc63694048f63f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1030,
                "y": 80,
                "wires": [
                    {
                        "id": "d8fc63694048f63f",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1220,
                "y": 180,
                "wires": [
                    {
                        "id": "662f7e25afd3725e",
                        "port": 0
                    }
                ]
            },
            {
                "x": 990,
                "y": 140,
                "wires": [
                    {
                        "id": "596bccbef118b85d",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1210,
                "y": 220,
                "wires": [
                    {
                        "id": "47a99b0fd9516842",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1230,
                "y": 260,
                "wires": [
                    {
                        "id": "1866be8fcdfc5ce7",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {
            "version": "0.0.1",
            "author": "Rhyloo",
            "license": "MIT"
        },
        "color": "#DDAA99",
        "outputLabels": [
            "El juego 1 ha comenzado",
            "Acertijo",
            "Instrucciones",
            "Ans",
            "Start game"
        ],
        "status": {
            "x": 540,
            "y": 420,
            "wires": [
                {
                    "id": "d8261c06169fe9f4",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "075ef7a340b6c689",
        "type": "subflow",
        "name": "Pureba 2",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "9315d4ad8bda91a4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 840,
                "y": 240,
                "wires": []
            },
            {
                "x": 215,
                "y": 30,
                "wires": []
            },
            {
                "x": 270,
                "y": 30,
                "wires": []
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "0b10c282ffcb0e7b",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "name": "Dev tools",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "90e7335f291ea8dd",
            "e6031d3ff7a2c7b4"
        ],
        "x": 948,
        "y": 353
    },
    {
        "id": "a6101559ef212be0",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "name": "UI control",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "c74e5f6560244f59",
            "e37aeb7da330393e"
        ],
        "x": 948,
        "y": 13
    },
    {
        "id": "b4fed83d261cb969",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "name": "Leds",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "a6047788ab02d9a9",
            "5b4db520284435b2",
            "3964eb999b71da93",
            "1a79e1f1d7d855e8",
            "be8c6fca32a6f82c",
            "b002d636c993db56",
            "5508fdeecdc940bb",
            "069a53d25b9aa378"
        ],
        "x": 54,
        "y": 19
    },
    {
        "id": "c988676a32d00f8b",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "name": "Humedad",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "6cd380be060dd2e6",
            "1aec4f35e986a00b",
            "e6055b97ee0fecfe"
        ],
        "x": 54,
        "y": 499
    },
    {
        "id": "d4b6d2cdca33cc65",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "name": "Presión",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "67d101b1b5a89ffb",
            "1d5b713945b2fdec",
            "5c18989c01bf38c8",
            "d6b149cd6e27b2a2"
        ],
        "x": 54,
        "y": 339
    },
    {
        "id": "352236264866bec3",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "name": "Temperatura",
        "style": {
            "fill": "#e3f3d3",
            "fill-opacity": "0.77",
            "label": true
        },
        "nodes": [
            "d32919527242649d",
            "14f6a7e0e4dc4c60",
            "d786eed394f22b5a",
            "f976c7673e81d293",
            "b6ce87f818aaecac",
            "f968752fa6c28624",
            "d89e4bd5d49896c3",
            "8fbe2a5338dc462a",
            "554ee62bb7f8dead",
            "9c366eefdfe04fbf",
            "51acf678a736f6a1",
            "56c8d43912b75a02",
            "20120fed3f616cf7",
            "94e421e9f0b7b91b",
            "503e802577b4e178",
            "ebb4b5aeaea3b4bb",
            "747f15d270d31b62",
            "b1be2beb5dab6d27",
            "9f1b88539a1d3436"
        ],
        "x": 54,
        "y": 599
    },
    {
        "id": "c6c2603753194b13",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "JSON",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "3a99781e6031d629",
            "cba4a38d7900d885",
            "99d0ec64faab4b94",
            "99fb9b16b1629eea",
            "6457892a3e672cbe",
            "910905f51ec3c273",
            "d42036ba593c80c1",
            "1c6e5895e3998ee3"
        ],
        "x": 14,
        "y": 19,
        "w": 912,
        "h": 222
    },
    {
        "id": "d67c96eb46005d02",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "UI control",
        "style": {
            "label": true,
            "fill": "#e3f3d3"
        },
        "nodes": [
            "8c42595fd702f856",
            "6793a44395d337f2"
        ],
        "x": 1908,
        "y": 13,
        "w": 314,
        "h": 314
    },
    {
        "id": "41653db2dbc8eff5",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "LEDS",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "debd5c63615fff3e",
            "bed29fa72c8f9e99",
            "1eb41ef80e3d5aa2",
            "8f17387ff474ec87",
            "c9b93ff37480c0f9",
            "18c7c585c8eb32ef",
            "a040bbf0062ac342",
            "cd061775fa6b345c",
            "8fd217ed9224341c",
            "4dbd59f9d9b762d1",
            "f144670f5c1d4397",
            "22e6850228ea80f7",
            "42cfb30568599827",
            "507ee572dc146a37"
        ],
        "x": 1094,
        "y": 19,
        "w": 792,
        "h": 302
    },
    {
        "id": "ef3d086a30a1b87a",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "Presión",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "c2b551405535b0b2",
            "5983285fa86d9906",
            "93ce455ec89f564f",
            "708dcf7d93f0e426",
            "3914849762882418"
        ],
        "x": 1094,
        "y": 339,
        "w": 792,
        "h": 142
    },
    {
        "id": "e1419462044728a3",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "Humedad",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "fa83b2151127c727",
            "9864a25f16236d0f",
            "e8d076d673b0062f",
            "f27af90432a9d1ce"
        ],
        "x": 1094,
        "y": 499,
        "w": 792,
        "h": 82
    },
    {
        "id": "e539cc8d8670fa6a",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "Temperatura",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "1d40c067aa6b81e9",
            "08842309694c8bab",
            "945f9d8631965dc1",
            "5ac83df035afb6f3",
            "4e182b0fa83cb332",
            "a1508307e5a54ab7",
            "ed18196da15b9d12",
            "ef4f90370b870fcc",
            "6969c4c38cf1af0e",
            "7d4dceb80377abe4",
            "4768707a9098fb23",
            "da3c633c34fad8eb",
            "1ed2280940d5db75",
            "061af7fac1fe5554",
            "0befb2601c5453c7",
            "7235b33bb85139c3",
            "5b1970f2b93f41df",
            "f6cba8292f57fa68",
            "a319282dc20b1712",
            "137df09f21d87c2f"
        ],
        "x": 1094,
        "y": 599,
        "w": 792,
        "h": 442
    },
    {
        "id": "8344f882bc6f7e0a",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "Conexiones",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "767ec8fc4ab1f4c1",
            "a56dd440b8eb4d6b",
            "0d71042f96fd60e5",
            "d81eb3faf849abe0",
            "2a0a6c8ba2f2d020",
            "2a31ee24cca2ccc1",
            "8ede5d4f32a0687f",
            "f70e16858d537dd9",
            "8c1a1a4cb1f00504",
            "9128ab6fdf7afcdb",
            "26e6dec50cd22e0e",
            "86861dbaf0395be9",
            "19182511d5a9c13a",
            "0bd685e285d408cc",
            "3809a9e51818d6af",
            "bc9372d0930381e5",
            "b0d289625ed1b4bc",
            "c4a8b15e93c31f15",
            "0a9e4ee6f718cadc",
            "f847774e7a2cf413",
            "b50489b6bd82b0f7",
            "5032016908db4ee9",
            "a40836b65d6efe39",
            "b5c7f119232a415d",
            "93556662e19cbdb7",
            "b92239618d897343",
            "ba4e16a101fa8be0"
        ],
        "x": 14,
        "y": 399,
        "w": 912,
        "h": 502
    },
    {
        "id": "ec0e2ac7900fa3f9",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "Input",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "fe142cdba710abf1",
            "f758201befab6fdb",
            "4877d8019e62a313"
        ],
        "x": 14,
        "y": 279,
        "w": 922,
        "h": 82
    },
    {
        "id": "7f061c58298ef81e",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "name": "Extra 1",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "5bb9bc8965e13cb7",
            "0956face0e6f3598",
            "bd7ff32f4a4240c0",
            "be8cec68cf632eef"
        ],
        "x": 54,
        "y": 1059
    },
    {
        "id": "2a56d2a7be9c7b76",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "name": "Extra 2",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "c38d796ff32f7042",
            "0b158c5b6bfceb48",
            "42d0e8a2a2d23c0e",
            "64febcac4f03edfe",
            "268cd8dcd1bc1833"
        ],
        "x": 54,
        "y": 1159
    },
    {
        "id": "ea102138d043bafa",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "Extra 2",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "0095a0e0e54af22c",
            "815d1be594737e12",
            "040b51d90c4176d1",
            "3c29a4510d854a3c",
            "7133b14cba1fa09f"
        ],
        "x": 14,
        "y": 1019,
        "w": 992,
        "h": 82
    },
    {
        "id": "297629dbd540b327",
        "type": "group",
        "z": "240e9138468e39f6",
        "name": "Extra 1",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "5050aab76f29694f",
            "cc7b38fd3c9c7256",
            "5bab50b9af0e76e6",
            "08e84a4803e5357c",
            "558414ec8a70ece0"
        ],
        "x": 14,
        "y": 919,
        "w": 992,
        "h": 82
    },
    {
        "id": "452dfd544fc2fce6",
        "type": "group",
        "z": "7a2a228bff5f9b1b",
        "name": "Ejercicio 3 - Testing",
        "style": {
            "stroke": "#a4a4a4",
            "label": true,
            "color": "#000000",
            "fill": "#e3f3d3"
        },
        "nodes": [
            "fab9f543e0403ab1",
            "8326e82b99489bb5",
            "a34d3f97dab4e0b5",
            "c876d0cdc773ea9e",
            "5753c128a2592add",
            "6ba3d2865f3abca3",
            "9e35842b2b180fca",
            "78fe538a23f071e7",
            "b316f3404ef1283f",
            "fd3917170b43836c"
        ],
        "x": 54,
        "y": 39
    },
    {
        "id": "ab4328f3ce21153a",
        "type": "group",
        "z": "7a2a228bff5f9b1b",
        "name": "",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "34554487634f6a45",
            "db1bd864885aa917",
            "38bcaac5dd6d8ec9",
            "f7bbbf759c1035c6"
        ],
        "x": 1048,
        "y": 53
    },
    {
        "id": "270307f35f30c014",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Ejercicio 1",
        "style": {
            "stroke": "#a4a4a4",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "7a9e114d8c8121d4",
            "d2b5378f006dcf82",
            "fb7010822d6bb986",
            "20f183d859f029d5",
            "69f48efb3ed2e9a2",
            "b8690d1e7db83076",
            "4ce5c24181a90fad",
            "1bacd1ab2f89ae19",
            "0367f9847eafdfc5",
            "500b07cc64c12311"
        ],
        "x": 34,
        "y": 39
    },
    {
        "id": "034ae3c7d299bca8",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "LEDS",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "193b2ad82d31cde9",
            "2537281fa85022da",
            "5a4733eb5ef27176",
            "576b46f9bf7b3dc9",
            "03d7f8316e1a7dc6",
            "5712e76a228cfe7a",
            "0939b7cf254f9201",
            "756bf8bfeb8c8ad7",
            "aeb8f26f50a869d4",
            "c63a62bea32075c0",
            "8cc0b21df1f6d4ab",
            "24946e4f8282e5f7",
            "48cee4fc7ec5b74f",
            "182f17adb09b093c"
        ],
        "x": 1234,
        "y": 39
    },
    {
        "id": "269f5e74b8681382",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Humedad",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "558bd8ac2c467f45",
            "22f99c7c67673279",
            "c66117b1fdd806d5",
            "c5e0f9ac5116754d"
        ],
        "x": 1234,
        "y": 519
    },
    {
        "id": "7e2b19e2a3ad35a1",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Temperatura",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "5f5b2b757ccdda37",
            "ad01a0fa20fbc900",
            "88114b10592f2e86",
            "3f11effdfade3c0c",
            "51934c2c7309041d",
            "39bae5fbe759d48c"
        ],
        "x": 1244,
        "y": 619
    },
    {
        "id": "e308511d7b132ac8",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Conexiones",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "3d232f5c78646eeb",
            "c708a584301c36f4",
            "13aefb2b905034c9",
            "112be335581efa50",
            "6563cadf1c8c1760",
            "80fd1401dc086ae4",
            "a07ee75e7d5f20f0",
            "b0fb94e808835f10",
            "633cb12bf37eb606",
            "5cbd8e343cf35e46",
            "ccde711847fac60b",
            "8f9b1df76a93695a",
            "215156ba0deebab0",
            "5608320c39684fc9",
            "f0e451d92dfe2699",
            "83e64e0e3037e7b4",
            "591fd6a7f4ff20fe",
            "27c65d3061597a5b",
            "e6ab46d16363d6d6",
            "f8c3f925ec0fdb14",
            "b7ae2bc76235434b",
            "b363bc167b4d635d",
            "b4bb0517cd553e43",
            "4af9e17c13f8e617",
            "c146bf7d408652f7",
            "94865c6d6da736c9",
            "fe3a7ce2e30a7e42"
        ],
        "x": 1224,
        "y": 759
    },
    {
        "id": "531ca8b2fcf5e560",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Presión",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "d28a91f32dac6fe3",
            "5b9b37b255a61e4a",
            "0b56f1b4e827a08b",
            "e7e97ddcfa05ad37",
            "0fcdb51ee77c6f78"
        ],
        "x": 1234,
        "y": 359
    },
    {
        "id": "c867ac9e3fdd1cbf",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Ejercicio 4",
        "style": {
            "stroke": "#a4a4a4",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "9b25c5b420c7f72b",
            "e4718518fcf97c09",
            "fc0178895a1aee94",
            "1d35200c560c9797",
            "4ee2c7c576ce35a4",
            "f7a3c063082b6b48",
            "e64b3085.9a525"
        ],
        "x": 34,
        "y": 599
    },
    {
        "id": "3794648bb169b272",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Ejercicio 5",
        "style": {
            "stroke": "#a4a4a4",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "6f2385b31ff14630",
            "37e97867580b33fe",
            "c8914d0a9113990b",
            "e91db7f6e967d630",
            "63fa2691c2ed03b2",
            "1618cce562a50646"
        ],
        "x": 34,
        "y": 779
    },
    {
        "id": "61af492eb62b5b4d",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Ejercicio 3",
        "style": {
            "stroke": "#a4a4a4",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "17422dfaf138a6cf",
            "829d2c2fd7369339",
            "4f6a219dd5ca56ba",
            "02cdbb45bab265bf",
            "19370125730d77e6",
            "53f223c7e2ad0ea1",
            "03c3979010c41f33",
            "e0b1c6c5c2a41a05",
            "7da74ad0c2ce8991",
            "161d832346e40b1d"
        ],
        "x": 34,
        "y": 399
    },
    {
        "id": "94dc048a9c84b452",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Ejercicio 2",
        "style": {
            "stroke": "#a4a4a4",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "99846e687134cd5a",
            "52847e1fef43b5bd",
            "ab56ca8423144561",
            "e07bdbea1aa218e5",
            "9d954e9055d207a2"
        ],
        "x": 34,
        "y": 299
    },
    {
        "id": "f4f56cd0159288c3",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Ejercicio en clase",
        "style": {
            "stroke": "#000000",
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "172ddd8b54e52f43",
            "d02f577c31b6e6b5",
            "528f18345fc130c7",
            "f7da87dfd1caafa7",
            "fd7da9f49098fa93",
            "0197b0cdd2bf835e",
            "51044b70f943ab88",
            "b227d0a39833605f",
            "1ed97e83a3aa7230",
            "f74ae1123d309d8a",
            "c4c5fe67cd7f756f"
        ],
        "x": 34,
        "y": 1119
    },
    {
        "id": "a30b6d8ea68c3596",
        "type": "group",
        "z": "28aa48179e689485",
        "name": "Ejercicio en clase",
        "style": {
            "stroke": "#000000",
            "label": true,
            "fill": "#bfdbef"
        },
        "nodes": [
            "9300db5867473dfb",
            "49012e8e0c0c4162",
            "8a9296b558c17ba2",
            "114f6ff116a2d363"
        ],
        "x": 30.99993896484375,
        "y": 939
    },
    {
        "id": "2f2d6fcd70cbfe4a",
        "type": "group",
        "z": "13df9ad25c9618e4",
        "name": "Estado y LWT",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "dfaadf3ab199e00c",
            "1eaec8b318944fc3",
            "56640648f318fb19",
            "631359044b52c8b1",
            "b5d1dddf4e575f4e",
            "d5b5d13671439e9a",
            "06e1a8509d49c5a1",
            "89c9e5866eeb4402",
            "02738aad3e6d70d4"
        ],
        "x": 14,
        "y": 19,
        "info": "# Estado y LWT\n\n- Topic: infind/GRUPOX/conexion\n- Acción: Publicar\n- Descripción: Estado de conexión del dispositivo (mensaje retenido). Usar últimas voluntades (LWT) para enviar la notificación desconexión\n- Ejemplos: {\"online\":true}  {\"online\":false}"
    },
    {
        "id": "31d7abf2d95de80e",
        "type": "group",
        "z": "13df9ad25c9618e4",
        "name": "Sensores",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "a30adc92797161ad",
            "e4e313be7cf72272",
            "204e8951dbb09c53",
            "fd4c253fa4036aa9",
            "7873a2401884d320",
            "ecccce0a5594afdb",
            "39d6fac3b45b36ea",
            "2a35eff3801fbdb8",
            "cdeea9f974f54573",
            "495dd803d5128cd4",
            "bee0e551b2c2a3bf",
            "30fc991dc7523ddb",
            "34d884309e9afa81"
        ],
        "x": 14,
        "y": 239,
        "info": "# Sensores\n\n- Topic: infind/GRUPOX/datos\n- Acción: Publicar\n- Descripción: Actualización periódica (30s) de información de sensores y más\n- Ejemplo:\n\n\n{\n\n\"Uptime\":12300,\n\n\"Vcc\":2.97,\n\n\"DHT11\":{\"temp\":26.0,\"hum\":37.0},\n\n\"LED\":100,\n\n\"Wifi\":{\"SSId\":\"infind\",\"IP\":\"192.168.0.100\",\"RSSI\":56}\n\n}\n"
    },
    {
        "id": "5cba6c5db0d46559",
        "type": "group",
        "z": "13df9ad25c9618e4",
        "name": "Estado Led",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "9beb600c63b60280",
            "93107118806b4b86",
            "29d5550a23b4d981",
            "5ae2c99e08b2c418",
            "6f2c3dd3b98b38db"
        ],
        "x": 14,
        "y": 859,
        "info": "# Sensores\n\n- Topic: infind/GRUPOX/datos\n- Acción: Publicar\n- Descripción: Actualización periódica (30s) de información de sensores y más\n- Ejemplo:\n\n\n{\n\n\"Uptime\":12300,\n\n\"Vcc\":2.97,\n\n\"DHT11\":{\"temp\":26.0,\"hum\":37.0},\n\n\"LED\":100,\n\n\"Wifi\":{\"SSId\":\"infind\",\"IP\":\"192.168.0.100\",\"RSSI\":56}\n\n}\n"
    },
    {
        "id": "c59e69ccdd22540f",
        "type": "group",
        "z": "13df9ad25c9618e4",
        "name": "Cambio LED",
        "style": {
            "fill": "#ffbfbf",
            "label": true
        },
        "nodes": [
            "0fc0b1c73d0162a9",
            "02e9f915f64990b0",
            "e741bb926c073ddc",
            "1031733d058764be",
            "612853001cbb9f90"
        ],
        "x": 14,
        "y": 619,
        "info": "# Intensidad\n\n- Topic: infind/GRUPOX/led/cmd\n- Acción: Suscribir\n- Descripción: El dispositivo recibe la configuración de intensidad del LED [0-100]\n- Ejemplo: { \"level\":75 }"
    },
    {
        "id": "0cdda659d54342bd",
        "type": "group",
        "z": "45a4e39f.03efac",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "696c19e5.d26f78",
            "6baf2f65.ab099",
            "2cf239ee.fe0836",
            "338058ea.875b28",
            "e84f5da3.829a3",
            "80d43bb8.0e3d88",
            "85028a8d.668138",
            "fb2ad7fd.fd9d38",
            "c91834d1.9bf4b8",
            "a8feb814.7498e8",
            "ba35e1b7.ec857",
            "50818085.451f5"
        ],
        "x": 54,
        "y": 19
    },
    {
        "id": "0888e7373481d35e",
        "type": "group",
        "z": "122f65d809b34d8e",
        "name": "Clean the collection",
        "style": {
            "label": true
        },
        "nodes": [
            "574e891f993fcb91",
            "c8ba76d152d7366a"
        ],
        "x": 794,
        "y": 659,
        "w": 432,
        "h": 82
    },
    {
        "id": "0f1cf58e08b73cc2",
        "type": "group",
        "z": "122f65d809b34d8e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "21f9347e8aef3828",
            "e8c6e9ffed7b9a38",
            "a2b9b895f1a88888",
            "8d9f6656f8f37055",
            "20ec2a5a24d52017",
            "5baf45c3e6032233"
        ],
        "x": 1324,
        "y": 179,
        "w": 342,
        "h": 242
    },
    {
        "id": "9c2f3a58f83b946f",
        "type": "group",
        "z": "03c76acfc9a07adb",
        "name": "Comprobar",
        "style": {
            "label": true
        },
        "nodes": [
            "d9ce5f1f9c1579e9",
            "47d6ae483f6a2bd1"
        ],
        "x": 14,
        "y": 399
    },
    {
        "id": "e6031d3ff7a2c7b4",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "g": "0b10c282ffcb0e7b",
        "name": "Control led red",
        "style": {
            "label": true
        },
        "nodes": [
            "7eb497ab812a25be",
            "0318856b60cbd6e1",
            "2e8f03dc1c942c24"
        ],
        "x": 974,
        "y": 379
    },
    {
        "id": "90e7335f291ea8dd",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "g": "0b10c282ffcb0e7b",
        "name": "Control led green",
        "style": {
            "label": true
        },
        "nodes": [
            "c3149fa7f57a0629",
            "9bb4c76ed0081af5",
            "6e26c3bd36cae061"
        ],
        "x": 974,
        "y": 539
    },
    {
        "id": "c74e5f6560244f59",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "g": "a6101559ef212be0",
        "style": {
            "stroke": "#a8a095",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#afa89d"
        },
        "nodes": [
            "6ecf19a0e1375f1e"
        ],
        "x": 974,
        "y": 39
    },
    {
        "id": "e37aeb7da330393e",
        "type": "group",
        "z": "79e1efd2b7cf0d02",
        "g": "a6101559ef212be0",
        "style": {
            "stroke": "#a8a095",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#afa89d"
        },
        "nodes": [
            "e7a52f948e70f729",
            "f0e063bdf3c27c89",
            "4fe663ed27d540de"
        ],
        "x": 974,
        "y": 179
    },
    {
        "id": "8c42595fd702f856",
        "type": "group",
        "z": "240e9138468e39f6",
        "g": "d67c96eb46005d02",
        "style": {
            "stroke": "#a8a095",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#afa89d"
        },
        "nodes": [
            "9ded6ebbbd3adb27",
            "66cfe09992108ec7",
            "e4b1a3e75cbffc3c"
        ],
        "x": 1934,
        "y": 39,
        "w": 262,
        "h": 122
    },
    {
        "id": "6793a44395d337f2",
        "type": "group",
        "z": "240e9138468e39f6",
        "g": "d67c96eb46005d02",
        "style": {
            "stroke": "#a8a095",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#afa89d"
        },
        "nodes": [
            "27309bfed6048359",
            "95da5e1fe2cdf27a",
            "d84be5d03107784f"
        ],
        "x": 1934,
        "y": 179,
        "w": 262,
        "h": 122
    },
    {
        "id": "34554487634f6a45",
        "type": "group",
        "z": "7a2a228bff5f9b1b",
        "g": "ab4328f3ce21153a",
        "name": "Ejercicio 4 ",
        "style": {
            "stroke": "#a4a4a4",
            "label": true,
            "color": "#000000",
            "fill": "#e3f3d3"
        },
        "nodes": [
            "aa30d7aefdb74982",
            "fee945a41a9eecb2",
            "16521c764bb85856"
        ],
        "x": 1074,
        "y": 79
    },
    {
        "id": "db1bd864885aa917",
        "type": "group",
        "z": "7a2a228bff5f9b1b",
        "g": "ab4328f3ce21153a",
        "name": "",
        "style": {
            "stroke": "#a4a4a4",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "5d05ec264c0d4f29",
            "0ad1a470a6d2e0e6",
            "ea496d37ceabf649",
            "d1b6cec415033237"
        ],
        "x": 1074,
        "y": 219
    },
    {
        "id": "38bcaac5dd6d8ec9",
        "type": "group",
        "z": "7a2a228bff5f9b1b",
        "g": "ab4328f3ce21153a",
        "name": "",
        "style": {
            "stroke": "#a4a4a4",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "dce7eac07dc32b17",
            "a42e30e862124474",
            "ab6c8a8815fd51b8",
            "d0368dc15927f780",
            "b238e7e06b0e188b",
            "742362ab6ac163d5",
            "54c11767c002873f",
            "191304c6c3d76777",
            "efae4a070823fb92",
            "ba4a596c15e39c03",
            "91eefba7a4f0d452",
            "851d52f94e9f7558"
        ],
        "x": 1074,
        "y": 419
    },
    {
        "id": "f7bbbf759c1035c6",
        "type": "group",
        "z": "7a2a228bff5f9b1b",
        "g": "ab4328f3ce21153a",
        "name": "",
        "style": {
            "stroke": "#a4a4a4",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "798d321a5f3e32b9",
            "cb6a1b1593dc14b4",
            "ad58e3efea64f3b2",
            "081e229272675cc3"
        ],
        "x": 1074,
        "y": 319
    },
    {
        "id": "dfefd42be31cab40",
        "type": "mqtt-broker",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "64cdcf7a3b4cd223",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "950c05f1ac2d3f82",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "Arial Black,Arial Black,Gadget,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "La Caja Game",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "afc96c5537aa9bd2",
        "type": "ui_tab",
        "name": "Tarea 1 + extra",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5b43d9b58de38c94",
        "type": "ui_group",
        "name": "Time",
        "tab": "89e7d4e0c36d9489",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": "<style>     #nr-dashboard-cardtitle{text-align: center !important;} </style>"
    },
    {
        "id": "fadc24b19848c47b",
        "type": "ui_group",
        "name": "Control LED Verde",
        "tab": "afc96c5537aa9bd2",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "13bc2dd9a45cc0e9",
        "type": "ui_group",
        "name": "Temperatura",
        "tab": "afc96c5537aa9bd2",
        "order": 3,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "cb79f73074024dbb",
        "type": "ui_group",
        "name": "Humedad",
        "tab": "afc96c5537aa9bd2",
        "order": 4,
        "disp": false,
        "width": "8",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d27cc3eaafc9bcc8",
        "type": "ui_group",
        "name": "Presión",
        "tab": "afc96c5537aa9bd2",
        "order": 5,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "96d7b634fbe25751",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "9ff8455e4877d275",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "1482f7c9cab5d4a1",
        "type": "ui_group",
        "name": "Dato ADC",
        "tab": "afc96c5537aa9bd2",
        "order": 6,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "c8b2b5778aed34b0",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "251fc0d11da602c6",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "59aa107107b6074e",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "a15e8808fd506feb",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "ec6230cd34b267ef",
        "type": "ui_tab",
        "name": "Tarea 2",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "6d8ffaa69a25c68f",
        "type": "ui_group",
        "name": "Control LED Rojo",
        "tab": "ec6230cd34b267ef",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": "<style>     #nr-dashboard-cardtitle{text-align: center !important;} </style>"
    },
    {
        "id": "e8ccf6ad47502312",
        "type": "ui_group",
        "name": "Control LED Verde",
        "tab": "ec6230cd34b267ef",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "60916e8014cfd3f7",
        "type": "ui_group",
        "name": "Temperatura",
        "tab": "ec6230cd34b267ef",
        "order": 3,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8599d9afed430a9d",
        "type": "ui_group",
        "name": "Humedad",
        "tab": "ec6230cd34b267ef",
        "order": 4,
        "disp": false,
        "width": "8",
        "collapse": false,
        "className": ""
    },
    {
        "id": "386ddfb962d0c80d",
        "type": "ui_group",
        "name": "Presión",
        "tab": "ec6230cd34b267ef",
        "order": 5,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bb45de54a7fe18b8",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "c9c513303f389c7d",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "3d72c6d43da61785",
        "type": "ui_group",
        "name": "Conexión",
        "tab": "ec6230cd34b267ef",
        "order": 6,
        "disp": true,
        "width": "8",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bf64e5c6fbbba3c3",
        "type": "ui_group",
        "name": "Dato ADC",
        "tab": "ec6230cd34b267ef",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "498b706769fb5160",
        "type": "ui_tab",
        "name": "Tarea 4",
        "icon": "dashboard",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d20b3cd14e645d48",
        "type": "ui_group",
        "name": "Humedad",
        "tab": "498b706769fb5160",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8a548b476cc419b4",
        "type": "ui_group",
        "name": "Temperatura",
        "tab": "498b706769fb5160",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e968a1c70a34a463",
        "type": "ui_group",
        "name": "Sensación térmica",
        "tab": "498b706769fb5160",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ff340c796cfbcd07",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "ce30e442c74a8757",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "b838b28975e115b3",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "25d3b348baa44989",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "3faf59b5c0904ba0",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "69f9be3977f6a86b",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "a5a79e0203c5b083",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "387bddd0cc6d1f12",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "70257f4534da7029",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "284e0b37b67b2822",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "e8038adf457b4465",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "6ac432b491b7d6fc",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "ca0dd972168dc6a0",
        "type": "mongodb",
        "hostname": "iot.ac.uma.es",
        "topology": "direct",
        "connectOptions": "",
        "port": "27017",
        "db": "pruebas",
        "name": ""
    },
    {
        "id": "05cea6759e795a87",
        "type": "mongodb",
        "hostname": "127.0.0.1",
        "topology": "direct",
        "connectOptions": "",
        "port": "27017",
        "db": "local",
        "name": ""
    },
    {
        "id": "cd777711829327e5",
        "type": "ui_tab",
        "name": "Tarea 3",
        "icon": "dashboard",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "cbfbdc48914b032d",
        "type": "ui_group",
        "name": "Conexiones",
        "tab": "cd777711829327e5",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2888ca9d00385ef8",
        "type": "ui_group",
        "name": "LED Rojo",
        "tab": "cd777711829327e5",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "98ee1182cc353ad6",
        "type": "ui_group",
        "name": "Presión",
        "tab": "cd777711829327e5",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "c271ce14649409b0",
        "type": "ui_group",
        "name": "Humedad",
        "tab": "cd777711829327e5",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4f2fd049c27a14a1",
        "type": "ui_group",
        "name": "Temperatura",
        "tab": "cd777711829327e5",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f8b2658284e752dc",
        "type": "ui_group",
        "name": "LED Verde",
        "tab": "cd777711829327e5",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f4f4dc208bbef1ee",
        "type": "ui_group",
        "name": "Consultas Slider",
        "tab": "cd777711829327e5",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9eaa5333ae7be1f9",
        "type": "ui_group",
        "name": "Consultas numeric",
        "tab": "cd777711829327e5",
        "order": 8,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "24a2032a9df17ba3",
        "type": "ui_group",
        "name": "Consultas Range",
        "tab": "cd777711829327e5",
        "order": 9,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8b67b1bd51c43347",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "b8b5fb6b4bfeb434",
        "type": "ui_group",
        "name": "Estado y LWT",
        "tab": "4a06ba0a96f6d1fb",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "27e360b8dee7f0ae",
        "type": "ui_group",
        "name": "G3 Datos",
        "tab": "4a06ba0a96f6d1fb",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4a06ba0a96f6d1fb",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "b8514a208e81c49e",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "3dc9ec03600ab1b0",
        "type": "ui_group",
        "name": "datos",
        "tab": "547a5b5e59839162",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "95bf002b73b4a351",
        "type": "ui_group",
        "name": "Default",
        "tab": "f3101f3b8af327c7",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "547a5b5e59839162",
        "type": "ui_tab",
        "name": "elquequerais",
        "icon": "dashboard",
        "order": 8,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f3101f3b8af327c7",
        "type": "ui_tab",
        "name": "LEDs",
        "icon": "dashboard",
        "order": 9,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ec5e3bd27f5064bc",
        "type": "ui_group",
        "name": "Datos dispositivo",
        "tab": "da9051b8aca9da78",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "69f47afb1a3237b5",
        "type": "ui_group",
        "name": "Gráficas",
        "tab": "da9051b8aca9da78",
        "order": 2,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "142ed0bb263fc1a7",
        "type": "ui_group",
        "name": "Estado LEDs",
        "tab": "da9051b8aca9da78",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "da9051b8aca9da78",
        "type": "ui_tab",
        "name": "Dashboard Principal",
        "icon": "dashboard",
        "order": 10,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "9ffa43d52f7365a9",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "f8e3360024a8fede",
        "type": "ui_group",
        "name": "Datos dispositivo",
        "tab": "906601726774ec61",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9de2c791b931a51a",
        "type": "ui_group",
        "name": "Histórico",
        "tab": "906601726774ec61",
        "order": 2,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b0172c0d62a7dc67",
        "type": "ui_group",
        "name": "LEDs",
        "tab": "906601726774ec61",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "906601726774ec61",
        "type": "ui_tab",
        "name": "Grupo1",
        "icon": "dashboard",
        "order": 11,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "fd4ef32ed97b3267",
        "type": "ui_tab",
        "name": "Información Completa",
        "icon": "dashboard",
        "order": 12,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f05d79154bee32af",
        "type": "ui_group",
        "name": "Conexiones",
        "tab": "fd4ef32ed97b3267",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d65024e343511220",
        "type": "ui_group",
        "name": "Gráficas",
        "tab": "fd4ef32ed97b3267",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "995da68e7598652e",
        "type": "ui_group",
        "name": "Datos del Dispositivo",
        "tab": "fd4ef32ed97b3267",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b266f63deeb3007d",
        "type": "ui_group",
        "name": "LEDs",
        "tab": "fd4ef32ed97b3267",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4a17300d61e0065b",
        "type": "ui_group",
        "name": "Control LEDs",
        "tab": "da9051b8aca9da78",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "76fc120df06c3d4a",
        "type": "ui_group",
        "name": "Conexiones",
        "tab": "da9051b8aca9da78",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "74b28a5e7c866247",
        "type": "ui_group",
        "name": "ESP82",
        "tab": "423b6a130b684fb2",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "11e77274e18f5e66",
        "type": "ui_group",
        "name": "Control LEDs JSON",
        "tab": "da9051b8aca9da78",
        "order": 6,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "6d4110de9bf1bcf5",
        "type": "ui_group",
        "name": "Estado LEDs (sin bugs JSON)",
        "tab": "da9051b8aca9da78",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4f161821e0636e81",
        "type": "ui_group",
        "name": "Datos Dispositivo 2.0",
        "tab": "da9051b8aca9da78",
        "order": 8,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f229aa351b50819b",
        "type": "mongodb",
        "hostname": "127.0.0.1",
        "topology": "direct",
        "connectOptions": "",
        "port": "27017",
        "db": "pruebas",
        "name": ""
    },
    {
        "id": "2222263843bdba85",
        "type": "ui_tab",
        "name": "MongoDB",
        "icon": "dashboard",
        "order": 13,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5f8d4c27dcbd6798",
        "type": "ui_group",
        "name": "Default",
        "tab": "2222263843bdba85",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "71800cda9a1eabf9",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "6046a47177835823",
        "type": "mongodb",
        "hostname": "127.0.0.1",
        "connectOptions": "",
        "port": "27017",
        "db": "test",
        "name": ""
    },
    {
        "id": "71d4105137694090",
        "type": "ui_group",
        "name": "Consulta",
        "tab": "4db8e8aa79d93f4e",
        "order": 1,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4db8e8aa79d93f4e",
        "type": "ui_tab",
        "name": "Ejemplo Mongo",
        "icon": "dashboard",
        "order": 14,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "423b6a130b684fb2",
        "type": "ui_tab",
        "name": "ESP82",
        "icon": "dashboard",
        "order": 15,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "89e7d4e0c36d9489",
        "type": "ui_tab",
        "name": "LaCaja - Debug",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1d5a7f2c4047edc7",
        "type": "ui_group",
        "name": "Controles Consulta",
        "tab": "4db8e8aa79d93f4e",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "638e08dab45a6aee",
        "type": "ui_group",
        "name": "Datos Sensor",
        "tab": "423b6a130b684fb2",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "98c3801e20c06bc5",
        "type": "ui_group",
        "name": "Consulta Tiempo",
        "tab": "4db8e8aa79d93f4e",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "81d3b2a6dd28b58e",
        "type": "ui_group",
        "name": "Gráfica",
        "tab": "4db8e8aa79d93f4e",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ef2c90a21fdbd37b",
        "type": "ui_group",
        "name": "Mensaje",
        "tab": "423b6a130b684fb2",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f605fa69.8f5008",
        "type": "mongodb",
        "hostname": "iot.ac.uma.es",
        "connectOptions": "",
        "port": "27017",
        "db": "examen",
        "name": ""
    },
    {
        "id": "c7a3425e606353b2",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "1f33bd2091f1c0f0",
        "type": "telegram bot",
        "botname": "botagendabot",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "3752afa1.deaf9",
        "type": "mongodb",
        "hostname": "iot.ac.uma.es",
        "connectOptions": "",
        "port": "27017",
        "db": "pruebas",
        "name": ""
    },
    {
        "id": "a34ffe7a.04009",
        "type": "ui_group",
        "name": "Grupo descarga",
        "tab": "e63432e4.6c1e",
        "order": 1,
        "disp": true,
        "width": "8",
        "collapse": false
    },
    {
        "id": "2b251178.95ad2e",
        "type": "mqtt-broker",
        "name": "iot infind",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "e63432e4.6c1e",
        "type": "ui_tab",
        "name": "Ejemplo descarga",
        "icon": "dashboard",
        "order": 16,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "970b2d92940cc035",
        "type": "ui_group",
        "name": "Grupo aggregación",
        "tab": "078c073b376af0aa",
        "order": 1,
        "disp": true,
        "width": "10",
        "collapse": false
    },
    {
        "id": "078c073b376af0aa",
        "type": "ui_tab",
        "name": "Agregación",
        "icon": "dashboard",
        "order": 17,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "14bda206c3f7ab91",
        "type": "ui_tab",
        "name": "Examen",
        "icon": "dashboard",
        "order": 18,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ef4e3347ed457b9c",
        "type": "ui_group",
        "name": "Input",
        "tab": "14bda206c3f7ab91",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2f39551d1464f827",
        "type": "ui_group",
        "name": "Game Status",
        "tab": "89e7d4e0c36d9489",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2156a9e02110da25",
        "type": "ui_tab",
        "name": "LaCaja - User",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f870df7d6c3cc2e9",
        "type": "ui_group",
        "name": "Game Status",
        "tab": "2156a9e02110da25",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "37ec8e592794dd5a",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Iluminacion",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.ADC.Iluminacion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "cbca515058def3f9",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Temperatura",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Temperatura",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "965433bea2abdd7f",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Humedad",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Humedad",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "02ad691c4d094030",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Presion",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Presion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "3ab993c9aaeb02a9",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Rojo",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.LEDs.Rojo",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "ed54312aaa364df5",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Verde",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.LEDs.Verde",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "8579e5a838f746f2",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "ChipID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.nodeID.ChipID",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "c80f38ea1c9620b4",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Des",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.Des",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "4e09efcff6e84b0c",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "SSID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.SSID",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "95164f1d4c36c5d5",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "RSSI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.RSSI",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "6c4c38ff165dbd18",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "localIP",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.localIP",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "b03cec66fb391724",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "macAddress",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.macAddress",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "b0c38e47413631d4",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "uptime_ms",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.uptime_ms",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "fa36c4f9fd494fa8",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "interval_s",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.interval_s",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "d8fc63694048f63f",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "function 9",
        "func": "msg.payload = \"El juego 1 ha comenzado!\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "60f7d5fedf815de3",
        "type": "mongodb in",
        "z": "7cbc96056c55979a",
        "mongodb": "6046a47177835823",
        "name": "",
        "collection": "test",
        "operation": "aggregate",
        "x": 830,
        "y": 200,
        "wires": [
            [
                "662f7e25afd3725e",
                "47a99b0fd9516842"
            ]
        ]
    },
    {
        "id": "ee71b9a0dd9d7153",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Recupera un acertijo aleatorio de la base de datos",
        "func": "msg.payload = [{\"$sample\": { \"size\": 1 }}];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 200,
        "wires": [
            [
                "60f7d5fedf815de3"
            ]
        ]
    },
    {
        "id": "662f7e25afd3725e",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "Get puzzle",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].payload.content",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1030,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "f3b847c371af68b1",
        "type": "complete",
        "z": "7cbc96056c55979a",
        "name": "",
        "scope": [
            "596bccbef118b85d"
        ],
        "uncaught": false,
        "x": 190,
        "y": 200,
        "wires": [
            [
                "ee71b9a0dd9d7153"
            ]
        ]
    },
    {
        "id": "596bccbef118b85d",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "function 13",
        "func": "msg.payload = \"\\nInstrucciones del juego...\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "0f3916964d2cfd78",
        "type": "complete",
        "z": "7cbc96056c55979a",
        "name": "",
        "scope": [
            "d8fc63694048f63f"
        ],
        "uncaught": false,
        "x": 190,
        "y": 140,
        "wires": [
            [
                "e658caa098e07164"
            ]
        ]
    },
    {
        "id": "47a99b0fd9516842",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "Get ans",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].payload.ans",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "516c74b42ad9d047",
        "type": "complete",
        "z": "7cbc96056c55979a",
        "name": "",
        "scope": [
            "662f7e25afd3725e"
        ],
        "uncaught": false,
        "x": 190,
        "y": 260,
        "wires": [
            [
                "1866be8fcdfc5ce7"
            ]
        ]
    },
    {
        "id": "1866be8fcdfc5ce7",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "Start game",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1030,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "e658caa098e07164",
        "type": "delay",
        "z": "7cbc96056c55979a",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 360,
        "y": 140,
        "wires": [
            [
                "596bccbef118b85d"
            ]
        ]
    },
    {
        "id": "d8261c06169fe9f4",
        "type": "inject",
        "z": "7cbc96056c55979a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 340,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "45a21b9fac9c3de7",
        "type": "mqtt in",
        "z": "7cbc96056c55979a",
        "name": "",
        "topic": "II3/ESP002/pub/cara002",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "2b251178.95ad2e",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 190,
        "y": 540,
        "wires": [
            [
                "e2682dfe44891292",
                "6173734f83d2a26f"
            ]
        ]
    },
    {
        "id": "e2682dfe44891292",
        "type": "debug",
        "z": "7cbc96056c55979a",
        "name": "debug 17",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 540,
        "wires": []
    },
    {
        "id": "6173734f83d2a26f",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "",
        "func": "if(msg.payload.state == \"finished\"){\n    msg.payload = 0;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 600,
        "wires": [
            [
                "a1eddbb6926e85d8"
            ]
        ]
    },
    {
        "id": "a1eddbb6926e85d8",
        "type": "debug",
        "z": "7cbc96056c55979a",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 660,
        "y": 600,
        "wires": []
    },
    {
        "id": "9315d4ad8bda91a4",
        "type": "mqtt out",
        "z": "075ef7a340b6c689",
        "name": "",
        "topic": "II3/ESP004/cmd/cara004",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 670,
        "y": 180,
        "wires": []
    },
    {
        "id": "1a56092cc430c2ee",
        "type": "function",
        "z": "075ef7a340b6c689",
        "name": "function 16",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "fab9f543e0403ab1",
        "type": "debug",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 80,
        "wires": []
    },
    {
        "id": "8326e82b99489bb5",
        "type": "mqtt in",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "",
        "topic": "infind/ESP_00000001/pub",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 190,
        "y": 80,
        "wires": [
            [
                "fab9f543e0403ab1"
            ]
        ]
    },
    {
        "id": "a34d3f97dab4e0b5",
        "type": "mqtt out",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "",
        "topic": "infind/ESP_00000001/sub",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 410,
        "y": 240,
        "wires": []
    },
    {
        "id": "c876d0cdc773ea9e",
        "type": "inject",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 170,
        "y": 240,
        "wires": [
            [
                "a34d3f97dab4e0b5"
            ]
        ]
    },
    {
        "id": "5753c128a2592add",
        "type": "inject",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 170,
        "y": 200,
        "wires": [
            [
                "a34d3f97dab4e0b5"
            ]
        ]
    },
    {
        "id": "6ba3d2865f3abca3",
        "type": "inject",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lala",
        "payload": "0",
        "payloadType": "num",
        "x": 170,
        "y": 280,
        "wires": [
            [
                "a34d3f97dab4e0b5"
            ]
        ]
    },
    {
        "id": "9e35842b2b180fca",
        "type": "inject",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "lala",
        "payload": "1",
        "payloadType": "num",
        "x": 170,
        "y": 320,
        "wires": [
            [
                "a34d3f97dab4e0b5"
            ]
        ]
    },
    {
        "id": "78fe538a23f071e7",
        "type": "inject",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 160,
        "wires": [
            [
                "a34d3f97dab4e0b5",
                "fab9f543e0403ab1"
            ]
        ]
    },
    {
        "id": "b316f3404ef1283f",
        "type": "comment",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "He probado este archivo en casa y en clase, el ID_PLACA ha cambiado, por lo tanto depende de la red, en el código .ino lo he fijado.",
        "info": "",
        "x": 540,
        "y": 360,
        "wires": []
    },
    {
        "id": "fd3917170b43836c",
        "type": "comment",
        "z": "7a2a228bff5f9b1b",
        "g": "452dfd544fc2fce6",
        "name": "Para facilitar la correción.",
        "info": "",
        "x": 210,
        "y": 400,
        "wires": []
    },
    {
        "id": "aa30d7aefdb74982",
        "type": "mqtt in",
        "z": "7a2a228bff5f9b1b",
        "g": "34554487634f6a45",
        "name": "",
        "topic": "infind/ESP_00000001/pub/Jorge/temperatura",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1270,
        "y": 120,
        "wires": [
            [
                "fee945a41a9eecb2",
                "16521c764bb85856"
            ]
        ]
    },
    {
        "id": "5d05ec264c0d4f29",
        "type": "change",
        "z": "7a2a228bff5f9b1b",
        "g": "db1bd864885aa917",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "humedad",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 260,
        "wires": [
            [
                "0ad1a470a6d2e0e6"
            ]
        ]
    },
    {
        "id": "0ad1a470a6d2e0e6",
        "type": "ui_gauge",
        "z": "7a2a228bff5f9b1b",
        "g": "db1bd864885aa917",
        "name": "",
        "group": "d20b3cd14e645d48",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "wave",
        "title": "Humedad",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1760,
        "y": 260,
        "wires": []
    },
    {
        "id": "ea496d37ceabf649",
        "type": "change",
        "z": "7a2a228bff5f9b1b",
        "g": "db1bd864885aa917",
        "name": "Humedad",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.humedad",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1240,
        "y": 260,
        "wires": [
            [
                "5d05ec264c0d4f29"
            ]
        ]
    },
    {
        "id": "dce7eac07dc32b17",
        "type": "function",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "",
        "func": "msg.topic = \"temperatura\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 460,
        "wires": [
            [
                "191304c6c3d76777"
            ]
        ]
    },
    {
        "id": "a42e30e862124474",
        "type": "ui_text",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "group": "8a548b476cc419b4",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Hora de recepción",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1710,
        "y": 500,
        "wires": []
    },
    {
        "id": "ab6c8a8815fd51b8",
        "type": "function",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1520,
        "y": 500,
        "wires": [
            [
                "a42e30e862124474"
            ]
        ]
    },
    {
        "id": "d0368dc15927f780",
        "type": "smooth",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "6",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 1320,
        "y": 620,
        "wires": [
            [
                "efae4a070823fb92"
            ]
        ]
    },
    {
        "id": "b238e7e06b0e188b",
        "type": "ui_chart",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "",
        "group": "8a548b476cc419b4",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Temperatura (ºC)",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1730,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "742362ab6ac163d5",
        "type": "inject",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "Reset chart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 1510,
        "y": 540,
        "wires": [
            [
                "b238e7e06b0e188b"
            ]
        ]
    },
    {
        "id": "54c11767c002873f",
        "type": "change",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "Actual",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "temperatura_actual",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 580,
        "wires": [
            [
                "d0368dc15927f780",
                "ba4a596c15e39c03"
            ]
        ]
    },
    {
        "id": "191304c6c3d76777",
        "type": "ui_gauge",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "",
        "group": "8a548b476cc419b4",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Temperatura",
        "label": "ºC",
        "format": "{{value | number:1}}",
        "min": "-5",
        "max": "50",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1750,
        "y": 460,
        "wires": []
    },
    {
        "id": "efae4a070823fb92",
        "type": "change",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "temperatura_media",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 660,
        "wires": [
            [
                "ba4a596c15e39c03"
            ]
        ]
    },
    {
        "id": "ba4a596c15e39c03",
        "type": "function",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "Diferencia actual y media",
        "func": "var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\ncontext.data = context.data || {};\nswitch (msg.topic){\n    case \"temperatura_media\":\n        context.data.temperatura_media = msg.payload;\n        msg = null;\n        break;\n    case \"temperatura_actual\":\n        context.data.temperatura_actual = msg.payload;\n        msg = null;\n        break;\n    default:\n        msg = null;\n        break;\n}\n\nif (context.data.temperatura_actual != null && context.data.temperatura_media != null){\n    msg1.payload = Math.abs(context.data.temperatura_actual-context.data.temperatura_media);\n    msg1.topic = \"Diferencia\";\n    msg2.payload = context.data.temperatura_actual;\n    msg2.topic = \"Actual\";\n    msg3.payload = context.data.temperatura_media;\n    msg3.topic = \"Media\";\n    context.data = null;\n    return [msg1, msg2, msg3];\n}else {return msg;}",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1550,
        "y": 620,
        "wires": [
            [
                "b238e7e06b0e188b"
            ],
            [
                "b238e7e06b0e188b"
            ],
            [
                "b238e7e06b0e188b"
            ]
        ]
    },
    {
        "id": "91eefba7a4f0d452",
        "type": "change",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "Temperatura",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.temperatura",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1250,
        "y": 460,
        "wires": [
            [
                "dce7eac07dc32b17",
                "ab6c8a8815fd51b8",
                "54c11767c002873f"
            ]
        ]
    },
    {
        "id": "fee945a41a9eecb2",
        "type": "link out",
        "z": "7a2a228bff5f9b1b",
        "g": "34554487634f6a45",
        "name": "Salida_json_tarea_4",
        "mode": "link",
        "links": [
            "851d52f94e9f7558",
            "d1b6cec415033237",
            "cb6a1b1593dc14b4"
        ],
        "x": 1805,
        "y": 120,
        "wires": []
    },
    {
        "id": "d1b6cec415033237",
        "type": "link in",
        "z": "7a2a228bff5f9b1b",
        "g": "db1bd864885aa917",
        "name": "link in 1",
        "links": [
            "fee945a41a9eecb2"
        ],
        "x": 1115,
        "y": 260,
        "wires": [
            [
                "ea496d37ceabf649"
            ]
        ]
    },
    {
        "id": "851d52f94e9f7558",
        "type": "link in",
        "z": "7a2a228bff5f9b1b",
        "g": "38bcaac5dd6d8ec9",
        "name": "link in 2",
        "links": [
            "fee945a41a9eecb2"
        ],
        "x": 1115,
        "y": 460,
        "wires": [
            [
                "91eefba7a4f0d452"
            ]
        ]
    },
    {
        "id": "798d321a5f3e32b9",
        "type": "change",
        "z": "7a2a228bff5f9b1b",
        "g": "f7bbbf759c1035c6",
        "name": "Humedad",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.sensacion_termica",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1240,
        "y": 360,
        "wires": [
            [
                "ad58e3efea64f3b2"
            ]
        ]
    },
    {
        "id": "cb6a1b1593dc14b4",
        "type": "link in",
        "z": "7a2a228bff5f9b1b",
        "g": "f7bbbf759c1035c6",
        "name": "link in 3",
        "links": [
            "fee945a41a9eecb2"
        ],
        "x": 1115,
        "y": 360,
        "wires": [
            [
                "798d321a5f3e32b9"
            ]
        ]
    },
    {
        "id": "ad58e3efea64f3b2",
        "type": "change",
        "z": "7a2a228bff5f9b1b",
        "g": "f7bbbf759c1035c6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "sensacion_termica",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 360,
        "wires": [
            [
                "081e229272675cc3"
            ]
        ]
    },
    {
        "id": "081e229272675cc3",
        "type": "ui_gauge",
        "z": "7a2a228bff5f9b1b",
        "g": "f7bbbf759c1035c6",
        "name": "",
        "group": "e968a1c70a34a463",
        "order": 4,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Sensación térmica",
        "label": "ºC",
        "format": "{{value | number:1}}",
        "min": "-5",
        "max": "50",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1730,
        "y": 360,
        "wires": []
    },
    {
        "id": "16521c764bb85856",
        "type": "debug",
        "z": "7a2a228bff5f9b1b",
        "g": "34554487634f6a45",
        "name": "debug 2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1740,
        "y": 160,
        "wires": []
    },
    {
        "id": "7a9e114d8c8121d4",
        "type": "mqtt in",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "name": "",
        "topic": "iot/datos/json",
        "qos": "2",
        "datatype": "auto",
        "broker": "6ac432b491b7d6fc",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "d2b5378f006dcf82"
            ]
        ]
    },
    {
        "id": "d2b5378f006dcf82",
        "type": "json",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 80,
        "wires": [
            [
                "69f48efb3ed2e9a2"
            ]
        ]
    },
    {
        "id": "fb7010822d6bb986",
        "type": "debug",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 690,
        "y": 180,
        "wires": []
    },
    {
        "id": "20f183d859f029d5",
        "type": "mongodb out",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "mongodb": "ca0dd972168dc6a0",
        "name": "",
        "collection": "datos",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 750,
        "y": 100,
        "wires": []
    },
    {
        "id": "9300db5867473dfb",
        "type": "mongodb in",
        "z": "28aa48179e689485",
        "g": "a30b6d8ea68c3596",
        "mongodb": "05cea6759e795a87",
        "name": "",
        "collection": "datos",
        "operation": "find",
        "x": 540,
        "y": 1040,
        "wires": [
            [
                "8a9296b558c17ba2"
            ]
        ]
    },
    {
        "id": "49012e8e0c0c4162",
        "type": "inject",
        "z": "28aa48179e689485",
        "g": "a30b6d8ea68c3596",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "{ }",
                "vt": "json"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{ }",
        "payloadType": "json",
        "x": 126.99993896484375,
        "y": 1040.3665533065796,
        "wires": [
            [
                "9300db5867473dfb"
            ]
        ]
    },
    {
        "id": "8a9296b558c17ba2",
        "type": "debug",
        "z": "28aa48179e689485",
        "g": "a30b6d8ea68c3596",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1050,
        "y": 1040,
        "wires": []
    },
    {
        "id": "69f48efb3ed2e9a2",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "name": "+ fecha",
        "func": "msg.payload.date = new Date();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 480,
        "y": 140,
        "wires": [
            [
                "20f183d859f029d5",
                "b8690d1e7db83076",
                "fb7010822d6bb986"
            ]
        ]
    },
    {
        "id": "172ddd8b54e52f43",
        "type": "inject",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"date\":\"2022-10-17T17:56:58.583Z\"}",
        "payloadType": "json",
        "x": 130,
        "y": 1220,
        "wires": [
            [
                "d02f577c31b6e6b5"
            ]
        ]
    },
    {
        "id": "d02f577c31b6e6b5",
        "type": "mongodb out",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "mongodb": "ca0dd972168dc6a0",
        "name": "",
        "collection": "datos_json",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 440,
        "y": 1220,
        "wires": []
    },
    {
        "id": "528f18345fc130c7",
        "type": "comment",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "name": "borrar una coleccion",
        "info": "inyectar un JSON vacío: {}\nseleccionar \"remove\" en la configuración del nodo mongoDB ",
        "x": 150,
        "y": 1160,
        "wires": []
    },
    {
        "id": "114f6ff116a2d363",
        "type": "comment",
        "z": "28aa48179e689485",
        "g": "a30b6d8ea68c3596",
        "name": "consultar una coleccion",
        "info": "",
        "x": 160,
        "y": 980,
        "wires": []
    },
    {
        "id": "17422dfaf138a6cf",
        "type": "template",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "name": "lista en formato html",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": " <h1>Registros: </h1>\n <ul>\n{{#payload}}\n  <li>{{date}} : {{BME280.Temperatura }}ºC, {{BME280.Humedad}}% </li>\n{{/payload}}\n </ul>",
        "output": "str",
        "x": 900,
        "y": 440,
        "wires": [
            [
                "829d2c2fd7369339"
            ]
        ]
    },
    {
        "id": "829d2c2fd7369339",
        "type": "ui_template",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "group": "f4f4dc208bbef1ee",
        "name": "",
        "order": 3,
        "width": "6",
        "height": "4",
        "format": "<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "4f6a219dd5ca56ba",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "name": "",
        "func": "var limite = flow.get(\"parametro\");;\nmsg.payload = {};\nmsg.limit = limite;\nmsg.sort = {\"date\" : -1};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 460,
        "wires": [
            [
                "19370125730d77e6"
            ]
        ]
    },
    {
        "id": "02cdbb45bab265bf",
        "type": "ui_chart",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "name": "",
        "group": "f4f4dc208bbef1ee",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "chart",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1090,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "f7da87dfd1caafa7",
        "type": "mongodb in",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "mongodb": "ca0dd972168dc6a0",
        "name": "",
        "collection": "datos_json",
        "operation": "find",
        "x": 780,
        "y": 1280,
        "wires": [
            [
                "0197b0cdd2bf835e"
            ]
        ]
    },
    {
        "id": "fd7da9f49098fa93",
        "type": "inject",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"ADC.Iluminacion\":10}",
        "payloadType": "json",
        "x": 180,
        "y": 1280,
        "wires": [
            [
                "f7da87dfd1caafa7",
                "d02f577c31b6e6b5"
            ]
        ]
    },
    {
        "id": "0197b0cdd2bf835e",
        "type": "debug",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1050,
        "y": 1280,
        "wires": []
    },
    {
        "id": "51044b70f943ab88",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "name": "",
        "func": "msg.payload={\"date\": new Date(\"2022-10-17T17:57:28.587Z\")}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 1340,
        "wires": [
            [
                "f7da87dfd1caafa7"
            ]
        ]
    },
    {
        "id": "b227d0a39833605f",
        "type": "inject",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 1340,
        "wires": [
            [
                "51044b70f943ab88"
            ]
        ]
    },
    {
        "id": "1ed97e83a3aa7230",
        "type": "inject",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"conexion.SSID\": \"MASTER\"}",
        "payloadType": "json",
        "x": 330,
        "y": 1160,
        "wires": [
            [
                "f7da87dfd1caafa7",
                "d02f577c31b6e6b5"
            ]
        ]
    },
    {
        "id": "f74ae1123d309d8a",
        "type": "mongodb out",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "mongodb": "05cea6759e795a87",
        "name": "",
        "collection": "datos",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 340,
        "y": 1400,
        "wires": []
    },
    {
        "id": "c4c5fe67cd7f756f",
        "type": "inject",
        "z": "28aa48179e689485",
        "g": "f4f56cd0159288c3",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 130,
        "y": 1400,
        "wires": [
            [
                "f74ae1123d309d8a"
            ]
        ]
    },
    {
        "id": "b8690d1e7db83076",
        "type": "mongodb out",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "mongodb": "05cea6759e795a87",
        "name": "",
        "collection": "datos",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 720,
        "y": 140,
        "wires": []
    },
    {
        "id": "4ce5c24181a90fad",
        "type": "mongodb in",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "mongodb": "05cea6759e795a87",
        "name": "",
        "collection": "datos",
        "operation": "find",
        "x": 700,
        "y": 240,
        "wires": [
            [
                "1bacd1ab2f89ae19"
            ]
        ]
    },
    {
        "id": "1bacd1ab2f89ae19",
        "type": "debug",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1050,
        "y": 240,
        "wires": []
    },
    {
        "id": "0367f9847eafdfc5",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "name": "Get values sorted and limited",
        "func": "msg.payload = {};\nmsg.topic = \"\";\nmsg.sort = {\"date\":-1};\nmsg.limit = 10;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 240,
        "wires": [
            [
                "4ce5c24181a90fad"
            ]
        ]
    },
    {
        "id": "500b07cc64c12311",
        "type": "complete",
        "z": "28aa48179e689485",
        "g": "270307f35f30c014",
        "name": "",
        "scope": [
            "69f48efb3ed2e9a2"
        ],
        "uncaught": false,
        "x": 130,
        "y": 240,
        "wires": [
            [
                "0367f9847eafdfc5"
            ]
        ]
    },
    {
        "id": "99846e687134cd5a",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "94dc048a9c84b452",
        "name": "Get values sorted and limited",
        "func": "msg.payload = {};\nmsg.topic = \"\";\nmsg.sort = {\"date\":-1};\nmsg.limit = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 340,
        "wires": [
            [
                "ab56ca8423144561"
            ]
        ]
    },
    {
        "id": "52847e1fef43b5bd",
        "type": "complete",
        "z": "28aa48179e689485",
        "g": "94dc048a9c84b452",
        "name": "",
        "scope": [
            "69f48efb3ed2e9a2"
        ],
        "uncaught": false,
        "x": 130,
        "y": 340,
        "wires": [
            [
                "99846e687134cd5a"
            ]
        ]
    },
    {
        "id": "ab56ca8423144561",
        "type": "mongodb in",
        "z": "28aa48179e689485",
        "g": "94dc048a9c84b452",
        "mongodb": "05cea6759e795a87",
        "name": "",
        "collection": "datos",
        "operation": "find",
        "x": 700,
        "y": 340,
        "wires": [
            [
                "9d954e9055d207a2"
            ]
        ]
    },
    {
        "id": "193b2ad82d31cde9",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 160,
        "wires": [
            [
                "576b46f9bf7b3dc9"
            ]
        ]
    },
    {
        "id": "2537281fa85022da",
        "type": "ui_led",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "order": 3,
        "group": "2888ca9d00385ef8",
        "width": "4",
        "height": "1",
        "label": "LED",
        "labelPlacement": "left",
        "labelAlignment": "center",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "1",
                "valueType": "num"
            },
            {
                "color": "#9a9996",
                "value": "0",
                "valueType": "num"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 1930,
        "y": 120,
        "wires": []
    },
    {
        "id": "5a4733eb5ef27176",
        "type": "ui_led",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "order": 3,
        "group": "f8b2658284e752dc",
        "width": "4",
        "height": "1",
        "label": "LED ",
        "labelPlacement": "left",
        "labelAlignment": "center",
        "colorForValue": [
            {
                "color": "#33d17a",
                "value": "1",
                "valueType": "num"
            },
            {
                "color": "#9a9996",
                "value": "0",
                "valueType": "num"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 1930,
        "y": 260,
        "wires": []
    },
    {
        "id": "576b46f9bf7b3dc9",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "group": "2888ca9d00385ef8",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Última actualización",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1880,
        "y": 160,
        "wires": []
    },
    {
        "id": "03d7f8316e1a7dc6",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "group": "f8b2658284e752dc",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Última actualización",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "<style>     #nr-dashboard-cardtitle{text-align: center !important;} </style>",
        "x": 1880,
        "y": 300,
        "wires": []
    },
    {
        "id": "5712e76a228cfe7a",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 300,
        "wires": [
            [
                "03d7f8316e1a7dc6"
            ]
        ]
    },
    {
        "id": "0939b7cf254f9201",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "group": "f8b2658284e752dc",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Estado:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1920,
        "y": 220,
        "wires": []
    },
    {
        "id": "756bf8bfeb8c8ad7",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "name": "",
        "func": "switch (msg.payload) {\n    case 0:\n        msg.payload = \"Apagado\";\n        break;\n    default:\n        msg.payload = \"Encendido\";\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 220,
        "wires": [
            [
                "0939b7cf254f9201"
            ]
        ]
    },
    {
        "id": "aeb8f26f50a869d4",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "name": "",
        "func": "switch (msg.payload) {\n    case 0:\n        msg.payload = \"Apagado\";\n        break;\n    default:\n        msg.payload = \"Encendido\";\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1620,
        "y": 80,
        "wires": [
            [
                "c63a62bea32075c0"
            ]
        ]
    },
    {
        "id": "c63a62bea32075c0",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "group": "2888ca9d00385ef8",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Estado:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1920,
        "y": 80,
        "wires": []
    },
    {
        "id": "8cc0b21df1f6d4ab",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "name": "Estado LED Rojo",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.LEDs.Rojo",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1430,
        "y": 120,
        "wires": [
            [
                "aeb8f26f50a869d4",
                "2537281fa85022da",
                "193b2ad82d31cde9"
            ]
        ]
    },
    {
        "id": "24946e4f8282e5f7",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "name": "Estado LED verde",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.LEDs.Verde",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1430,
        "y": 260,
        "wires": [
            [
                "756bf8bfeb8c8ad7",
                "5a4733eb5ef27176",
                "5712e76a228cfe7a"
            ]
        ]
    },
    {
        "id": "558bd8ac2c467f45",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "269f5e74b8681382",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "humedad",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1650,
        "y": 560,
        "wires": [
            [
                "22f99c7c67673279"
            ]
        ]
    },
    {
        "id": "22f99c7c67673279",
        "type": "ui_gauge",
        "z": "28aa48179e689485",
        "g": "269f5e74b8681382",
        "name": "",
        "group": "c271ce14649409b0",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "wave",
        "title": "Humedad",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1920,
        "y": 560,
        "wires": []
    },
    {
        "id": "c66117b1fdd806d5",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "269f5e74b8681382",
        "name": "Humedad",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Humedad",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 560,
        "wires": [
            [
                "558bd8ac2c467f45"
            ]
        ]
    },
    {
        "id": "5f5b2b757ccdda37",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "7e2b19e2a3ad35a1",
        "name": "",
        "func": "msg.topic = \"temperatura\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1680,
        "y": 660,
        "wires": [
            [
                "3f11effdfade3c0c"
            ]
        ]
    },
    {
        "id": "ad01a0fa20fbc900",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "7e2b19e2a3ad35a1",
        "group": "4f2fd049c27a14a1",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Última actualización",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1880,
        "y": 700,
        "wires": []
    },
    {
        "id": "88114b10592f2e86",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "7e2b19e2a3ad35a1",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1680,
        "y": 700,
        "wires": [
            [
                "ad01a0fa20fbc900"
            ]
        ]
    },
    {
        "id": "3f11effdfade3c0c",
        "type": "ui_gauge",
        "z": "28aa48179e689485",
        "g": "7e2b19e2a3ad35a1",
        "name": "",
        "group": "4f2fd049c27a14a1",
        "order": 4,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Temperatura",
        "label": "ºC",
        "format": "{{value}}",
        "min": "-5",
        "max": "50",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1910,
        "y": 660,
        "wires": []
    },
    {
        "id": "51934c2c7309041d",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "7e2b19e2a3ad35a1",
        "name": "Temperatura",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Temperatura",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 660,
        "wires": [
            [
                "5f5b2b757ccdda37",
                "88114b10592f2e86"
            ]
        ]
    },
    {
        "id": "3d232f5c78646eeb",
        "type": "smooth",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "",
        "property": "payload",
        "action": "max",
        "count": "100",
        "round": "",
        "mult": "single",
        "reduce": false,
        "x": 1580,
        "y": 860,
        "wires": [
            [
                "80fd1401dc086ae4"
            ]
        ]
    },
    {
        "id": "c708a584301c36f4",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "group": "cbfbdc48914b032d",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Tiempo de funcionamiento",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1990,
        "y": 1160,
        "wires": []
    },
    {
        "id": "13aefb2b905034c9",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "uptime_ms",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.uptime_ms",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "uptime_ms",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 1160,
        "wires": [
            [
                "a07ee75e7d5f20f0"
            ]
        ]
    },
    {
        "id": "112be335581efa50",
        "type": "smooth",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "",
        "property": "payload",
        "action": "min",
        "count": "100",
        "round": "",
        "mult": "single",
        "reduce": false,
        "x": 1580,
        "y": 920,
        "wires": [
            [
                "6563cadf1c8c1760"
            ]
        ]
    },
    {
        "id": "6563cadf1c8c1760",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "group": "cbfbdc48914b032d",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": " RSSI mínimo",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2040,
        "y": 920,
        "wires": []
    },
    {
        "id": "80fd1401dc086ae4",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "group": "cbfbdc48914b032d",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": " RSSI máximo",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2040,
        "y": 860,
        "wires": []
    },
    {
        "id": "a07ee75e7d5f20f0",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "",
        "func": "var ms = msg.payload;\nconst days = Math.floor(ms / (24 * 60 * 60 * 1000));\nconst daysms = ms % (24 * 60 * 60 * 1000);\nconst hours = Math.floor(daysms / (60 * 60 * 1000));\nconst hoursms = ms % (60 * 60 * 1000);\nconst minutes = Math.floor(hoursms / (60 * 1000));\nconst minutesms = ms % (60 * 1000);\nmsg.payload = {};\nmsg.payload = days + \" días \" + hours + \"h \" + minutes + \"m \";\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 1160,
        "wires": [
            [
                "c708a584301c36f4"
            ]
        ]
    },
    {
        "id": "b0fb94e808835f10",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "group": "cbfbdc48914b032d",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "interval_s",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2040,
        "y": 1220,
        "wires": []
    },
    {
        "id": "633cb12bf37eb606",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "RSSI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.RSSI",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "RSSI",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 980,
        "wires": [
            [
                "ccde711847fac60b"
            ]
        ]
    },
    {
        "id": "5cbd8e343cf35e46",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "group": "cbfbdc48914b032d",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "SSID",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2070,
        "y": 800,
        "wires": []
    },
    {
        "id": "ccde711847fac60b",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "group": "cbfbdc48914b032d",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "RSSI",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2070,
        "y": 980,
        "wires": []
    },
    {
        "id": "8f9b1df76a93695a",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "localIP",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.localIP",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "localIP",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 1040,
        "wires": [
            [
                "215156ba0deebab0"
            ]
        ]
    },
    {
        "id": "215156ba0deebab0",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "group": "cbfbdc48914b032d",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "localIP",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2060,
        "y": 1040,
        "wires": []
    },
    {
        "id": "5608320c39684fc9",
        "type": "ui_text",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "group": "cbfbdc48914b032d",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "macAddress",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 2050,
        "y": 1100,
        "wires": []
    },
    {
        "id": "f0e451d92dfe2699",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "SSID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.SSID",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SSID",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 800,
        "wires": [
            [
                "5cbd8e343cf35e46"
            ]
        ]
    },
    {
        "id": "83e64e0e3037e7b4",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "macAddress",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.macAddress",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "macAddress",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 1100,
        "wires": [
            [
                "5608320c39684fc9"
            ]
        ]
    },
    {
        "id": "591fd6a7f4ff20fe",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "interval_s",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.interval_s",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "interval_s",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1410,
        "y": 1220,
        "wires": [
            [
                "b0fb94e808835f10"
            ]
        ]
    },
    {
        "id": "27c65d3061597a5b",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "RSSI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.RSSI",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "RSSI",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 920,
        "wires": [
            [
                "112be335581efa50"
            ]
        ]
    },
    {
        "id": "e6ab46d16363d6d6",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "RSSI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.RSSI",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "RSSI",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 860,
        "wires": [
            [
                "3d232f5c78646eeb"
            ]
        ]
    },
    {
        "id": "e07bdbea1aa218e5",
        "type": "link out",
        "z": "28aa48179e689485",
        "g": "94dc048a9c84b452",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "f8c3f925ec0fdb14",
            "b7ae2bc76235434b",
            "b363bc167b4d635d",
            "4af9e17c13f8e617",
            "b4bb0517cd553e43",
            "c146bf7d408652f7",
            "94865c6d6da736c9",
            "fe3a7ce2e30a7e42",
            "48cee4fc7ec5b74f",
            "182f17adb09b093c",
            "0fcdb51ee77c6f78",
            "c5e0f9ac5116754d",
            "39bae5fbe759d48c"
        ],
        "x": 1125,
        "y": 340,
        "wires": []
    },
    {
        "id": "f8c3f925ec0fdb14",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "link in 4",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1265,
        "y": 800,
        "wires": [
            [
                "f0e451d92dfe2699"
            ]
        ]
    },
    {
        "id": "b7ae2bc76235434b",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "link in 5",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1265,
        "y": 860,
        "wires": [
            [
                "e6ab46d16363d6d6"
            ]
        ]
    },
    {
        "id": "b4bb0517cd553e43",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "link in 7",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1265,
        "y": 980,
        "wires": [
            [
                "633cb12bf37eb606"
            ]
        ]
    },
    {
        "id": "b363bc167b4d635d",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "link in 6",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1265,
        "y": 920,
        "wires": [
            [
                "27c65d3061597a5b"
            ]
        ]
    },
    {
        "id": "4af9e17c13f8e617",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "link in 8",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1265,
        "y": 1040,
        "wires": [
            [
                "8f9b1df76a93695a"
            ]
        ]
    },
    {
        "id": "c146bf7d408652f7",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "link in 9",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1265,
        "y": 1100,
        "wires": [
            [
                "83e64e0e3037e7b4"
            ]
        ]
    },
    {
        "id": "94865c6d6da736c9",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "link in 10",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1265,
        "y": 1160,
        "wires": [
            [
                "13aefb2b905034c9"
            ]
        ]
    },
    {
        "id": "fe3a7ce2e30a7e42",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "e308511d7b132ac8",
        "name": "link in 11",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1265,
        "y": 1220,
        "wires": [
            [
                "591fd6a7f4ff20fe"
            ]
        ]
    },
    {
        "id": "9d954e9055d207a2",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "94dc048a9c84b452",
        "name": "Array to JSON",
        "func": "msg.payload = msg.payload[0];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 340,
        "wires": [
            [
                "e07bdbea1aa218e5"
            ]
        ]
    },
    {
        "id": "d28a91f32dac6fe3",
        "type": "ui_chart",
        "z": "28aa48179e689485",
        "g": "531ca8b2fcf5e560",
        "name": "",
        "group": "98ee1182cc353ad6",
        "order": 2,
        "width": "0",
        "height": "0",
        "label": "Presión (mbar)",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1900,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "5b9b37b255a61e4a",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "531ca8b2fcf5e560",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Presión",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1630,
        "y": 400,
        "wires": [
            [
                "d28a91f32dac6fe3"
            ]
        ]
    },
    {
        "id": "0b56f1b4e827a08b",
        "type": "inject",
        "z": "28aa48179e689485",
        "g": "531ca8b2fcf5e560",
        "name": "Reset chart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 1630,
        "y": 460,
        "wires": [
            [
                "d28a91f32dac6fe3"
            ]
        ]
    },
    {
        "id": "e7e97ddcfa05ad37",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "531ca8b2fcf5e560",
        "name": "Presión",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Presion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 400,
        "wires": [
            [
                "5b9b37b255a61e4a"
            ]
        ]
    },
    {
        "id": "48cee4fc7ec5b74f",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "name": "link in 12",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1275,
        "y": 120,
        "wires": [
            [
                "8cc0b21df1f6d4ab"
            ]
        ]
    },
    {
        "id": "182f17adb09b093c",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "034ae3c7d299bca8",
        "name": "link in 13",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1275,
        "y": 260,
        "wires": [
            [
                "24946e4f8282e5f7"
            ]
        ]
    },
    {
        "id": "0fcdb51ee77c6f78",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "531ca8b2fcf5e560",
        "name": "link in 14",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1275,
        "y": 400,
        "wires": [
            [
                "e7e97ddcfa05ad37"
            ]
        ]
    },
    {
        "id": "c5e0f9ac5116754d",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "269f5e74b8681382",
        "name": "link in 15",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1275,
        "y": 560,
        "wires": [
            [
                "c66117b1fdd806d5"
            ]
        ]
    },
    {
        "id": "39bae5fbe759d48c",
        "type": "link in",
        "z": "28aa48179e689485",
        "g": "7e2b19e2a3ad35a1",
        "name": "link in 16",
        "links": [
            "e07bdbea1aa218e5"
        ],
        "x": 1285,
        "y": 660,
        "wires": [
            [
                "51934c2c7309041d"
            ]
        ]
    },
    {
        "id": "19370125730d77e6",
        "type": "mongodb in",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "mongodb": "05cea6759e795a87",
        "name": "",
        "collection": "datos",
        "operation": "find",
        "x": 500,
        "y": 460,
        "wires": [
            [
                "53f223c7e2ad0ea1",
                "161d832346e40b1d"
            ]
        ]
    },
    {
        "id": "53f223c7e2ad0ea1",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "name": "genera datos gráfica",
        "func": "var arraytemp=[];\nvar arrayhum=[];\n\n// los arrays usados en la represenstación gráfica deben contener objetos JSON con dos campos: {x , y}\n// en x debemos poner la hora en formato \"timestamp\". Si tenemos un objeto fecha se puede convertir usando el método getTime()\n// en y debemos poner el valor de la variable\n// mas info en: https://github.com/node-red/node-red-dashboard/blob/master/Charts.md\n\nif (Array.isArray(msg.payload) && msg.payload.length > 0 && msg.payload.length <= flow.get(\"parametro\"))\n{\n    for (var i = 0; i < msg.payload.length; i++) { // añade datos a los arrays\n        arraytemp.push({x : msg.payload[i].date.getTime() , y : msg.payload[i].BME280.Temperatura});\n        arrayhum.push({x : msg.payload[i].date.getTime() , y : msg.payload[i].BME280.Humedad});\n    }\n    msg.payload = [{\n        \"series\": [\"Temperatura\", \"Humedad\"],\n        \"data\": [arraytemp, arrayhum],\n        \"labels\": [\"\"]\n    }];\n} else {\n    msg.payload = [];\n}\n\nreturn msg;  ",
        "outputs": "1",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 480,
        "wires": [
            [
                "02cdbb45bab265bf"
            ]
        ]
    },
    {
        "id": "03c3979010c41f33",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "parametro",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "e0b1c6c5c2a41a05",
        "type": "ui_slider",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "name": "",
        "label": "slider",
        "tooltip": "",
        "group": "f4f4dc208bbef1ee",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 110,
        "y": 540,
        "wires": [
            [
                "03c3979010c41f33"
            ]
        ]
    },
    {
        "id": "7da74ad0c2ce8991",
        "type": "complete",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "name": "",
        "scope": [
            "03c3979010c41f33"
        ],
        "uncaught": false,
        "x": 130,
        "y": 460,
        "wires": [
            [
                "4f6a219dd5ca56ba"
            ]
        ]
    },
    {
        "id": "161d832346e40b1d",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "61af492eb62b5b4d",
        "name": "function 2",
        "func": "if(flow.get(\"parametro\") == 0){\n    msg.payload = [];\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 440,
        "wires": [
            [
                "17422dfaf138a6cf"
            ]
        ]
    },
    {
        "id": "9b25c5b420c7f72b",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "c867ac9e3fdd1cbf",
        "name": "function 3",
        "func": "var limite = global.get(\"user_input\");\nmsg.payload = { \"BME280.Temperatura\": { \"$gte\": limite } }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 640,
        "wires": [
            [
                "fc0178895a1aee94"
            ]
        ]
    },
    {
        "id": "e4718518fcf97c09",
        "type": "ui_button",
        "z": "28aa48179e689485",
        "g": "c867ac9e3fdd1cbf",
        "name": "",
        "group": "9eaa5333ae7be1f9",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Actualizar gráfica",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 150,
        "y": 640,
        "wires": [
            [
                "9b25c5b420c7f72b"
            ]
        ]
    },
    {
        "id": "fc0178895a1aee94",
        "type": "mongodb in",
        "z": "28aa48179e689485",
        "g": "c867ac9e3fdd1cbf",
        "mongodb": "05cea6759e795a87",
        "name": "",
        "collection": "datos",
        "operation": "find",
        "x": 600,
        "y": 640,
        "wires": [
            [
                "e64b3085.9a525"
            ]
        ]
    },
    {
        "id": "1d35200c560c9797",
        "type": "ui_chart",
        "z": "28aa48179e689485",
        "g": "c867ac9e3fdd1cbf",
        "name": "",
        "group": "9eaa5333ae7be1f9",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "chart",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1090,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "4ee2c7c576ce35a4",
        "type": "ui_numeric",
        "z": "28aa48179e689485",
        "g": "c867ac9e3fdd1cbf",
        "name": "",
        "label": "user_input",
        "tooltip": "",
        "group": "9eaa5333ae7be1f9",
        "order": 4,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "format": "{{value}}",
        "min": 0,
        "max": "50",
        "step": 1,
        "className": "",
        "x": 130,
        "y": 720,
        "wires": [
            [
                "f7a3c063082b6b48"
            ]
        ]
    },
    {
        "id": "f7a3c063082b6b48",
        "type": "change",
        "z": "28aa48179e689485",
        "g": "c867ac9e3fdd1cbf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "user_input",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "e64b3085.9a525",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "c867ac9e3fdd1cbf",
        "name": "genera datos gráfica",
        "func": "var arraytemp=[];\nvar arrayhum=[];\n\n// los arrays usados en la represenstación gráfica deben contener objetos JSON con dos campos: {x , y}\n// en x debemos poner la hora en formato \"timestamp\". Si tenemos un objeto fecha se puede convertir usando el método getTime()\n// en y debemos poner el valor de la variable\n// mas info en: https://github.com/node-red/node-red-dashboard/blob/master/Charts.md\n\nif(Array.isArray(msg.payload) && msg.payload.length>0)\n{\n    for (var i = 0; i < msg.payload.length; i++) { // añade datos a los arrays\n        arraytemp.push({x : msg.payload[i].date.getTime() , y : msg.payload[i].BME280.Temperatura});\n        arrayhum.push({x : msg.payload[i].date.getTime() , y : msg.payload[i].BME280.Humedad});\n    }\n}\n    \nmsg.payload = [{\n        \"series\":[\"Temperatura\",\"Humedad\"],\n        \"data\":[arraytemp, arrayhum],\n        \"labels\":[\"\"]\n        }];\n\nreturn msg;  ",
        "outputs": "1",
        "noerr": 0,
        "x": 880,
        "y": 640,
        "wires": [
            [
                "1d35200c560c9797"
            ]
        ]
    },
    {
        "id": "6f2385b31ff14630",
        "type": "function",
        "z": "28aa48179e689485",
        "g": "3794648bb169b272",
        "name": "function 4",
        "func": "var ms_per_minute = 60000;\n//obtiene el timestamp actual\nvar now_ms = new Date().getTime();\n// crear el objeto fecha con la hora de hace 5 minutos\nvar fiveminsago = new Date(now_ms-5*ms_per_minute);\nvar fiveteenminsago = new Date(now_ms - 15 * ms_per_minute);\n\n//Seleccionar con fecha posterior o igual a hacer 5 minutos\nmsg.payload = {$and: [{ \"date\": {\"$gte\": fiveteenminsago}}, {\"date\": { \"$lte\": fiveminsago }}]};\nmsg.sort= {\"date\":1};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 820,
        "wires": [
            [
                "1618cce562a50646"
            ]
        ]
    },
    {
        "id": "37e97867580b33fe",
        "type": "template",
        "z": "28aa48179e689485",
        "g": "3794648bb169b272",
        "name": "lista en formato html",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": " <h1>Registros: </h1>\n <ul>\n{{#payload}}\n  <li>{{date}} : {{BME280.Temperatura }}ºC, {{BME280.Humedad}}% </li>\n{{/payload}}\n </ul>",
        "output": "str",
        "x": 880,
        "y": 820,
        "wires": [
            [
                "c8914d0a9113990b"
            ]
        ]
    },
    {
        "id": "c8914d0a9113990b",
        "type": "ui_template",
        "z": "28aa48179e689485",
        "g": "3794648bb169b272",
        "group": "24a2032a9df17ba3",
        "name": "",
        "order": 3,
        "width": "6",
        "height": "4",
        "format": "<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "e91db7f6e967d630",
        "type": "complete",
        "z": "28aa48179e689485",
        "g": "3794648bb169b272",
        "name": "",
        "scope": [
            "69f48efb3ed2e9a2"
        ],
        "uncaught": false,
        "x": 130,
        "y": 820,
        "wires": [
            [
                "6f2385b31ff14630"
            ]
        ]
    },
    {
        "id": "63fa2691c2ed03b2",
        "type": "debug",
        "z": "28aa48179e689485",
        "g": "3794648bb169b272",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 880,
        "wires": []
    },
    {
        "id": "1618cce562a50646",
        "type": "mongodb in",
        "z": "28aa48179e689485",
        "g": "3794648bb169b272",
        "mongodb": "05cea6759e795a87",
        "name": "",
        "collection": "datos",
        "operation": "find",
        "x": 600,
        "y": 820,
        "wires": [
            [
                "37e97867580b33fe",
                "63fa2691c2ed03b2"
            ]
        ]
    },
    {
        "id": "3a99781e6031d629",
        "type": "mqtt in",
        "z": "240e9138468e39f6",
        "g": "c6c2603753194b13",
        "name": "",
        "topic": "iot/datos/json",
        "qos": "2",
        "datatype": "auto",
        "broker": "c8b2b5778aed34b0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 160,
        "wires": [
            [
                "99d0ec64faab4b94"
            ]
        ]
    },
    {
        "id": "cba4a38d7900d885",
        "type": "debug",
        "z": "240e9138468e39f6",
        "g": "c6c2603753194b13",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 470,
        "y": 120,
        "wires": []
    },
    {
        "id": "99d0ec64faab4b94",
        "type": "json",
        "z": "240e9138468e39f6",
        "g": "c6c2603753194b13",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 160,
        "wires": [
            [
                "cba4a38d7900d885",
                "99fb9b16b1629eea",
                "910905f51ec3c273"
            ]
        ]
    },
    {
        "id": "99fb9b16b1629eea",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "c6c2603753194b13",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Temperatura",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 160,
        "wires": [
            [
                "6457892a3e672cbe"
            ]
        ]
    },
    {
        "id": "6457892a3e672cbe",
        "type": "debug",
        "z": "240e9138468e39f6",
        "g": "c6c2603753194b13",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 160,
        "wires": []
    },
    {
        "id": "910905f51ec3c273",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "c6c2603753194b13",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.uptime_ms",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 200,
        "wires": [
            [
                "d42036ba593c80c1"
            ]
        ]
    },
    {
        "id": "d42036ba593c80c1",
        "type": "debug",
        "z": "240e9138468e39f6",
        "g": "c6c2603753194b13",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 200,
        "wires": []
    },
    {
        "id": "1c6e5895e3998ee3",
        "type": "comment",
        "z": "240e9138468e39f6",
        "g": "c6c2603753194b13",
        "name": "Como trabajar con JSON - Ejemplo de la clase",
        "info": "",
        "x": 730,
        "y": 60,
        "wires": []
    },
    {
        "id": "debd5c63615fff3e",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 140,
        "wires": [
            [
                "8f17387ff474ec87"
            ]
        ]
    },
    {
        "id": "c2b551405535b0b2",
        "type": "ui_chart",
        "z": "240e9138468e39f6",
        "g": "ef3d086a30a1b87a",
        "name": "",
        "group": "386ddfb962d0c80d",
        "order": 2,
        "width": "0",
        "height": "0",
        "label": "Presión (mbar)",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1780,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "5983285fa86d9906",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "ef3d086a30a1b87a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Presión",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1510,
        "y": 380,
        "wires": [
            [
                "c2b551405535b0b2"
            ]
        ]
    },
    {
        "id": "93ce455ec89f564f",
        "type": "inject",
        "z": "240e9138468e39f6",
        "g": "ef3d086a30a1b87a",
        "name": "Reset chart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 1510,
        "y": 440,
        "wires": [
            [
                "c2b551405535b0b2"
            ]
        ]
    },
    {
        "id": "bed29fa72c8f9e99",
        "type": "ui_led",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "order": 3,
        "group": "6d8ffaa69a25c68f",
        "width": "4",
        "height": "1",
        "label": "LED",
        "labelPlacement": "left",
        "labelAlignment": "center",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "1",
                "valueType": "num"
            },
            {
                "color": "#9a9996",
                "value": "0",
                "valueType": "num"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 1810,
        "y": 100,
        "wires": []
    },
    {
        "id": "1eb41ef80e3d5aa2",
        "type": "ui_led",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "order": 3,
        "group": "e8ccf6ad47502312",
        "width": "4",
        "height": "1",
        "label": "LED ",
        "labelPlacement": "left",
        "labelAlignment": "center",
        "colorForValue": [
            {
                "color": "#33d17a",
                "value": "1",
                "valueType": "num"
            },
            {
                "color": "#9a9996",
                "value": "0",
                "valueType": "num"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 1810,
        "y": 240,
        "wires": []
    },
    {
        "id": "8f17387ff474ec87",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "group": "6d8ffaa69a25c68f",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Última actualización",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1760,
        "y": 140,
        "wires": []
    },
    {
        "id": "c9b93ff37480c0f9",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "group": "e8ccf6ad47502312",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Última actualización",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "<style>     #nr-dashboard-cardtitle{text-align: center !important;} </style>",
        "x": 1760,
        "y": 280,
        "wires": []
    },
    {
        "id": "18c7c585c8eb32ef",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 280,
        "wires": [
            [
                "c9b93ff37480c0f9"
            ]
        ]
    },
    {
        "id": "a040bbf0062ac342",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "group": "e8ccf6ad47502312",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Estado:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1800,
        "y": 200,
        "wires": []
    },
    {
        "id": "cd061775fa6b345c",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "name": "",
        "func": "switch (msg.payload) {\n    case 0:\n        msg.payload = \"Apagado\";\n        break;\n    default:\n        msg.payload = \"Encendido\";\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 200,
        "wires": [
            [
                "a040bbf0062ac342"
            ]
        ]
    },
    {
        "id": "8fd217ed9224341c",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "name": "",
        "func": "switch (msg.payload) {\n    case 0:\n        msg.payload = \"Apagado\";\n        break;\n    default:\n        msg.payload = \"Encendido\";\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 60,
        "wires": [
            [
                "4dbd59f9d9b762d1"
            ]
        ]
    },
    {
        "id": "4dbd59f9d9b762d1",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "group": "6d8ffaa69a25c68f",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Estado:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1800,
        "y": 60,
        "wires": []
    },
    {
        "id": "fa83b2151127c727",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e1419462044728a3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "humedad",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1530,
        "y": 540,
        "wires": [
            [
                "9864a25f16236d0f"
            ]
        ]
    },
    {
        "id": "9864a25f16236d0f",
        "type": "ui_gauge",
        "z": "240e9138468e39f6",
        "g": "e1419462044728a3",
        "name": "",
        "group": "8599d9afed430a9d",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "wave",
        "title": "Humedad",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1800,
        "y": 540,
        "wires": []
    },
    {
        "id": "9ded6ebbbd3adb27",
        "type": "ui_button",
        "z": "240e9138468e39f6",
        "g": "8c42595fd702f856",
        "name": "",
        "group": "6d8ffaa69a25c68f",
        "order": 1,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"led\" : \"rojo\", \"orden\" : 1}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 2010,
        "y": 80,
        "wires": [
            [
                "e4b1a3e75cbffc3c"
            ]
        ]
    },
    {
        "id": "66cfe09992108ec7",
        "type": "ui_button",
        "z": "240e9138468e39f6",
        "g": "8c42595fd702f856",
        "name": "",
        "group": "6d8ffaa69a25c68f",
        "order": 2,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"led\" : \"rojo\", \"orden\" : 0}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 2010,
        "y": 120,
        "wires": [
            [
                "e4b1a3e75cbffc3c"
            ]
        ]
    },
    {
        "id": "27309bfed6048359",
        "type": "ui_button",
        "z": "240e9138468e39f6",
        "g": "6793a44395d337f2",
        "name": "",
        "group": "e8ccf6ad47502312",
        "order": 1,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"led\" : \"verde\", \"orden\" : 1}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 2010,
        "y": 220,
        "wires": [
            [
                "d84be5d03107784f"
            ]
        ]
    },
    {
        "id": "95da5e1fe2cdf27a",
        "type": "ui_button",
        "z": "240e9138468e39f6",
        "g": "6793a44395d337f2",
        "name": "",
        "group": "e8ccf6ad47502312",
        "order": 2,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{\"led\" : \"verde\", \"orden\" : 0}",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "msg",
        "x": 2010,
        "y": 260,
        "wires": [
            [
                "d84be5d03107784f"
            ]
        ]
    },
    {
        "id": "1d40c067aa6b81e9",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "func": "msg.topic = \"temperatura\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 640,
        "wires": [
            [
                "ef4f90370b870fcc"
            ]
        ]
    },
    {
        "id": "08842309694c8bab",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "group": "60916e8014cfd3f7",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Última actualización",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1760,
        "y": 680,
        "wires": []
    },
    {
        "id": "945f9d8631965dc1",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 680,
        "wires": [
            [
                "08842309694c8bab"
            ]
        ]
    },
    {
        "id": "5ac83df035afb6f3",
        "type": "smooth",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "6",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 1360,
        "y": 800,
        "wires": [
            [
                "6969c4c38cf1af0e"
            ]
        ]
    },
    {
        "id": "4e182b0fa83cb332",
        "type": "ui_chart",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "group": "60916e8014cfd3f7",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Temperatura (ºC)",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1770,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "a1508307e5a54ab7",
        "type": "inject",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "Reset chart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 1550,
        "y": 720,
        "wires": [
            [
                "4e182b0fa83cb332"
            ]
        ]
    },
    {
        "id": "ed18196da15b9d12",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "Actual",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "temperatura_actual",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1350,
        "y": 760,
        "wires": [
            [
                "5ac83df035afb6f3",
                "7d4dceb80377abe4"
            ]
        ]
    },
    {
        "id": "ef4f90370b870fcc",
        "type": "ui_gauge",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "group": "60916e8014cfd3f7",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Temperatura",
        "label": "ºC",
        "format": "{{value}}",
        "min": "-5",
        "max": "50",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1790,
        "y": 640,
        "wires": []
    },
    {
        "id": "6969c4c38cf1af0e",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "temperatura_media",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1370,
        "y": 840,
        "wires": [
            [
                "7d4dceb80377abe4"
            ]
        ]
    },
    {
        "id": "7d4dceb80377abe4",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "Diferencia actual y media",
        "func": "var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\ncontext.data = context.data || {};\nswitch (msg.topic){\n    case \"temperatura_media\":\n        context.data.temperatura_media = msg.payload;\n        msg = null;\n        break;\n    case \"temperatura_actual\":\n        context.data.temperatura_actual = msg.payload;\n        msg = null;\n        break;\n    default:\n        msg = null;\n        break;\n}\n\nif (context.data.temperatura_actual != null && context.data.temperatura_media != null){\n    msg1.payload = Math.abs(context.data.temperatura_actual-context.data.temperatura_media);\n    msg1.topic = \"Diferencia\";\n    msg2.payload = context.data.temperatura_actual;\n    msg2.topic = \"Actual\";\n    msg3.payload = context.data.temperatura_media;\n    msg3.topic = \"Media\";\n    context.data = null;\n    return [msg1, msg2, msg3];\n}else {return msg;}",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1590,
        "y": 800,
        "wires": [
            [
                "4e182b0fa83cb332"
            ],
            [
                "4e182b0fa83cb332"
            ],
            [
                "4e182b0fa83cb332"
            ]
        ]
    },
    {
        "id": "4768707a9098fb23",
        "type": "switch",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "25",
                "vt": "num"
            },
            {
                "t": "lt",
                "v": "25",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1350,
        "y": 940,
        "wires": [
            [
                "da3c633c34fad8eb",
                "0befb2601c5453c7"
            ],
            [
                "1ed2280940d5db75",
                "061af7fac1fe5554"
            ]
        ]
    },
    {
        "id": "da3c633c34fad8eb",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"led\" : \"rojo\", \"orden\" : 0}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 920,
        "wires": [
            [
                "137df09f21d87c2f"
            ]
        ]
    },
    {
        "id": "1ed2280940d5db75",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"led\" : \"verde\", \"orden\" : 1}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 960,
        "wires": [
            [
                "137df09f21d87c2f"
            ]
        ]
    },
    {
        "id": "061af7fac1fe5554",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"led\" : \"rojo\", \"orden\" : 0}",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 1000,
        "wires": [
            [
                "a319282dc20b1712"
            ]
        ]
    },
    {
        "id": "0befb2601c5453c7",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"led\" : \"rojo\", \"orden\" : 1}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1560,
        "y": 880,
        "wires": [
            [
                "a319282dc20b1712"
            ]
        ]
    },
    {
        "id": "7235b33bb85139c3",
        "type": "inject",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "36",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "36",
        "payloadType": "num",
        "x": 1290,
        "y": 1000,
        "wires": [
            [
                "4768707a9098fb23"
            ]
        ]
    },
    {
        "id": "fe142cdba710abf1",
        "type": "mqtt in",
        "z": "240e9138468e39f6",
        "g": "ec0e2ac7900fa3f9",
        "name": "",
        "topic": "iot/datos/json",
        "qos": "2",
        "datatype": "auto",
        "broker": "c8b2b5778aed34b0",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 320,
        "wires": [
            [
                "f758201befab6fdb"
            ]
        ]
    },
    {
        "id": "f758201befab6fdb",
        "type": "json",
        "z": "240e9138468e39f6",
        "g": "ec0e2ac7900fa3f9",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 450,
        "y": 320,
        "wires": [
            [
                "4877d8019e62a313"
            ]
        ]
    },
    {
        "id": "f144670f5c1d4397",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "name": "Estado LED Rojo",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.LEDs.Rojo",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 100,
        "wires": [
            [
                "8fd217ed9224341c",
                "bed29fa72c8f9e99",
                "debd5c63615fff3e"
            ]
        ]
    },
    {
        "id": "22e6850228ea80f7",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "name": "Estado LED verde",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.LEDs.Verde",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 240,
        "wires": [
            [
                "cd061775fa6b345c",
                "1eb41ef80e3d5aa2",
                "18c7c585c8eb32ef"
            ]
        ]
    },
    {
        "id": "708dcf7d93f0e426",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "ef3d086a30a1b87a",
        "name": "Presión",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Presion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1280,
        "y": 380,
        "wires": [
            [
                "5983285fa86d9906"
            ]
        ]
    },
    {
        "id": "e8d076d673b0062f",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e1419462044728a3",
        "name": "Humedad",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Humedad",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1280,
        "y": 540,
        "wires": [
            [
                "fa83b2151127c727"
            ]
        ]
    },
    {
        "id": "5b1970f2b93f41df",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "Temperatura",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Temperatura",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 640,
        "wires": [
            [
                "1d40c067aa6b81e9",
                "945f9d8631965dc1",
                "ed18196da15b9d12",
                "4768707a9098fb23"
            ]
        ]
    },
    {
        "id": "767ec8fc4ab1f4c1",
        "type": "smooth",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "",
        "property": "payload",
        "action": "max",
        "count": "100",
        "round": "",
        "mult": "single",
        "reduce": false,
        "x": 360,
        "y": 500,
        "wires": [
            [
                "2a31ee24cca2ccc1"
            ]
        ]
    },
    {
        "id": "a56dd440b8eb4d6b",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "group": "3d72c6d43da61785",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Tiempo de funcionamiento",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 770,
        "y": 800,
        "wires": []
    },
    {
        "id": "0d71042f96fd60e5",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "uptime_ms",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.uptime_ms",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "uptime_ms",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 800,
        "wires": [
            [
                "8ede5d4f32a0687f"
            ]
        ]
    },
    {
        "id": "d81eb3faf849abe0",
        "type": "smooth",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "",
        "property": "payload",
        "action": "min",
        "count": "100",
        "round": "",
        "mult": "single",
        "reduce": false,
        "x": 360,
        "y": 560,
        "wires": [
            [
                "2a0a6c8ba2f2d020"
            ]
        ]
    },
    {
        "id": "2a0a6c8ba2f2d020",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "group": "3d72c6d43da61785",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": " RSSI mínimo",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 820,
        "y": 560,
        "wires": []
    },
    {
        "id": "2a31ee24cca2ccc1",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "group": "3d72c6d43da61785",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": " RSSI máximo",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 820,
        "y": 500,
        "wires": []
    },
    {
        "id": "8ede5d4f32a0687f",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "",
        "func": "var ms = msg.payload;\nconst days = Math.floor(ms / (24 * 60 * 60 * 1000));\nconst daysms = ms % (24 * 60 * 60 * 1000);\nconst hours = Math.floor(daysms / (60 * 60 * 1000));\nconst hoursms = ms % (60 * 60 * 1000);\nconst minutes = Math.floor(hoursms / (60 * 1000));\nconst minutesms = ms % (60 * 1000);\nmsg.payload = {};\nmsg.payload = days + \" días \" + hours + \"h \" + minutes + \"m \";\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 800,
        "wires": [
            [
                "a56dd440b8eb4d6b"
            ]
        ]
    },
    {
        "id": "42cfb30568599827",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 1135,
        "y": 100,
        "wires": [
            [
                "f144670f5c1d4397"
            ]
        ]
    },
    {
        "id": "4877d8019e62a313",
        "type": "link out",
        "z": "240e9138468e39f6",
        "g": "ec0e2ac7900fa3f9",
        "name": "Salida_json",
        "links": [
            "42cfb30568599827",
            "507ee572dc146a37",
            "3914849762882418",
            "f27af90432a9d1ce",
            "f6cba8292f57fa68",
            "5a66b6806f77c5af",
            "f70e16858d537dd9",
            "8c1a1a4cb1f00504",
            "9128ab6fdf7afcdb",
            "081d3184c85328e8",
            "93556662e19cbdb7",
            "86861dbaf0395be9",
            "19182511d5a9c13a",
            "b0d289625ed1b4bc",
            "f847774e7a2cf413",
            "beed1420c3d87fff",
            "d8eeb12df7891916",
            "558414ec8a70ece0",
            "8ae5b84bd31d03da",
            "5edea480ab8a051b",
            "1f597d2636989d4f",
            "52d87709f6176090",
            "d02bca1c3752a1b1",
            "7547bfad5a02511d",
            "b067b408b502966a",
            "94d8182d038b09cf",
            "c643aead9980b2f5",
            "5bdefd42a80b318e",
            "39bc11bb85879eb6",
            "743b935e2b14ddda",
            "11d036d1910fb8cc",
            "fd83f404d2822d12",
            "cfeb876b04368a8d",
            "3f191666db19b70b"
        ],
        "x": 895,
        "y": 320,
        "wires": []
    },
    {
        "id": "507ee572dc146a37",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "41653db2dbc8eff5",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 1135,
        "y": 240,
        "wires": [
            [
                "22e6850228ea80f7"
            ]
        ]
    },
    {
        "id": "3914849762882418",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "ef3d086a30a1b87a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 1135,
        "y": 380,
        "wires": [
            [
                "708dcf7d93f0e426"
            ]
        ]
    },
    {
        "id": "f27af90432a9d1ce",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "e1419462044728a3",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 1135,
        "y": 540,
        "wires": [
            [
                "e8d076d673b0062f"
            ]
        ]
    },
    {
        "id": "f6cba8292f57fa68",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 1135,
        "y": 640,
        "wires": [
            [
                "5b1970f2b93f41df"
            ]
        ]
    },
    {
        "id": "f70e16858d537dd9",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 500,
        "wires": [
            [
                "ba4e16a101fa8be0"
            ]
        ]
    },
    {
        "id": "8c1a1a4cb1f00504",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 560,
        "wires": [
            [
                "b92239618d897343"
            ]
        ]
    },
    {
        "id": "9128ab6fdf7afcdb",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 800,
        "wires": [
            [
                "0d71042f96fd60e5"
            ]
        ]
    },
    {
        "id": "26e6dec50cd22e0e",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "group": "3d72c6d43da61785",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "interval_s",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 820,
        "y": 860,
        "wires": []
    },
    {
        "id": "86861dbaf0395be9",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 440,
        "wires": [
            [
                "5032016908db4ee9"
            ]
        ]
    },
    {
        "id": "5032016908db4ee9",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "SSID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.SSID",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SSID",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 440,
        "wires": [
            [
                "3809a9e51818d6af"
            ]
        ]
    },
    {
        "id": "3809a9e51818d6af",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "group": "3d72c6d43da61785",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "SSID",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 850,
        "y": 440,
        "wires": []
    },
    {
        "id": "0bd685e285d408cc",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "RSSI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.RSSI",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "RSSI",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 620,
        "wires": [
            [
                "bc9372d0930381e5"
            ]
        ]
    },
    {
        "id": "19182511d5a9c13a",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 620,
        "wires": [
            [
                "0bd685e285d408cc"
            ]
        ]
    },
    {
        "id": "bc9372d0930381e5",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "group": "3d72c6d43da61785",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "RSSI",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 850,
        "y": 620,
        "wires": []
    },
    {
        "id": "b0d289625ed1b4bc",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 680,
        "wires": [
            [
                "c4a8b15e93c31f15"
            ]
        ]
    },
    {
        "id": "c4a8b15e93c31f15",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "localIP",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.localIP",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "localIP",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 680,
        "wires": [
            [
                "0a9e4ee6f718cadc"
            ]
        ]
    },
    {
        "id": "0a9e4ee6f718cadc",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "group": "3d72c6d43da61785",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "localIP",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 840,
        "y": 680,
        "wires": []
    },
    {
        "id": "b50489b6bd82b0f7",
        "type": "ui_text",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "group": "3d72c6d43da61785",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "macAddress",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 830,
        "y": 740,
        "wires": []
    },
    {
        "id": "a40836b65d6efe39",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "macAddress",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.macAddress",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "macAddress",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 740,
        "wires": [
            [
                "b50489b6bd82b0f7"
            ]
        ]
    },
    {
        "id": "f847774e7a2cf413",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 740,
        "wires": [
            [
                "a40836b65d6efe39"
            ]
        ]
    },
    {
        "id": "0095a0e0e54af22c",
        "type": "mqtt in",
        "z": "240e9138468e39f6",
        "g": "ea102138d043bafa",
        "name": "",
        "topic": "iot/datos/json",
        "qos": "2",
        "datatype": "auto",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 1060,
        "wires": [
            [
                "3c29a4510d854a3c"
            ]
        ]
    },
    {
        "id": "815d1be594737e12",
        "type": "range",
        "z": "240e9138468e39f6",
        "g": "ea102138d043bafa",
        "minin": "0",
        "maxin": "1023",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 600,
        "y": 1060,
        "wires": [
            [
                "040b51d90c4176d1"
            ]
        ]
    },
    {
        "id": "040b51d90c4176d1",
        "type": "ui_gauge",
        "z": "240e9138468e39f6",
        "g": "ea102138d043bafa",
        "name": "",
        "group": "bf64e5c6fbbba3c3",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "Dato ADC - método 2",
        "label": "%",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 880,
        "y": 1060,
        "wires": []
    },
    {
        "id": "3c29a4510d854a3c",
        "type": "json",
        "z": "240e9138468e39f6",
        "g": "ea102138d043bafa",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 270,
        "y": 1060,
        "wires": [
            [
                "7133b14cba1fa09f"
            ]
        ]
    },
    {
        "id": "7133b14cba1fa09f",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "ea102138d043bafa",
        "name": "Iluminación",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.ADC.Iluminacion",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Iluminacion",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 1060,
        "wires": [
            [
                "815d1be594737e12"
            ]
        ]
    },
    {
        "id": "b5c7f119232a415d",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "interval_s",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.interval_s",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "interval_s",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 860,
        "wires": [
            [
                "26e6dec50cd22e0e"
            ]
        ]
    },
    {
        "id": "93556662e19cbdb7",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 860,
        "wires": [
            [
                "b5c7f119232a415d"
            ]
        ]
    },
    {
        "id": "5050aab76f29694f",
        "type": "function",
        "z": "240e9138468e39f6",
        "g": "297629dbd540b327",
        "name": "",
        "func": "var dato = Number(msg.payload);\nmsg.payload = dato;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 960,
        "wires": [
            [
                "cc7b38fd3c9c7256"
            ]
        ]
    },
    {
        "id": "cc7b38fd3c9c7256",
        "type": "range",
        "z": "240e9138468e39f6",
        "g": "297629dbd540b327",
        "minin": "0",
        "maxin": "1023",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 620,
        "y": 960,
        "wires": [
            [
                "5bab50b9af0e76e6"
            ]
        ]
    },
    {
        "id": "5bab50b9af0e76e6",
        "type": "ui_gauge",
        "z": "240e9138468e39f6",
        "g": "297629dbd540b327",
        "name": "",
        "group": "bf64e5c6fbbba3c3",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "Dato ADC - método 1",
        "label": "%",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 880,
        "y": 960,
        "wires": []
    },
    {
        "id": "08e84a4803e5357c",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "297629dbd540b327",
        "name": "ADC Iluminacion",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.ADC.Iluminacion",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Iluminacion",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 960,
        "wires": [
            [
                "5050aab76f29694f"
            ]
        ]
    },
    {
        "id": "558414ec8a70ece0",
        "type": "link in",
        "z": "240e9138468e39f6",
        "g": "297629dbd540b327",
        "name": "Salida_json",
        "links": [
            "4877d8019e62a313",
            "ca41f1007c32e3c3"
        ],
        "x": 55,
        "y": 960,
        "wires": [
            [
                "08e84a4803e5357c"
            ]
        ]
    },
    {
        "id": "67916ee760372007",
        "type": "mqtt out",
        "z": "240e9138468e39f6",
        "name": "",
        "topic": "iot/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 2220,
        "y": 680,
        "wires": []
    },
    {
        "id": "a319282dc20b1712",
        "type": "link out",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "links": [
            "4782d39686faaf05"
        ],
        "x": 1715,
        "y": 880,
        "wires": []
    },
    {
        "id": "4782d39686faaf05",
        "type": "link in",
        "z": "240e9138468e39f6",
        "name": "salida40",
        "links": [
            "a319282dc20b1712",
            "137df09f21d87c2f",
            "e4b1a3e75cbffc3c",
            "1fcd6ed1f5c0e56b",
            "d84be5d03107784f",
            "5f88d082e806c797",
            "bbb20cdb546b67e4",
            "14adc4302a095dcd",
            "1fdb812675334775"
        ],
        "x": 2105,
        "y": 680,
        "wires": [
            [
                "67916ee760372007"
            ]
        ]
    },
    {
        "id": "137df09f21d87c2f",
        "type": "link out",
        "z": "240e9138468e39f6",
        "g": "e539cc8d8670fa6a",
        "name": "",
        "links": [
            "4782d39686faaf05"
        ],
        "x": 1715,
        "y": 960,
        "wires": []
    },
    {
        "id": "e4b1a3e75cbffc3c",
        "type": "link out",
        "z": "240e9138468e39f6",
        "g": "8c42595fd702f856",
        "name": "",
        "links": [
            "4782d39686faaf05"
        ],
        "x": 2155,
        "y": 100,
        "wires": []
    },
    {
        "id": "d84be5d03107784f",
        "type": "link out",
        "z": "240e9138468e39f6",
        "g": "6793a44395d337f2",
        "name": "",
        "links": [
            "4782d39686faaf05"
        ],
        "x": 2155,
        "y": 240,
        "wires": []
    },
    {
        "id": "b92239618d897343",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "RSSI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.RSSI",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "RSSI",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 560,
        "wires": [
            [
                "d81eb3faf849abe0"
            ]
        ]
    },
    {
        "id": "ba4e16a101fa8be0",
        "type": "change",
        "z": "240e9138468e39f6",
        "g": "8344f882bc6f7e0a",
        "name": "RSSI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.RSSI",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "RSSI",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 500,
        "wires": [
            [
                "767ec8fc4ab1f4c1"
            ]
        ]
    },
    {
        "id": "a6047788ab02d9a9",
        "type": "mqtt in",
        "z": "79e1efd2b7cf0d02",
        "g": "b4fed83d261cb969",
        "name": "Estado led rojo",
        "topic": "iot/rojo/estado",
        "qos": "2",
        "datatype": "auto",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 180,
        "y": 100,
        "wires": [
            [
                "50d46fc6a3d3de6f",
                "069a53d25b9aa378"
            ]
        ]
    },
    {
        "id": "c3149fa7f57a0629",
        "type": "mqtt out",
        "z": "79e1efd2b7cf0d02",
        "g": "90e7335f291ea8dd",
        "name": "Led verde",
        "topic": "iot/verde/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 1260,
        "y": 600,
        "wires": []
    },
    {
        "id": "9bb4c76ed0081af5",
        "type": "inject",
        "z": "79e1efd2b7cf0d02",
        "g": "90e7335f291ea8dd",
        "name": "On",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 1070,
        "y": 580,
        "wires": [
            [
                "c3149fa7f57a0629"
            ]
        ]
    },
    {
        "id": "d32919527242649d",
        "type": "mqtt in",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "Temperatura",
        "topic": "iot/datos/temperatura",
        "qos": "2",
        "datatype": "auto",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 640,
        "wires": [
            [
                "14f6a7e0e4dc4c60",
                "f976c7673e81d293",
                "8fbe2a5338dc462a",
                "56c8d43912b75a02"
            ]
        ]
    },
    {
        "id": "6cd380be060dd2e6",
        "type": "mqtt in",
        "z": "79e1efd2b7cf0d02",
        "g": "c988676a32d00f8b",
        "name": "Humedad",
        "topic": "iot/datos/humedad",
        "qos": "2",
        "datatype": "auto",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 540,
        "wires": [
            [
                "1aec4f35e986a00b"
            ]
        ]
    },
    {
        "id": "67d101b1b5a89ffb",
        "type": "mqtt in",
        "z": "79e1efd2b7cf0d02",
        "g": "d4b6d2cdca33cc65",
        "name": "Presión",
        "topic": "iot/datos/presion",
        "qos": "2",
        "datatype": "auto",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 380,
        "wires": [
            [
                "5c18989c01bf38c8"
            ]
        ]
    },
    {
        "id": "14f6a7e0e4dc4c60",
        "type": "function",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "func": "msg.topic = \"temperatura\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 640,
        "wires": [
            [
                "554ee62bb7f8dead"
            ]
        ]
    },
    {
        "id": "1aec4f35e986a00b",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "c988676a32d00f8b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "humedad",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 540,
        "wires": [
            [
                "e6055b97ee0fecfe"
            ]
        ]
    },
    {
        "id": "7eb497ab812a25be",
        "type": "mqtt out",
        "z": "79e1efd2b7cf0d02",
        "g": "e6031d3ff7a2c7b4",
        "name": "Led rojo",
        "topic": "iot/rojo/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 1260,
        "y": 440,
        "wires": []
    },
    {
        "id": "0318856b60cbd6e1",
        "type": "inject",
        "z": "79e1efd2b7cf0d02",
        "g": "e6031d3ff7a2c7b4",
        "name": "On",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 1070,
        "y": 420,
        "wires": [
            [
                "7eb497ab812a25be"
            ]
        ]
    },
    {
        "id": "6e26c3bd36cae061",
        "type": "inject",
        "z": "79e1efd2b7cf0d02",
        "g": "90e7335f291ea8dd",
        "name": "Off",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 1070,
        "y": 620,
        "wires": [
            [
                "c3149fa7f57a0629"
            ]
        ]
    },
    {
        "id": "2e8f03dc1c942c24",
        "type": "inject",
        "z": "79e1efd2b7cf0d02",
        "g": "e6031d3ff7a2c7b4",
        "name": "Off",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 1070,
        "y": 460,
        "wires": [
            [
                "7eb497ab812a25be"
            ]
        ]
    },
    {
        "id": "5b4db520284435b2",
        "type": "mqtt in",
        "z": "79e1efd2b7cf0d02",
        "g": "b4fed83d261cb969",
        "name": "Estado led verde",
        "topic": "iot/verde/estado",
        "qos": "2",
        "datatype": "auto",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 240,
        "wires": [
            [
                "3964eb999b71da93",
                "be8c6fca32a6f82c",
                "5508fdeecdc940bb"
            ]
        ]
    },
    {
        "id": "3964eb999b71da93",
        "type": "ui_led",
        "z": "79e1efd2b7cf0d02",
        "g": "b4fed83d261cb969",
        "order": 3,
        "group": "fadc24b19848c47b",
        "width": "4",
        "height": "1",
        "label": "LED ",
        "labelPlacement": "left",
        "labelAlignment": "center",
        "colorForValue": [
            {
                "color": "#33d17a",
                "value": "on",
                "valueType": "str"
            },
            {
                "color": "#9a9996",
                "value": "off",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 670,
        "y": 240,
        "wires": []
    },
    {
        "id": "e7a52f948e70f729",
        "type": "ui_button",
        "z": "79e1efd2b7cf0d02",
        "g": "e37aeb7da330393e",
        "name": "",
        "group": "fadc24b19848c47b",
        "order": 1,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 1050,
        "y": 220,
        "wires": [
            [
                "4fe663ed27d540de"
            ]
        ]
    },
    {
        "id": "f0e063bdf3c27c89",
        "type": "ui_button",
        "z": "79e1efd2b7cf0d02",
        "g": "e37aeb7da330393e",
        "name": "",
        "group": "fadc24b19848c47b",
        "order": 2,
        "width": "1",
        "height": "1",
        "passthru": false,
        "label": "Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "0",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 1050,
        "y": 260,
        "wires": [
            [
                "4fe663ed27d540de"
            ]
        ]
    },
    {
        "id": "6ecf19a0e1375f1e",
        "type": "mqtt out",
        "z": "79e1efd2b7cf0d02",
        "g": "c74e5f6560244f59",
        "name": "Led rojo",
        "topic": "iot/rojo/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 1260,
        "y": 100,
        "wires": []
    },
    {
        "id": "4fe663ed27d540de",
        "type": "mqtt out",
        "z": "79e1efd2b7cf0d02",
        "g": "e37aeb7da330393e",
        "name": "Led verde",
        "topic": "iot/verde/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 1260,
        "y": 240,
        "wires": []
    },
    {
        "id": "d786eed394f22b5a",
        "type": "ui_text",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "group": "13bc2dd9a45cc0e9",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Última actualización",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 620,
        "y": 680,
        "wires": []
    },
    {
        "id": "f976c7673e81d293",
        "type": "function",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 680,
        "wires": [
            [
                "d786eed394f22b5a"
            ]
        ]
    },
    {
        "id": "e6055b97ee0fecfe",
        "type": "ui_gauge",
        "z": "79e1efd2b7cf0d02",
        "g": "c988676a32d00f8b",
        "name": "",
        "group": "cb79f73074024dbb",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "wave",
        "title": "Humedad",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 660,
        "y": 540,
        "wires": []
    },
    {
        "id": "1d5b713945b2fdec",
        "type": "ui_chart",
        "z": "79e1efd2b7cf0d02",
        "g": "d4b6d2cdca33cc65",
        "name": "",
        "group": "d27cc3eaafc9bcc8",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Presión (mbar)",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 640,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "5c18989c01bf38c8",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "d4b6d2cdca33cc65",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "Presión",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 380,
        "wires": [
            [
                "1d5b713945b2fdec"
            ]
        ]
    },
    {
        "id": "d6b149cd6e27b2a2",
        "type": "inject",
        "z": "79e1efd2b7cf0d02",
        "g": "d4b6d2cdca33cc65",
        "name": "Reset chart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 370,
        "y": 440,
        "wires": [
            [
                "1d5b713945b2fdec"
            ]
        ]
    },
    {
        "id": "b6ce87f818aaecac",
        "type": "smooth",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "6",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 220,
        "y": 800,
        "wires": [
            [
                "9c366eefdfe04fbf"
            ]
        ]
    },
    {
        "id": "f968752fa6c28624",
        "type": "ui_chart",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "group": "13bc2dd9a45cc0e9",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Temperatura (ºC)",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 630,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "d89e4bd5d49896c3",
        "type": "inject",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "Reset chart",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "[ ]",
        "payloadType": "json",
        "x": 410,
        "y": 720,
        "wires": [
            [
                "f968752fa6c28624"
            ]
        ]
    },
    {
        "id": "8fbe2a5338dc462a",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "Actual",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "temperatura_actual",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 210,
        "y": 760,
        "wires": [
            [
                "b6ce87f818aaecac",
                "51acf678a736f6a1"
            ]
        ]
    },
    {
        "id": "554ee62bb7f8dead",
        "type": "ui_gauge",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "group": "13bc2dd9a45cc0e9",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Temperatura",
        "label": "ºC",
        "format": "{{value}}",
        "min": "-5",
        "max": "50",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 650,
        "y": 640,
        "wires": []
    },
    {
        "id": "9c366eefdfe04fbf",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "temperatura_media",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 840,
        "wires": [
            [
                "51acf678a736f6a1"
            ]
        ]
    },
    {
        "id": "51acf678a736f6a1",
        "type": "function",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "Diferencia actual y media",
        "func": "var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\ncontext.data = context.data || {};\nswitch (msg.topic){\n    case \"temperatura_media\":\n        context.data.temperatura_media = msg.payload;\n        msg = null;\n        break;\n    case \"temperatura_actual\":\n        context.data.temperatura_actual = msg.payload;\n        msg = null;\n        break;\n    default:\n        msg = null;\n        break;\n}\n\nif (context.data.temperatura_actual != null && context.data.temperatura_media != null){\n    msg1.payload = Math.abs(context.data.temperatura_actual-context.data.temperatura_media);\n    msg1.topic = \"Diferencia\";\n    msg2.payload = context.data.temperatura_actual;\n    msg2.topic = \"Actual\";\n    msg3.payload = context.data.temperatura_media;\n    msg3.topic = \"Media\";\n    context.data = null;\n    return [msg1, msg2, msg3];\n}else {return msg;}",
        "outputs": 3,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 800,
        "wires": [
            [
                "f968752fa6c28624"
            ],
            [
                "f968752fa6c28624"
            ],
            [
                "f968752fa6c28624"
            ]
        ]
    },
    {
        "id": "1a79e1f1d7d855e8",
        "type": "ui_text",
        "z": "79e1efd2b7cf0d02",
        "g": "b4fed83d261cb969",
        "group": "fadc24b19848c47b",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Última actualización",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "<style>     #nr-dashboard-cardtitle{text-align: center !important;} </style>",
        "x": 620,
        "y": 280,
        "wires": []
    },
    {
        "id": "50d46fc6a3d3de6f",
        "type": "function",
        "z": "79e1efd2b7cf0d02",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "be8c6fca32a6f82c",
        "type": "function",
        "z": "79e1efd2b7cf0d02",
        "g": "b4fed83d261cb969",
        "name": "",
        "func": "var fecha = new Date();\n\nmsg.payload = fecha.toLocaleString('es-ES', { timeZone: 'Europe/Madrid', hour12: false });\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 280,
        "wires": [
            [
                "1a79e1f1d7d855e8"
            ]
        ]
    },
    {
        "id": "56c8d43912b75a02",
        "type": "switch",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "25",
                "vt": "num"
            },
            {
                "t": "lt",
                "v": "25",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 940,
        "wires": [
            [
                "20120fed3f616cf7",
                "ebb4b5aeaea3b4bb"
            ],
            [
                "94e421e9f0b7b91b",
                "503e802577b4e178"
            ]
        ]
    },
    {
        "id": "20120fed3f616cf7",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 920,
        "wires": [
            [
                "747f15d270d31b62"
            ]
        ]
    },
    {
        "id": "94e421e9f0b7b91b",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 960,
        "wires": [
            [
                "747f15d270d31b62"
            ]
        ]
    },
    {
        "id": "503e802577b4e178",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 1000,
        "wires": [
            [
                "b1be2beb5dab6d27"
            ]
        ]
    },
    {
        "id": "ebb4b5aeaea3b4bb",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 880,
        "wires": [
            [
                "b1be2beb5dab6d27"
            ]
        ]
    },
    {
        "id": "747f15d270d31b62",
        "type": "mqtt out",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "Led verde",
        "topic": "iot/verde/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 660,
        "y": 980,
        "wires": []
    },
    {
        "id": "b1be2beb5dab6d27",
        "type": "mqtt out",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "Led rojo",
        "topic": "iot/rojo/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 660,
        "y": 880,
        "wires": []
    },
    {
        "id": "9f1b88539a1d3436",
        "type": "inject",
        "z": "79e1efd2b7cf0d02",
        "g": "352236264866bec3",
        "name": "36",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "36",
        "payloadType": "num",
        "x": 150,
        "y": 1000,
        "wires": [
            [
                "56c8d43912b75a02"
            ]
        ]
    },
    {
        "id": "b002d636c993db56",
        "type": "ui_text",
        "z": "79e1efd2b7cf0d02",
        "g": "b4fed83d261cb969",
        "group": "fadc24b19848c47b",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Estado:",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 660,
        "y": 200,
        "wires": []
    },
    {
        "id": "5508fdeecdc940bb",
        "type": "function",
        "z": "79e1efd2b7cf0d02",
        "g": "b4fed83d261cb969",
        "name": "",
        "func": "switch (msg.payload) {\n    case \"off\":\n        msg.payload = \"Apagado\";\n        break;\n    default:\n        msg.payload = \"Encendido\";\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 200,
        "wires": [
            [
                "b002d636c993db56"
            ]
        ]
    },
    {
        "id": "069a53d25b9aa378",
        "type": "function",
        "z": "79e1efd2b7cf0d02",
        "g": "b4fed83d261cb969",
        "name": "",
        "func": "switch (msg.payload) {\n    case \"off\":\n        msg.payload = \"Apagado\";\n        break;\n    default:\n        msg.payload = \"Encendido\";\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "5bb9bc8965e13cb7",
        "type": "mqtt in",
        "z": "79e1efd2b7cf0d02",
        "g": "7f061c58298ef81e",
        "name": "",
        "topic": "iot/datos/adc_read",
        "qos": "2",
        "datatype": "auto",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 1100,
        "wires": [
            [
                "0956face0e6f3598"
            ]
        ]
    },
    {
        "id": "0956face0e6f3598",
        "type": "function",
        "z": "79e1efd2b7cf0d02",
        "g": "7f061c58298ef81e",
        "name": "",
        "func": "var dato = Number(msg.payload);\nmsg.payload = dato;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1100,
        "wires": [
            [
                "bd7ff32f4a4240c0"
            ]
        ]
    },
    {
        "id": "bd7ff32f4a4240c0",
        "type": "range",
        "z": "79e1efd2b7cf0d02",
        "g": "7f061c58298ef81e",
        "minin": "0",
        "maxin": "1023",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 570,
        "y": 1100,
        "wires": [
            [
                "be8cec68cf632eef"
            ]
        ]
    },
    {
        "id": "be8cec68cf632eef",
        "type": "ui_gauge",
        "z": "79e1efd2b7cf0d02",
        "g": "7f061c58298ef81e",
        "name": "",
        "group": "1482f7c9cab5d4a1",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "Dato ADC - método 1",
        "label": "%",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 850,
        "y": 1100,
        "wires": []
    },
    {
        "id": "c38d796ff32f7042",
        "type": "mqtt in",
        "z": "79e1efd2b7cf0d02",
        "g": "2a56d2a7be9c7b76",
        "name": "",
        "topic": "iot/datos/json",
        "qos": "2",
        "datatype": "auto",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 1200,
        "wires": [
            [
                "64febcac4f03edfe"
            ]
        ]
    },
    {
        "id": "0b158c5b6bfceb48",
        "type": "range",
        "z": "79e1efd2b7cf0d02",
        "g": "2a56d2a7be9c7b76",
        "minin": "0",
        "maxin": "1023",
        "minout": "0",
        "maxout": "100",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "",
        "x": 640,
        "y": 1200,
        "wires": [
            [
                "42d0e8a2a2d23c0e"
            ]
        ]
    },
    {
        "id": "42d0e8a2a2d23c0e",
        "type": "ui_gauge",
        "z": "79e1efd2b7cf0d02",
        "g": "2a56d2a7be9c7b76",
        "name": "",
        "group": "1482f7c9cab5d4a1",
        "order": 0,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "Dato ADC - método 2",
        "label": "%",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 840,
        "y": 1200,
        "wires": []
    },
    {
        "id": "64febcac4f03edfe",
        "type": "json",
        "z": "79e1efd2b7cf0d02",
        "g": "2a56d2a7be9c7b76",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 310,
        "y": 1200,
        "wires": [
            [
                "268cd8dcd1bc1833"
            ]
        ]
    },
    {
        "id": "268cd8dcd1bc1833",
        "type": "change",
        "z": "79e1efd2b7cf0d02",
        "g": "2a56d2a7be9c7b76",
        "name": "Iluminación",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.ADC.Iluminacion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 1200,
        "wires": [
            [
                "0b158c5b6bfceb48"
            ]
        ]
    },
    {
        "id": "85747a3c6e9d4917",
        "type": "inject",
        "z": "24ab647bb9010131",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 120,
        "wires": [
            [
                "10e664ab558bae5a"
            ]
        ]
    },
    {
        "id": "10e664ab558bae5a",
        "type": "debug",
        "z": "24ab647bb9010131",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 890,
        "y": 160,
        "wires": []
    },
    {
        "id": "dc387c1f76236218",
        "type": "inject",
        "z": "24ab647bb9010131",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"writer\":\"rhyloo\",\"count\":42}",
        "payloadType": "json",
        "x": 120,
        "y": 300,
        "wires": [
            [
                "0ab09e898683690f"
            ]
        ]
    },
    {
        "id": "0ab09e898683690f",
        "type": "json",
        "z": "24ab647bb9010131",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "32c43b31552f946c",
        "type": "inject",
        "z": "24ab647bb9010131",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "print",
        "payload": "{\"writer\":\"rhyloo\",\"count\":42}",
        "payloadType": "json",
        "x": 590,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "89bb923a341d45cb",
        "type": "inject",
        "z": "24ab647bb9010131",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "aa",
        "payload": "{\"writer\":\"Peter\",\"count\":42}",
        "payloadType": "json",
        "x": 760,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "8dc6e36c47ea2ab3",
        "type": "comment",
        "z": "24ab647bb9010131",
        "name": "js",
        "info": "/* jshint browser: true, esversion: 6, asi: true */\n/* globals uibuilder */\n// @ts-nocheck\n\n/** Minimalist code for uibuilder and Node-RED */\n\n// return formatted HTML version of JSON object\nfunction syntaxHighlight(json) {\n    json = JSON.stringify(json, undefined, 4)\n    console.log(json)\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n    json = json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n        var cls = 'number'\n        if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n                cls = 'key'\n            } else {\n                cls = 'string'\n            }\n        } else if (/true|false/.test(match)) {\n            cls = 'boolean'\n        } else if (/null/.test(match)) {\n            cls = 'null'\n        }\n        return '<span class=\"' + cls + '\">' + match + '</span>'\n    })\n    return json\n} // --- End of syntaxHighlight --- //\n\nfunction test(json) {\n    if (json.topic == \"print\")\n    json2 = json.payload.writer\n    else\n    json2 = json.payload.writer\n    return json2\n}\n\n// run this function when the document is loaded\nwindow.onload = function() {\n    // Start up uibuilder - see the docs for the optional parameters\n    uibuilder.start()\n\n    // Listen for incoming messages from Node-RED\n    uibuilder.onChange('msg', function(msg){\n        console.info('[indexjs:uibuilder.onChange] msg received from Node-RED server:', msg)\n        var msg2 = msg\n        // dump the msg as text to the \"msg\" html element\n        console.log(\"Console log msg:\" + msg)\n        console.log(msg)\n\n        const eMsg = document.getElementById('msg')\n        eMsg.innerHTML = syntaxHighlight(msg)\n        \n        console.log(\"Console log msg2:\" + msg)\n        // dump the msg as text to the \"msg\" html element\n        const eMsg2 = document.getElementById('writer')\n        eMsg2.innerHTML = test(msg2)\n    })\n    uibuilder.onChange('sentCtrlMsg', function (msg) {\n        \n}\n\n",
        "x": 220,
        "y": 520,
        "wires": []
    },
    {
        "id": "1c5c4c901bfbe1ad",
        "type": "comment",
        "z": "24ab647bb9010131",
        "name": "html",
        "info": "<!doctype html>\n<html lang=\"en\"><head>\n\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n    <title>Node-RED UI Builder - Blank template</title>\n    <meta name=\"description\" content=\"Node-RED UI Builder - Blank template\">\n    <link rel=\"icon\" href=\"./images/node-blue.ico\">\n\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"./index.css\" media=\"all\">\n\n</head><body>\n    \n    <h1>uibuilder Blank Template</h1>\n    <pre id=\"msg\" class=\"syntax-highlight\">Waiting for a message from Node-RED</pre>\n    <pre id=\"writer\" class=\"syntax-highlight\">Waiting for a message from Node-RED</pre>\n<button class=\"md-raised md-button md-ink-ripple\" type=\"button\" ng-transclude=\"\" ng-click=\"me.buttonClick($event)\" ng-disabled=\"me.item.disabled\" aria-label=\"buttonOff\" ng-style=\"{'background-color':me.item.getText(), 'color':me.item.getColor(), 'z-index':1, 'padding':'0px'}\" style=\"z-index: 1; padding: 0px;\"> <ui-icon ng-show=\"me.item.icon.length\" icon=\"\" ng-style=\"{color:me.item.getColor()}\" aria-hidden=\"true\" class=\"ng-hide\"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> </ui-icon> <span ng-bind-html=\"me.item.getLabel()\">Off</span> <!----> <div class=\"md-ripple-container\" style=\"\"></div></button>\n<b-button pill variant=\"secondary\" v-on:click=\"sendMe\">Send Me</b-button>\n    <script src=\"../uibuilder/vendor/socket.io/socket.io.js\"></script>\n    <script src=\"./uibuilderfe.min.js\"></script>\n    <script src=\"./index.js\"></script>\n\n</body></html>",
        "x": 380,
        "y": 520,
        "wires": []
    },
    {
        "id": "49f9186afa7eb0ab",
        "type": "comment",
        "z": "24ab647bb9010131",
        "name": "css",
        "info": "/*  Colours for Syntax Highlighted pre's */\n.syntax-highlight {color:white;background-color:black;padding:5px 10px;}\n.syntax-highlight > .key {color:#ffbf35}\n.syntax-highlight > .string {color:#5dff39;}\n.syntax-highlight > .number {color:#70aeff;}\n.syntax-highlight > .boolean {color:#b993ff;}",
        "x": 540,
        "y": 520,
        "wires": []
    },
    {
        "id": "ed4df6a34c9bd10f",
        "type": "random",
        "z": "24ab647bb9010131",
        "name": "",
        "low": 1,
        "high": "100",
        "inte": "true",
        "property": "payload",
        "x": 120,
        "y": 440,
        "wires": [
            [
                "93a46bb79ea18a92"
            ]
        ]
    },
    {
        "id": "93a46bb79ea18a92",
        "type": "function",
        "z": "24ab647bb9010131",
        "name": "",
        "func": "var number = msg.payload\nmsg.payload = { \"water\": number, \"count\": 42 }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "83348437e1e546cf",
        "type": "inject",
        "z": "24ab647bb9010131",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 80,
        "y": 580,
        "wires": [
            [
                "ed4df6a34c9bd10f"
            ]
        ]
    },
    {
        "id": "02e19d82a87400f1",
        "type": "function",
        "z": "24ab647bb9010131",
        "name": "",
        "func": "msg.payload = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "dfaadf3ab199e00c",
        "type": "mqtt in",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "name": "Estado y LWT",
        "topic": "infind/GRUPO3/conexion",
        "qos": "2",
        "datatype": "auto",
        "broker": "8b67b1bd51c43347",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 180,
        "wires": [
            [
                "d5b5d13671439e9a"
            ]
        ]
    },
    {
        "id": "1eaec8b318944fc3",
        "type": "debug",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 60,
        "wires": []
    },
    {
        "id": "56640648f318fb19",
        "type": "inject",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "name": "Online",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"online\":true}",
        "payloadType": "str",
        "x": 110,
        "y": 60,
        "wires": [
            [
                "d5b5d13671439e9a"
            ]
        ]
    },
    {
        "id": "631359044b52c8b1",
        "type": "inject",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "name": "Offline",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"online\":false}",
        "payloadType": "str",
        "x": 110,
        "y": 120,
        "wires": [
            [
                "d5b5d13671439e9a"
            ]
        ]
    },
    {
        "id": "a30adc92797161ad",
        "type": "mqtt in",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "Sensores",
        "topic": "infind/GRUPO3/datos",
        "qos": "2",
        "datatype": "auto",
        "broker": "8b67b1bd51c43347",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 400,
        "wires": [
            [
                "fd4c253fa4036aa9",
                "495dd803d5128cd4"
            ]
        ]
    },
    {
        "id": "e4e313be7cf72272",
        "type": "debug",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 280,
        "wires": []
    },
    {
        "id": "204e8951dbb09c53",
        "type": "inject",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "Datos",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{  \"Uptime\":12300,  \"Vcc\":4.97,  \"DHT11\":{\"temp\":-2.0,\"hum\":37.0},  \"LED\":100,  \"Wifi\":{\"SSId\":\"infind\",\"IP\":\"192.168.0.100\",\"RSSI\":56}  }",
        "payloadType": "str",
        "x": 130,
        "y": 280,
        "wires": [
            [
                "fd4c253fa4036aa9"
            ]
        ]
    },
    {
        "id": "9beb600c63b60280",
        "type": "mqtt in",
        "z": "13df9ad25c9618e4",
        "g": "5cba6c5db0d46559",
        "name": "Sensores",
        "topic": "infind/GRUPO3/led/status",
        "qos": "2",
        "datatype": "auto",
        "broker": "8b67b1bd51c43347",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 1020,
        "wires": [
            [
                "5ae2c99e08b2c418",
                "6f2c3dd3b98b38db"
            ]
        ]
    },
    {
        "id": "93107118806b4b86",
        "type": "inject",
        "z": "13df9ad25c9618e4",
        "g": "5cba6c5db0d46559",
        "name": "Status",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{ \"led\":75 }",
        "payloadType": "str",
        "x": 110,
        "y": 900,
        "wires": [
            [
                "5ae2c99e08b2c418"
            ]
        ],
        "info": "# Status\n\n- Topic: infind/GRUPOX/led/status\n- Acción: Publicar\n- Descripción: El dispositivo confirma la configuración de intensidad del LED [0-100] después de aplicarla\n- Ejemplo: { \"led\":75 } "
    },
    {
        "id": "b5d1dddf4e575f4e",
        "type": "link in",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "name": "",
        "links": [
            "d5b5d13671439e9a"
        ],
        "x": 355,
        "y": 60,
        "wires": [
            [
                "1eaec8b318944fc3",
                "06e1a8509d49c5a1"
            ]
        ]
    },
    {
        "id": "d5b5d13671439e9a",
        "type": "link out",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "name": "",
        "links": [
            "b5d1dddf4e575f4e"
        ],
        "x": 295,
        "y": 60,
        "wires": []
    },
    {
        "id": "fd4c253fa4036aa9",
        "type": "json",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 380,
        "wires": [
            [
                "e4e313be7cf72272",
                "ecccce0a5594afdb",
                "39d6fac3b45b36ea",
                "2a35eff3801fbdb8",
                "cdeea9f974f54573",
                "bee0e551b2c2a3bf",
                "30fc991dc7523ddb",
                "34d884309e9afa81"
            ]
        ]
    },
    {
        "id": "06e1a8509d49c5a1",
        "type": "json",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 430,
        "y": 120,
        "wires": [
            [
                "02738aad3e6d70d4"
            ]
        ]
    },
    {
        "id": "89c9e5866eeb4402",
        "type": "ui_led",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "order": 1,
        "group": "b8b5fb6b4bfeb434",
        "width": "2",
        "height": "2",
        "label": "",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "false",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 630,
        "y": 180,
        "wires": []
    },
    {
        "id": "02738aad3e6d70d4",
        "type": "change",
        "z": "13df9ad25c9618e4",
        "g": "2f2d6fcd70cbfe4a",
        "name": "Online",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.online",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 180,
        "wires": [
            [
                "89c9e5866eeb4402"
            ]
        ]
    },
    {
        "id": "7873a2401884d320",
        "type": "ui_text",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "group": "27e360b8dee7f0ae",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Uptime (s): ",
        "format": "{{msg.payload.Uptime}}",
        "layout": "row-left",
        "className": "",
        "x": 610,
        "y": 320,
        "wires": []
    },
    {
        "id": "ecccce0a5594afdb",
        "type": "function",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "ms",
        "func": "msg.payload.Uptime = msg.payload.Uptime/1000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 320,
        "wires": [
            [
                "7873a2401884d320"
            ]
        ]
    },
    {
        "id": "39d6fac3b45b36ea",
        "type": "ui_gauge",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "",
        "group": "27e360b8dee7f0ae",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Voltios Vcc",
        "label": "V",
        "format": "{{msg.payload.Vcc}}",
        "min": 0,
        "max": "5",
        "colors": [
            "#ff0000",
            "#e6e600",
            "#008080"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 610,
        "y": 360,
        "wires": []
    },
    {
        "id": "2a35eff3801fbdb8",
        "type": "ui_gauge",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "",
        "group": "27e360b8dee7f0ae",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Temperatura",
        "label": "ºC",
        "format": "{{msg.payload.DHT11.temp | number:1}}",
        "min": "-5",
        "max": "50",
        "colors": [
            "#0080ff",
            "#00ff00",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 610,
        "y": 400,
        "wires": []
    },
    {
        "id": "0fc0b1c73d0162a9",
        "type": "inject",
        "z": "13df9ad25c9618e4",
        "g": "c59e69ccdd22540f",
        "name": "Nivel: 75",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "5",
        "topic": "",
        "payload": "{ \"level\":75 }",
        "payloadType": "str",
        "x": 120,
        "y": 660,
        "wires": [
            [
                "02e9f915f64990b0"
            ]
        ]
    },
    {
        "id": "02e9f915f64990b0",
        "type": "mqtt out",
        "z": "13df9ad25c9618e4",
        "g": "c59e69ccdd22540f",
        "name": "Set Level",
        "topic": "infind/GRUPO3/led/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "8b67b1bd51c43347",
        "x": 540,
        "y": 720,
        "wires": []
    },
    {
        "id": "e741bb926c073ddc",
        "type": "inject",
        "z": "13df9ad25c9618e4",
        "g": "c59e69ccdd22540f",
        "name": "Nivel:0",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "7.5",
        "topic": "",
        "payload": "{ \"level\":0}",
        "payloadType": "str",
        "x": 110,
        "y": 700,
        "wires": [
            [
                "02e9f915f64990b0"
            ]
        ]
    },
    {
        "id": "cdeea9f974f54573",
        "type": "ui_gauge",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "",
        "group": "27e360b8dee7f0ae",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "Humedad",
        "label": "%",
        "format": "{{msg.payload.DHT11.hum}}",
        "min": "0",
        "max": "100",
        "colors": [
            "#0080ff",
            "#00ff00",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 600,
        "y": 440,
        "wires": []
    },
    {
        "id": "495dd803d5128cd4",
        "type": "debug",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 300,
        "y": 440,
        "wires": []
    },
    {
        "id": "1031733d058764be",
        "type": "ui_slider",
        "z": "13df9ad25c9618e4",
        "g": "c59e69ccdd22540f",
        "name": "",
        "label": "Nivel LED",
        "tooltip": "",
        "group": "27e360b8dee7f0ae",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 100,
        "y": 800,
        "wires": [
            [
                "612853001cbb9f90"
            ]
        ]
    },
    {
        "id": "612853001cbb9f90",
        "type": "function",
        "z": "13df9ad25c9618e4",
        "g": "c59e69ccdd22540f",
        "name": "",
        "func": "msg.payload= \"{ \\\"level\\\":\"+msg.payload+\" }\"\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 800,
        "wires": [
            [
                "02e9f915f64990b0"
            ]
        ]
    },
    {
        "id": "bee0e551b2c2a3bf",
        "type": "ui_text",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "group": "27e360b8dee7f0ae",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "SSId: ",
        "format": "{{msg.payload.Wifi.SSId}}",
        "layout": "row-left",
        "className": "",
        "x": 590,
        "y": 480,
        "wires": []
    },
    {
        "id": "30fc991dc7523ddb",
        "type": "ui_text",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "group": "27e360b8dee7f0ae",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "IP: ",
        "format": "{{msg.payload.Wifi.IP}}",
        "layout": "row-left",
        "className": "",
        "x": 590,
        "y": 520,
        "wires": []
    },
    {
        "id": "34d884309e9afa81",
        "type": "ui_text",
        "z": "13df9ad25c9618e4",
        "g": "31d7abf2d95de80e",
        "group": "27e360b8dee7f0ae",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "RSSI: ",
        "format": "{{msg.payload.Wifi.RSSI}}",
        "layout": "row-left",
        "className": "",
        "x": 590,
        "y": 560,
        "wires": []
    },
    {
        "id": "29d5550a23b4d981",
        "type": "ui_gauge",
        "z": "13df9ad25c9618e4",
        "g": "5cba6c5db0d46559",
        "name": "",
        "group": "27e360b8dee7f0ae",
        "order": 8,
        "width": 0,
        "height": 0,
        "gtype": "gage",
        "title": "gauge",
        "label": "units",
        "format": "{{msg.payload.led}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#005680",
            "#c0c0c0",
            "#80ffff"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 470,
        "y": 980,
        "wires": []
    },
    {
        "id": "5ae2c99e08b2c418",
        "type": "json",
        "z": "13df9ad25c9618e4",
        "g": "5cba6c5db0d46559",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 1000,
        "wires": [
            [
                "29d5550a23b4d981"
            ]
        ]
    },
    {
        "id": "6f2c3dd3b98b38db",
        "type": "debug",
        "z": "13df9ad25c9618e4",
        "g": "5cba6c5db0d46559",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 900,
        "wires": []
    },
    {
        "id": "bd8e92c58e986043",
        "type": "http response",
        "z": "a43193f9452562d4",
        "name": "OTA Response",
        "statusCode": "",
        "headers": {},
        "x": 2772.559814453125,
        "y": 663.1071910858154,
        "wires": []
    },
    {
        "id": "8ad9254a301cc9e1",
        "type": "http in",
        "z": "a43193f9452562d4",
        "name": "OTA Manager",
        "url": "/esp8266-ota",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 88.05558013916016,
        "y": 648.2856712341309,
        "wires": [
            [
                "12342794a20eb41a"
            ]
        ]
    },
    {
        "id": "25990e299e8ea478",
        "type": "file",
        "z": "a43193f9452562d4",
        "name": "Save md5 Checksum",
        "filename": "",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "x": 1539.9998168945312,
        "y": 845.8333740234375,
        "wires": [
            []
        ]
    },
    {
        "id": "e41d936cb00e38e2",
        "type": "file in",
        "z": "a43193f9452562d4",
        "name": "Read firmware",
        "filename": "",
        "format": "",
        "x": 842.0833740234375,
        "y": 846.6666870117188,
        "wires": [
            [
                "3eaeda14915885af"
            ]
        ]
    },
    {
        "id": "3a79386246aae5fb",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Extract filename",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "firmware.directory",
                "tot": "flow"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": "req.files.firmware[0].originalname",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "req",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "res",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 619.375,
        "y": 847.9166870117188,
        "wires": [
            [
                "e41d936cb00e38e2"
            ]
        ]
    },
    {
        "id": "72ab6f4ff778dbd2",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1225.625,
        "y": 846.25,
        "wires": [
            [
                "25990e299e8ea478"
            ]
        ]
    },
    {
        "id": "319d75c67a0d36f4",
        "type": "comment",
        "z": "a43193f9452562d4",
        "name": "Firmware Upgrade",
        "info": "The system determines which firmware to send based\non the MAC address, version, and MD5 headers in the\nrequest from the ESP8266.\n\nFirstly, it checks if a firmware hash file with \nthe MAC address as the name exists, or else if a \nfirmware file with the version as the name exists.\nIf neither exist then no update is available.\n\nIt then reads the corresponding MD5 hash from the\nhash file and compares to the MD5 hash in the\nrequest.  If they match then the firmware is up\nto date and no update is required.\n\nOtherwise, it sends the contents of the firmware\nbin file and the MD5 hash value.",
        "x": 103.5,
        "y": 46,
        "wires": []
    },
    {
        "id": "8ddbca4d41b63a4f",
        "type": "comment",
        "z": "a43193f9452562d4",
        "name": "Firmware Management",
        "info": "",
        "x": 110.5,
        "y": 542,
        "wires": []
    },
    {
        "id": "485c752861a20405",
        "type": "template",
        "z": "a43193f9452562d4",
        "name": "Firmware Manager",
        "field": "payload",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <title>ESP8266 OTA Firmware Manager</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <link rel=\"stylesheet\" href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\">\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"></script>\n        <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n        <style>\n            .file-btn-grp {\n                display: none;\n            }\n            body {\n                background-color: #f6f6f6;\n            }\n            .text_holder {\n                display: block;\n                max-width: 100%;\n                word-wrap: break-word;\n                line-height: 30px;\n            }\n            #main {\n                margin-top: 50px;\n                background-color: #ffffff;\n                border-radius: 5px;\n                width: 70%;\n                min-width: 500px;\n                border: 1px solid #545454;\n            }\n            .alert {\n                margin-top: 10px;\n                margin-bottom: 5px;\n            }\n            .link {\n                font-style: italic;\n            }\n            .listentry {\n                display: none;\n                list-style-type: none;\n            }\n        </style>\n\n    </head>\n    <body>\n        <div class=\"container\" id=\"main\">\n            <h1><small>ESP8266 OTA Firmware Manager</small></h1>\n            <h2><small>Upload New Firmware</small></h2>\n\n            <form role =\"form\" id=\"main_input_box\" action=\"esp8266-ota\" method=\"POST\" enctype=\"multipart/form-data\" class=\"form-inline\">\n                <input type=\"file\" accept=\".bin\" class=\"hidden\" id=\"fileUpload\" name=\"firmware\" placeholder=\"firmware.bin\">\n                <div class=\"form-group\">\n                <div class=\"input-group\">\n                    <span class=\"input-group-btn\">\n                        <button id=\"browse\" type=\"button\" class=\"btn btn-primary\">Browse...</button>\n                    </span>\n                    <input id=\"filename\" size=100 readonly=\"\" class=\"form-control\" placeholder=\"Firmware.bin\">\n                    <span class=\"input-group-btn\">\n                        <input type=\"submit\" value=\"Upload\" class=\"btn btn-primary add_button\">\n                    </span>\n                </div>\n                </div>\n            </form>\n\n            <h2><small>Current Firmware</small></h2>\n            <ul class=\"list-group\" id=\"list_of_items\">\n            </ul>\n        </div>\n\n        <div id=\"linkModal\" class=\"modal fade\" role=\"dialog\">\n            <div class=\"modal-dialog\">\n        \n                <!-- Modal content-->\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n                        <h4 class=\"modal-title\">Create Symbolic Link</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form class=\"form-horizontal\" id=\"linkForm\" role=\"form\" action=\"#\" method=\"POST\">\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkName\">Link:</label> \n                                <div class=\"col-sm-10\">\n                                    <input id=\"linkName\" name=\"linkName\" class=\"form-control\"/>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkFile\">To:</label> \n                                <div class=\"col-sm-10\">\n                                    <input class=\"form-control\" id=\"linkFile\" name=\"linkFile\"/>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"submit\" class=\"btn btn-success link-create\">Create</button>\n                        <button type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <script>\n\n            var deleteButton = \"<button id='delete' class='btn btn-warning'>Delete</button>\";\n            var linkButton = \"<button id='link' class='btn btn-success'>Link</button>\";\n            var oneButton = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + \"</div>\";\n            var twoButtons = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + linkButton + \"</div>\";\n            \n            function addListEntry(list, filename, linkname) {\n            \n                var entry;\n                \n                if (linkname === undefined) {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span>\" \n                    + filename + \"</span>\" + twoButtons + \"</div></li>\");\n                } else {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span class='link'>\" \n                    + filename + \"</span> <span class='glyphicon glyphicon-arrow-right'></span> \" \n                    + linkname + oneButton + \"</div></li>\");\n                }\n                \n                entry.mouseover(function(){\n                    $(this).find(\".btn-group\").fadeIn(\"fast\");\n                });\n                entry.mouseleave(function(){\n                    $(this).find(\".btn-group\").fadeOut(\"slow\");\n                });\n                \n                entry.on(\"click\", \"button#delete\", function(){\n                    var listItem = this.parentElement.parentElement.parentElement;\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $.ajax({\n                        type: 'DELETE',\n                        data: {\"filename\": file},\n                        success: function(result) {\n                            $(listItem).fadeOut(\"slow\", function(){\n                                listItem.remove();\n                            });\n                        },\n                        error: function(result) {\n                            $(listItem).append(\"<div class='alert alert-danger'>\"\n                                + \"<a href='#' class='close' data-dismiss='alert'\"\n                                + \"aria-label='close'>&times;</a>\"\n                                + result.responseText + \"</div>\");\n                        }\n                    });\n                });\n           \n                entry.on(\"click\", \"button#link\", function(){\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $(\"#linkName\").val(\"\");\n                    $(\"#linkFile\").prop(\"disabled\", true).val(file);\n                    $(\"#linkName\").parent().removeClass(\"has-error\");\n                    $(\"#linkModal\").modal();\n                    $('#linkModal').on('shown.bs.modal', function () {\n                        $('#linkName').focus();\n                    });\n                });\n                \n                if (list.children().length == 0) {\n                    list.append(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n\n                if (filename < $(\"li:first span:first\", list).text()) {\n                    $(\"li:first\", list).before(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                if (filename > $(\"li:last span:first\", list).text()) {\n                    $(\"li:last\", list).after(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                \n                var count = 0;\n                var $li = $(\"li\", list);\n                do {\n                    var index = parseInt($li.length / 2);\n                    var $compare = $li.eq(index);\n                    var compare = $(\"span:first\",$compare).text();\n                    if (filename === compare) {\n                        break;\n                    }\n                    else if (filename > compare) {\n                        $li = $li.slice(index, $li.length);\n                    } else {\n                        $li = $li.slice(0, index);\n                    }\n                } while ($li.length > 1);\n\n                if (filename === compare) {\n                    $compare.slideUp(\"fast\").slideDown(\"slow\");\n                    return;\n                } else if (filename < compare) { \n                    entry.insertBefore($compare); \n                } else { \n                    entry.insertAfter($compare); \n                }\n                entry.slideDown(\"slow\");\n            }\n            \n            \n            var files = String(\"{{payload.files}}\").split(',');\n            var links = String(\"{{payload.links}}\").split(',');\n            \n            var list_of_items = $(\"#list_of_items\");\n            \n            files.forEach(function(file,index) {\n                if (links[index] == \"\") {\n                    addListEntry(this, file.slice(0,-4));\n                } else {\n                    addListEntry(this, file.slice(0,-4), links[index].slice(0,-4));\n                }\n            },list_of_items);\n           \n           \n            $(\"#linkModal\").on(\"click\", \"button.link-create\", function(event){\n               event.preventDefault();\n               if ($(\"#linkName\").val() == \"\") {\n                    $('#linkName').focus();\n                    $('#linkName').parent().addClass(\"has-error\");\n                    return false;\n               }\n               $(\"#linkFile\").prop(\"disabled\",false);               \n               $.ajax({\n                    type: 'PUT',\n                    data: $(\"#linkForm\").serialize(),\n                    success: function(result) {\n                        $(\"#linkModal\").modal('hide');\n                        addListEntry(list_of_items, $('#linkName').val(), $('#linkFile').val());\n                    },\n                    error: function(result) {\n                        $(\"#linkFile\").prop(\"disabled\", true);\n                        $('#linkName').focus();\n                        $('#linkName').parent().addClass(\"has-error\");\n                        $(linkForm).append(\"<div id='linkError' class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n                });\n            });\n            \n            $(\"#browse\").on('click', function () {\n                fileUpload.click();\n            });\n            \n            $(\"#fileUpload\").on('change', function () {\n                $(\"#filename\").val($(\"#fileUpload\").val().split('/').pop().split('\\\\').pop());\n            });\n            \n            var frm = $(\"#main_input_box\");\n            \n            frm.submit( function( e ) {\n                e.preventDefault();\n                if ($('#fileUpload').val() == \"\") return null;\n                $.ajax( {\n                    url: frm.attr('action'),\n                    type: frm.attr('method'),\n                    data: new FormData( this ),\n                    processData: false,\n                    contentType: false,\n                    success: function(result) {\n                        addListEntry(list_of_items, $('#fileUpload').val().slice(0,-4).split('\\\\').pop());\n                        $('#fileUpload').val('');\n                        $(':text').val('');\n                    },\n                    error: function(result) {\n                        $(\"#main_input_box\").append(\"<div class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n\n                });\n            });\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 1381.3333740234375,
        "y": 645.8135375976562,
        "wires": [
            [
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "1649c4977994eb61",
        "type": "http in",
        "z": "a43193f9452562d4",
        "name": "OTA Delete",
        "url": "/esp8266-ota",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 83.125,
        "y": 933.75,
        "wires": [
            [
                "7bc256301dc109eb"
            ]
        ]
    },
    {
        "id": "99e38eadd16b15bf",
        "type": "catch",
        "z": "a43193f9452562d4",
        "name": "File Error",
        "scope": [
            "e4bb9da0a7d3a501",
            "302d0c5c07faa824",
            "8eb5cc497dfc9319",
            "cda498639522b0d1",
            "bc6a0c7c3144df43"
        ],
        "x": 1870.6665573120117,
        "y": 805.3333158493042,
        "wires": [
            [
                "58be7524738ce76c"
            ]
        ]
    },
    {
        "id": "58be7524738ce76c",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "statusCode",
                "pt": "msg",
                "to": "500",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2159,
        "y": 791,
        "wires": [
            [
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "fd3dfb38f31f1426",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Change to MD5 filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.filename",
                "pt": "msg",
                "from": "bin",
                "fromt": "str",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1879.1666564941406,
        "y": 936.6666269302368,
        "wires": [
            [
                "302d0c5c07faa824"
            ]
        ]
    },
    {
        "id": "8406a3849f1cd590",
        "type": "http in",
        "z": "a43193f9452562d4",
        "name": "OTA Link",
        "url": "/esp8266-ota",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 84,
        "y": 1041.5,
        "wires": [
            [
                "3ae4160bd63e0341"
            ]
        ]
    },
    {
        "id": "3ae4160bd63e0341",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Extract filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.linkName",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".bin",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.linkFile",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".bin",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1385,
        "y": 1044,
        "wires": [
            [
                "8eb5cc497dfc9319"
            ]
        ]
    },
    {
        "id": "a92d64597b791f82",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Change to MD5 Filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.linkName",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.linkFile",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1908,
        "y": 1045,
        "wires": [
            [
                "cda498639522b0d1"
            ]
        ]
    },
    {
        "id": "7bc256301dc109eb",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Extract filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".bin",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1382.5,
        "y": 937.5,
        "wires": [
            [
                "e4bb9da0a7d3a501"
            ]
        ]
    },
    {
        "id": "38b92bdc91223c2c",
        "type": "http response",
        "z": "a43193f9452562d4",
        "name": "OTA Response",
        "x": 3210.059814453125,
        "y": 366.06256103515625,
        "wires": []
    },
    {
        "id": "1bf6140c858cf0ef",
        "type": "file in",
        "z": "a43193f9452562d4",
        "name": "Load Firmware",
        "filename": "filename",
        "filenameType": "msg",
        "format": "",
        "sendError": false,
        "x": 2586.999786376953,
        "y": 399.88400077819824,
        "wires": [
            [
                "38b92bdc91223c2c",
                "9b2f875ac25af443"
            ]
        ]
    },
    {
        "id": "e1024e4ff3d510bd",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "No Update",
        "rules": [
            {
                "t": "set",
                "p": "statusCode",
                "pt": "msg",
                "to": "304",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2956.107421875,
        "y": 258.52682304382324,
        "wires": [
            [
                "38b92bdc91223c2c"
            ]
        ]
    },
    {
        "id": "2fafb6a308eb7732",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Forbidden",
        "rules": [
            {
                "t": "set",
                "p": "statusCode",
                "pt": "msg",
                "to": "403",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Forbidden",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2933.999755859375,
        "y": 135.84826469421387,
        "wires": [
            [
                "38b92bdc91223c2c"
            ]
        ]
    },
    {
        "id": "9b2f875ac25af443",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "Update sent",
        "active": true,
        "console": "false",
        "complete": "req.headers.x-esp8266-sta-mac",
        "x": 2932.0000610351562,
        "y": 405.955472946167,
        "wires": []
    },
    {
        "id": "ebdd9cfedabb6851",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Save MD5 Hash",
        "rules": [
            {
                "t": "set",
                "p": "headers.x-MD5",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "md5",
                "fromt": "str",
                "to": "bin",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2375.785789489746,
        "y": 387.0268669128418,
        "wires": [
            [
                "1bf6140c858cf0ef"
            ]
        ]
    },
    {
        "id": "c90ec0d226a68c11",
        "type": "switch",
        "z": "a43193f9452562d4",
        "name": "Update type",
        "property": "req.headers.x-esp8266-mode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "spiffs",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "sketch",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 474.5179748535156,
        "y": 228.52685356140137,
        "wires": [
            [
                "e1024e4ff3d510bd"
            ],
            [
                "53b5fa34136e8b17"
            ]
        ]
    },
    {
        "id": "e1949839d4cd7ef8",
        "type": "switch",
        "z": "a43193f9452562d4",
        "name": "Compare MD5 hash",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "req.headers.x-esp8266-sketch-md5",
                "vt": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "outputs": 2,
        "x": 1945.41064453125,
        "y": 342.13403129577637,
        "wires": [
            [
                "e1024e4ff3d510bd",
                "3d514a7b77c4e737"
            ],
            [
                "ebdd9cfedabb6851",
                "f657e29e4c2abb1e"
            ]
        ]
    },
    {
        "id": "6479672fce9ef8c7",
        "type": "catch",
        "z": "a43193f9452562d4",
        "name": "File error",
        "scope": [
            "1bf6140c858cf0ef",
            "bace0d35836c8d87"
        ],
        "x": 2628.3572387695312,
        "y": 348.52682304382324,
        "wires": [
            [
                "e1024e4ff3d510bd",
                "30b6f430532463ef"
            ]
        ]
    },
    {
        "id": "c8ccf35b11a423af",
        "type": "switch",
        "z": "a43193f9452562d4",
        "name": "Check user agent",
        "property": "req.headers.user-agent",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "ESP8266-http-Update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 311.21436309814453,
        "y": 134.95541191101074,
        "wires": [
            [
                "2fafb6a308eb7732"
            ],
            [
                "c90ec0d226a68c11"
            ]
        ]
    },
    {
        "id": "53b5fa34136e8b17",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Get MAC hash filename",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "firmware.directory",
                "tot": "flow"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": "req.headers.x-esp8266-sta-mac",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 703.6428451538086,
        "y": 354.9554100036621,
        "wires": [
            [
                "8725631065c8f057"
            ]
        ]
    },
    {
        "id": "bace0d35836c8d87",
        "type": "file in",
        "z": "a43193f9452562d4",
        "name": "Load Hash",
        "filename": "",
        "format": "utf8",
        "sendError": false,
        "x": 1734.410629272461,
        "y": 341.7768840789795,
        "wires": [
            [
                "e1949839d4cd7ef8"
            ]
        ]
    },
    {
        "id": "3f50a364d5026f4c",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Get Version hash filename",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "firmware.directory",
                "tot": "flow"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": "req.headers.x-esp8266-version",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1183.7857666015625,
        "y": 459.5982036590576,
        "wires": [
            [
                "b91674c82b73a515",
                "6c2e3ed78ff1828b"
            ]
        ]
    },
    {
        "id": "30b6f430532463ef",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "Firmware file error",
        "active": true,
        "console": "false",
        "complete": "error",
        "x": 2891.2142944335938,
        "y": 347.09826469421387,
        "wires": []
    },
    {
        "id": "c444f513a6b6a252",
        "type": "http in",
        "z": "a43193f9452562d4",
        "name": "OTA Request",
        "url": "/esp8266-ota/update",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 75,
        "y": 134.95541191101074,
        "wires": [
            [
                "c8ccf35b11a423af",
                "08e6bc0a944e47be"
            ]
        ]
    },
    {
        "id": "eef781e23a0c2a85",
        "type": "switch",
        "z": "a43193f9452562d4",
        "name": "",
        "property": "req.headers.x-esp8266-version",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 687.4642333984375,
        "y": 466.74108695983887,
        "wires": [
            [
                "3f50a364d5026f4c"
            ],
            [
                "d47654243d11f45a"
            ]
        ]
    },
    {
        "id": "d47654243d11f45a",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Version in Request",
        "rules": [
            {
                "t": "set",
                "p": "req.headers.x-esp8266-version",
                "pt": "msg",
                "to": "req.params.version",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 896.9285278320312,
        "y": 532.8125286102295,
        "wires": [
            [
                "3f50a364d5026f4c"
            ]
        ]
    },
    {
        "id": "08e6bc0a944e47be",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "Update req",
        "active": true,
        "tosidebar": true,
        "console": false,
        "complete": "true",
        "statusVal": "",
        "statusType": "auto",
        "x": 246.2144012451172,
        "y": 235.66967582702637,
        "wires": []
    },
    {
        "id": "c0d491d04c0d434d",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 1291.773494720459,
        "y": 382.1797161102295,
        "wires": []
    },
    {
        "id": "d3f244fc45adece6",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 1290,
        "y": 280,
        "wires": []
    },
    {
        "id": "6c2e3ed78ff1828b",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 1393.0234375,
        "y": 555.0390625,
        "wires": []
    },
    {
        "id": "556d541d6eab0c13",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 1770.0234375,
        "y": 524.0390625,
        "wires": []
    },
    {
        "id": "d5bca0febc4ea1c2",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 1789.0234375,
        "y": 407.0390625,
        "wires": []
    },
    {
        "id": "3d514a7b77c4e737",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 2148.0234375,
        "y": 279.0390625,
        "wires": []
    },
    {
        "id": "f657e29e4c2abb1e",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 2170.0234375,
        "y": 506.0390625,
        "wires": []
    },
    {
        "id": "bc6a0c7c3144df43",
        "type": "fs-ops-move",
        "z": "a43193f9452562d4",
        "name": "Store firmware",
        "sourcePath": "req.files.firmware[0].destination",
        "sourcePathType": "msg",
        "sourceFilename": "req.files.firmware[0].filename",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "req.files.firmware[0].originalname",
        "destFilenameType": "msg",
        "link": false,
        "x": 365.89284896850586,
        "y": 818.3332557678223,
        "wires": [
            [
                "3a79386246aae5fb",
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "8eb5cc497dfc9319",
        "type": "fs-ops-move",
        "z": "a43193f9452562d4",
        "name": "Link firmware",
        "sourcePath": "",
        "sourcePathType": "str",
        "sourceFilename": "payload.linkFile",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "payload.linkName",
        "destFilenameType": "msg",
        "link": true,
        "x": 1644.5,
        "y": 1044,
        "wires": [
            [
                "a92d64597b791f82"
            ]
        ]
    },
    {
        "id": "cda498639522b0d1",
        "type": "fs-ops-move",
        "z": "a43193f9452562d4",
        "name": "Link MD5",
        "sourcePath": "",
        "sourcePathType": "str",
        "sourceFilename": "payload.linkFile",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "payload.linkName",
        "destFilenameType": "msg",
        "link": true,
        "x": 2152.5,
        "y": 1044,
        "wires": [
            [
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "e4bb9da0a7d3a501",
        "type": "fs-ops-delete",
        "z": "a43193f9452562d4",
        "name": "Delete firmware",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.filename",
        "filenameType": "msg",
        "x": 1628.6250457763672,
        "y": 936.5832777023315,
        "wires": [
            [
                "fd3dfb38f31f1426"
            ]
        ]
    },
    {
        "id": "302d0c5c07faa824",
        "type": "fs-ops-delete",
        "z": "a43193f9452562d4",
        "name": "Delete MD5 Hash",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.filename",
        "filenameType": "msg",
        "x": 2170.833206176758,
        "y": 936.6665878295898,
        "wires": [
            [
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "b91674c82b73a515",
        "type": "fs-ops-access",
        "z": "a43193f9452562d4",
        "name": "Check for MD5 file exists",
        "path": "",
        "pathType": "str",
        "filename": "filename",
        "filenameType": "msg",
        "read": true,
        "write": false,
        "throwerror": false,
        "x": 1497.2857055664062,
        "y": 459.6696147918701,
        "wires": [
            [
                "bace0d35836c8d87",
                "d5bca0febc4ea1c2"
            ],
            [
                "e1024e4ff3d510bd",
                "556d541d6eab0c13"
            ]
        ]
    },
    {
        "id": "8725631065c8f057",
        "type": "fs-ops-access",
        "z": "a43193f9452562d4",
        "name": "Check for MD5 file exists",
        "path": "",
        "pathType": "str",
        "filename": "filename",
        "filenameType": "msg",
        "read": true,
        "write": false,
        "throwerror": false,
        "x": 1009.357177734375,
        "y": 349.09826469421387,
        "wires": [
            [
                "bace0d35836c8d87",
                "d3f244fc45adece6"
            ],
            [
                "eef781e23a0c2a85",
                "c0d491d04c0d434d"
            ]
        ]
    },
    {
        "id": "307eb70a95d584c7",
        "type": "fs-ops-link",
        "z": "a43193f9452562d4",
        "name": "Get Links",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.files",
        "filenameType": "msg",
        "link": "payload.links",
        "linkType": "msg",
        "x": 776.4999923706055,
        "y": 648.3333110809326,
        "wires": [
            [
                "485c752861a20405"
            ]
        ]
    },
    {
        "id": "12342794a20eb41a",
        "type": "fs-ops-dir",
        "z": "a43193f9452562d4",
        "name": "Firmware listing",
        "path": "firmware.directory",
        "pathType": "flow",
        "filter": "*.bin",
        "filterType": "str",
        "dir": "payload.files",
        "dirType": "msg",
        "x": 493.0355987548828,
        "y": 647.8015928268433,
        "wires": [
            [
                "307eb70a95d584c7"
            ]
        ]
    },
    {
        "id": "3eaeda14915885af",
        "type": "md5",
        "z": "a43193f9452562d4",
        "name": "",
        "fieldToHash": "payload",
        "hashField": "payload",
        "hashFieldType": "msg",
        "x": 1031.6668090820312,
        "y": 846.6666259765625,
        "wires": [
            [
                "72ab6f4ff778dbd2"
            ]
        ]
    },
    {
        "id": "b0744d4557e56190",
        "type": "config",
        "z": "a43193f9452562d4",
        "name": "Firmware Config",
        "properties": [
            {
                "p": "firmware.directory",
                "pt": "flow",
                "to": "/home/rhyloo/OTA/",
                "tot": "str"
            }
        ],
        "active": true,
        "x": 123.0714111328125,
        "y": 360.1428527832031,
        "wires": []
    },
    {
        "id": "1188246186822415",
        "type": "httpInMultipart",
        "z": "a43193f9452562d4",
        "name": "OTA Upload",
        "url": "/esp8266-ota",
        "method": "post",
        "fields": "[{ \"name\": \"firmware\"}]",
        "swaggerDoc": "",
        "x": 79.7857437133789,
        "y": 812.4286108016968,
        "wires": [
            [
                "bc6a0c7c3144df43"
            ]
        ]
    },
    {
        "id": "1077eb7e8ada2c39",
        "type": "comment",
        "z": "a43193f9452562d4",
        "name": "Dirección Gestionar Firmwares",
        "info": "http://192.168.144.66:1880/esp8266-ota",
        "x": 190,
        "y": 1140,
        "wires": []
    },
    {
        "id": "696c19e5.d26f78",
        "type": "inject",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "start flow",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 60,
        "wires": [
            [
                "6baf2f65.ab099",
                "338058ea.875b28"
            ]
        ]
    },
    {
        "id": "6baf2f65.ab099",
        "type": "http request",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "AEMET http request",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://www.aemet.es/xml/municipios/localidad_29901.xml",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 360,
        "y": 100,
        "wires": [
            [
                "2cf239ee.fe0836"
            ]
        ]
    },
    {
        "id": "2cf239ee.fe0836",
        "type": "xml",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 490,
        "y": 180,
        "wires": [
            [
                "338058ea.875b28",
                "e84f5da3.829a3",
                "85028a8d.668138",
                "c91834d1.9bf4b8",
                "ba35e1b7.ec857"
            ]
        ]
    },
    {
        "id": "338058ea.875b28",
        "type": "debug",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "whole xml",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 720,
        "y": 60,
        "wires": []
    },
    {
        "id": "e84f5da3.829a3",
        "type": "change",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "max. temp today",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.root.prediccion[0].dia[0].temperatura[0].maxima[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 140,
        "wires": [
            [
                "80d43bb8.0e3d88"
            ]
        ]
    },
    {
        "id": "80d43bb8.0e3d88",
        "type": "debug",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "max. temp today",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 980,
        "y": 140,
        "wires": []
    },
    {
        "id": "85028a8d.668138",
        "type": "change",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "max. temp tomorrow",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.root.prediccion[0].dia[1].temperatura[0].maxima[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 220,
        "wires": [
            [
                "fb2ad7fd.fd9d38"
            ]
        ]
    },
    {
        "id": "fb2ad7fd.fd9d38",
        "type": "debug",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "max. temp tomorrow",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 1000,
        "y": 220,
        "wires": []
    },
    {
        "id": "c91834d1.9bf4b8",
        "type": "change",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "min. temp today",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.root.prediccion[0].dia[0].temperatura[0].minima[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 180,
        "wires": [
            [
                "a8feb814.7498e8"
            ]
        ]
    },
    {
        "id": "a8feb814.7498e8",
        "type": "debug",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "min. temp today",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 980,
        "y": 180,
        "wires": []
    },
    {
        "id": "ba35e1b7.ec857",
        "type": "change",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "min. temp tomorrow",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.root.prediccion[0].dia[1].temperatura[0].minima[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 260,
        "wires": [
            [
                "50818085.451f5"
            ]
        ]
    },
    {
        "id": "50818085.451f5",
        "type": "debug",
        "z": "45a4e39f.03efac",
        "g": "0cdda659d54342bd",
        "name": "min. temp tomorrow",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "x": 1000,
        "y": 260,
        "wires": []
    },
    {
        "id": "1cca111cc6a8d4bf",
        "type": "debug",
        "z": "45a4e39f.03efac",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 610,
        "y": 700,
        "wires": []
    },
    {
        "id": "4de9a5494932f329",
        "type": "function",
        "z": "45a4e39f.03efac",
        "name": "mensaje bienvenida",
        "func": "if(msg.payload.content.substring(0,1)!=\"/\")\n{\n msg.payload.content=\"Hola soy el bot de la tarea 9. Puedo responderte a estos comandos:\\n/start\\n/tiempo\";\n return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 440,
        "wires": [
            [
                "498462eef7447526"
            ]
        ]
    },
    {
        "id": "ff1ab0d052f8f0df",
        "type": "telegram receiver",
        "z": "45a4e39f.03efac",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "saveDataDir": "",
        "filterCommands": true,
        "x": 150,
        "y": 400,
        "wires": [
            [
                "4de9a5494932f329",
                "cc3ede6e98bf8926"
            ],
            []
        ]
    },
    {
        "id": "498462eef7447526",
        "type": "telegram sender",
        "z": "45a4e39f.03efac",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "haserroroutput": false,
        "outputs": 1,
        "x": 910,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "7b57d7fe124dd9c8",
        "type": "telegram command",
        "z": "45a4e39f.03efac",
        "name": "",
        "command": "/start",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "1f33bd2091f1c0f0",
        "strict": false,
        "hasresponse": true,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 2,
        "x": 110,
        "y": 460,
        "wires": [
            [
                "4de9a5494932f329"
            ],
            []
        ]
    },
    {
        "id": "7f3223281cc7ff75",
        "type": "telegram command",
        "z": "45a4e39f.03efac",
        "name": "",
        "command": "/tiempo",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "1f33bd2091f1c0f0",
        "strict": false,
        "hasresponse": true,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 2,
        "x": 90,
        "y": 580,
        "wires": [
            [
                "880ea544357607ba",
                "1cca111cc6a8d4bf"
            ],
            []
        ]
    },
    {
        "id": "880ea544357607ba",
        "type": "function",
        "z": "45a4e39f.03efac",
        "name": "function 5",
        "func": "msg.user = msg.payload;\nvar hora_str = new Date();\nvar hora = Number(hora_str.getHours());\nif (hora < 6) {\n    var value = 3;\n}else if ( hora >= 6 && hora < 12){\n    var value = 4;\n}else if (hora >= 12 && hora < 18){\n    var value = 5;\n}else if (hora >= 18 && hora < 24){\n    var value = 6;\n}\nmsg.mensaje = value;\nmsg.limit = 1;\nmsg.sort = { \"date\": -1 };\nmsg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 580,
        "wires": [
            [
                "9fd4a62bca7a0772",
                "1cca111cc6a8d4bf"
            ]
        ]
    },
    {
        "id": "067ec98f9ca3092e",
        "type": "function",
        "z": "45a4e39f.03efac",
        "name": "function 6",
        "func": "var period = msg.mensaje;\nmsg.elaborado = msg.payload.root.elaborado[0]\nmsg.prob_precipitacion = msg.payload.root.prediccion[0].dia[0].prob_precipitacion[period]._;\nmsg.periodo = msg.payload.root.prediccion[0].dia[0].prob_precipitacion[period].$.periodo;\nmsg.estado_del_cielo = msg.payload.root.prediccion[0].dia[0].estado_cielo[period].$.descripcion;\nmsg.prob_precipitacion_manana = msg.payload.root.prediccion[0].dia[1].prob_precipitacion[0]._;\nmsg.estado_del_cielo_manana = msg.payload.root.prediccion[0].dia[1].estado_cielo[0].$.descripcion;\n\n\nmsg.payload = msg.user;\nmsg.payload.content = \"\";\nmsg.payload.content += \"\\nSegún la AEMET la predicción para las próximas horas (\"+ msg.periodo + \"h)\"\nmsg.payload.content += \" es de \" + msg.estado_del_cielo;\nmsg.payload.content += \" y probabilidad de lluvia de \" + msg.prob_precipitacion + \"%. \"\nmsg.payload.content += \"Mañana se espera \" + msg.estado_del_cielo_manana + \" y probabilidad de lluvia de \" + msg.prob_precipitacion_manana + \"%.\";\nmsg.payload.content += \"\\nPredicción elaborada: \" + msg.elaborado + \".\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 580,
        "wires": [
            [
                "1cca111cc6a8d4bf",
                "498462eef7447526"
            ]
        ]
    },
    {
        "id": "9fd4a62bca7a0772",
        "type": "http request",
        "z": "45a4e39f.03efac",
        "name": "AEMET http request",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://www.aemet.es/xml/municipios/localidad_29901.xml",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 500,
        "y": 580,
        "wires": [
            [
                "ebc5420ffd97ea8c"
            ]
        ]
    },
    {
        "id": "ebc5420ffd97ea8c",
        "type": "xml",
        "z": "45a4e39f.03efac",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 690,
        "y": 580,
        "wires": [
            [
                "067ec98f9ca3092e"
            ]
        ]
    },
    {
        "id": "cc3ede6e98bf8926",
        "type": "debug",
        "z": "45a4e39f.03efac",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 380,
        "wires": []
    },
    {
        "id": "eb7fd5e1.688b68",
        "type": "debug",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 572.0142135620117,
        "y": 120.00567054748535,
        "wires": []
    },
    {
        "id": "6a35b6f9.ecd878",
        "type": "json",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 418.0142135620117,
        "y": 162.00567626953125,
        "wires": [
            [
                "eb7fd5e1.688b68",
                "904efe22.796c"
            ]
        ]
    },
    {
        "id": "904efe22.796c",
        "type": "function",
        "z": "ccd8ad10.a1f6a",
        "name": "añade fecha",
        "func": "msg.payload.date=new Date();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 574.0142059326172,
        "y": 163.0056791305542,
        "wires": [
            [
                "ef7e002a.1aedd"
            ]
        ]
    },
    {
        "id": "ef7e002a.1aedd",
        "type": "mongodb out",
        "z": "ccd8ad10.a1f6a",
        "mongodb": "3752afa1.deaf9",
        "name": "",
        "collection": "test_descarga",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 856.0142135620117,
        "y": 162.00567817687988,
        "wires": []
    },
    {
        "id": "e97b432c.ad89c",
        "type": "inject",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 195.78974151611328,
        "y": 275.9715337753296,
        "wires": [
            [
                "5072d0ad.9eae5"
            ]
        ]
    },
    {
        "id": "5072d0ad.9eae5",
        "type": "mongodb in",
        "z": "ccd8ad10.a1f6a",
        "mongodb": "3752afa1.deaf9",
        "name": "",
        "collection": "test_descarga",
        "operation": "find",
        "x": 512.7868957519531,
        "y": 275.6988248825073,
        "wires": [
            [
                "21360331.5e623c"
            ]
        ]
    },
    {
        "id": "21360331.5e623c",
        "type": "debug",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 830,
        "y": 280,
        "wires": []
    },
    {
        "id": "553b3a49.aa67b4",
        "type": "http response",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "statusCode": "",
        "headers": {
            "Content-Disposition": "attachment; filename=registros.csv"
        },
        "x": 1145.9997367858887,
        "y": 583.000057220459,
        "wires": []
    },
    {
        "id": "a398a3af.87a8e",
        "type": "function",
        "z": "ccd8ad10.a1f6a",
        "name": "Unicode y separador",
        "func": "//add Unicode BOM character (byte order mark) to make EXCEL knows this is UTF-8\nif(global.get(\"separador_decimal\")==\"punto\")\n{\n    msg.payload='\\ufeff'+msg.payload;\n\n}\nelse\n{\n    msg.payload='\\ufeff'+(msg.payload).replace(/\\./g,\",\");\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 975.9998626708984,
        "y": 582.9999866485596,
        "wires": [
            [
                "553b3a49.aa67b4"
            ]
        ]
    },
    {
        "id": "d04c9d5b.0eff5",
        "type": "function",
        "z": "ccd8ad10.a1f6a",
        "name": "consulta",
        "func": "// fecha por defecto es hoy\nvar ahora = new Date();\n// pillo los globales si los hay, si no la fecha de hoy\nvar desde = new Date(global.get(\"desde\") || ahora);\nvar hasta = new Date(global.get(\"hasta\") || ahora); \n// el día de inicio desde las cero horas\nvar inicio = new Date(desde.getFullYear(),desde.getMonth(),desde.getDate(),0,0,0,0);\n// el día final es hasta final del día\nvar final = new Date(hasta.getFullYear(),hasta.getMonth(),hasta.getDate(),23,59,59,999);\n\nmsg.payload=\n[\n    { \"$match\": { \"date\": { \"$gte\": inicio , \"$lte\": final } } },\n    { \"$project\": {\n        \"_id\": 0,\n        \"date\": 1,\n        \"temperatura\": \"$BME280.Temperatura\",\n        \"humedad\": \"$BME280.Humedad\",\n        \"presion\": \"$BME280.Presion\"\n        }\n    },\n    { \"$sort\": {\"date\": 1} }\n];\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 254.00003814697266,
        "y": 583.0000076293945,
        "wires": [
            [
                "bc56c48b.90e4d8"
            ]
        ]
    },
    {
        "id": "d237b5f9.3d4858",
        "type": "http in",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "url": "/registros",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 91,
        "y": 582.9999866485596,
        "wires": [
            [
                "d04c9d5b.0eff5"
            ]
        ]
    },
    {
        "id": "2bc79054.4dac6",
        "type": "ui_template",
        "z": "ccd8ad10.a1f6a",
        "group": "a34ffe7a.04009",
        "name": "",
        "order": 3,
        "width": "0",
        "height": "0",
        "format": "<style>\n.button {\n    text-align: center;\n    font: bold 17px Arial;\n    text-decoration: none;\n    background-color: #339966;\n    color: white;\n    padding: 8px 10px;\n    border: 2px solid #CCCCCC;\n  }\n  \n  .button:hover\n  {\n   background-color: #26734d;\n  }\n\n</style>\n<a href=\"/registros\" class=\"button\">Descarga registros en CSV (EXCEL)</a>\n",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 110.0000228881836,
        "y": 474.9998197555542,
        "wires": [
            []
        ]
    },
    {
        "id": "bc56c48b.90e4d8",
        "type": "mongodb in",
        "z": "ccd8ad10.a1f6a",
        "mongodb": "3752afa1.deaf9",
        "name": "",
        "collection": "test_descarga",
        "operation": "aggregate",
        "x": 539.0142211914062,
        "y": 583.0056686401367,
        "wires": [
            [
                "a0152c6f.68517"
            ]
        ]
    },
    {
        "id": "a0152c6f.68517",
        "type": "csv",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "sep": ";",
        "hdrin": "",
        "hdrout": true,
        "multi": "one",
        "ret": "\\r\\n",
        "temp": "date, temperatura, humedad, presion",
        "skip": 0,
        "x": 795.0000076293945,
        "y": 582.999963760376,
        "wires": [
            [
                "a398a3af.87a8e"
            ]
        ]
    },
    {
        "id": "5ba69690.6f3a28",
        "type": "ui_switch",
        "z": "ccd8ad10.a1f6a",
        "name": "separdor decimal",
        "label": "{{msg.topic}}",
        "tooltip": "",
        "group": "a34ffe7a.04009",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 176.00296020507812,
        "y": 1087.9770593643188,
        "wires": [
            [
                "96e33153.98e75"
            ]
        ]
    },
    {
        "id": "64d25d3f.5e61c4",
        "type": "inject",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 157.00002670288086,
        "y": 1010.8889408111572,
        "wires": [
            [
                "96e33153.98e75"
            ]
        ]
    },
    {
        "id": "96e33153.98e75",
        "type": "function",
        "z": "ccd8ad10.a1f6a",
        "name": "set global separador_decimal",
        "func": "if(msg.payload===true)\n{\n    global.set(\"separador_decimal\",\"coma\");\n    msg.topic=\"separador decimal = coma\";\n}\nelse\n{\n    global.set(\"separador_decimal\",\"punto\");\n    msg.topic=\"separador decimal = punto\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 485.01141357421875,
        "y": 1011.5963134765625,
        "wires": [
            [
                "5ba69690.6f3a28"
            ]
        ]
    },
    {
        "id": "fc86581d.721438",
        "type": "ui_date_picker",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "label": "Fecha inicio",
        "group": "a34ffe7a.04009",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "",
        "x": 313.7812728881836,
        "y": 778.7330231666565,
        "wires": [
            [
                "36e52eff.e79652"
            ]
        ]
    },
    {
        "id": "b5ec6fbf.5c7b8",
        "type": "ui_date_picker",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "label": "Fecha final",
        "group": "a34ffe7a.04009",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "",
        "x": 316.7926254272461,
        "y": 827.7272605895996,
        "wires": [
            [
                "32225963.2490f6"
            ]
        ]
    },
    {
        "id": "36e52eff.e79652",
        "type": "change",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "desde",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 509.78694915771484,
        "y": 777.3949108123779,
        "wires": [
            []
        ]
    },
    {
        "id": "32225963.2490f6",
        "type": "change",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hasta",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 513.0142288208008,
        "y": 828.2784652709961,
        "wires": [
            []
        ]
    },
    {
        "id": "13b2662f.d6754a",
        "type": "inject",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 115.7897720336914,
        "y": 803.1534633636475,
        "wires": [
            [
                "fc86581d.721438",
                "b5ec6fbf.5c7b8"
            ]
        ]
    },
    {
        "id": "b05d4923.ea6ff8",
        "type": "comment",
        "z": "ccd8ad10.a1f6a",
        "name": "Almacenamiento en base de datos",
        "info": "",
        "x": 227.7897491455078,
        "y": 73.08806610107422,
        "wires": []
    },
    {
        "id": "3e06173c.94cdb8",
        "type": "comment",
        "z": "ccd8ad10.a1f6a",
        "name": "Controles para seleccionar fechas",
        "info": "",
        "x": 172.7897605895996,
        "y": 706.630747795105,
        "wires": []
    },
    {
        "id": "8f0fda03.1a7698",
        "type": "comment",
        "z": "ccd8ad10.a1f6a",
        "name": "Botón en HTML para lanzar descarga de fichero",
        "info": "",
        "x": 219.78977966308594,
        "y": 427.08227348327637,
        "wires": []
    },
    {
        "id": "7aa4e397.e0472c",
        "type": "comment",
        "z": "ccd8ad10.a1f6a",
        "name": "Flujo para descarga de fichero",
        "info": "",
        "x": 162.0142059326172,
        "y": 525.0056400299072,
        "wires": []
    },
    {
        "id": "243ebda4.07bf32",
        "type": "comment",
        "z": "ccd8ad10.a1f6a",
        "name": "Selector de separador decimal",
        "info": "",
        "x": 169.01419067382812,
        "y": 950.5510654449463,
        "wires": []
    },
    {
        "id": "e0c0c223.1a6a7",
        "type": "mqtt in",
        "z": "ccd8ad10.a1f6a",
        "name": "",
        "topic": "iot/datos/json",
        "qos": "2",
        "datatype": "auto",
        "broker": "2b251178.95ad2e",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 210,
        "y": 160,
        "wires": [
            [
                "6a35b6f9.ecd878"
            ]
        ]
    },
    {
        "id": "21f9347e8aef3828",
        "type": "http response",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "OTA Response",
        "statusCode": "",
        "headers": {},
        "x": 1560,
        "y": 300,
        "wires": []
    },
    {
        "id": "d2824f6f609c0386",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "OTA Manager",
        "url": "/upload-into-database",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 160,
        "wires": [
            [
                "62515f6e3d807c47"
            ]
        ]
    },
    {
        "id": "bda262cf2eaa8c3a",
        "type": "file in",
        "z": "122f65d809b34d8e",
        "name": "Read firmware",
        "filename": "filename",
        "filenameType": "msg",
        "format": "utf8",
        "encoding": "utf8",
        "allProps": false,
        "x": 780,
        "y": 240,
        "wires": [
            [
                "46f6454f8d3bdb92"
            ]
        ]
    },
    {
        "id": "4b0e1b8ee55ee3dc",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Extract filename",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "firmware.directory",
                "tot": "flow"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": "req.files.firmware[0].originalname",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "req",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "res",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 240,
        "wires": [
            [
                "bda262cf2eaa8c3a"
            ]
        ]
    },
    {
        "id": "fb39343aee052faa",
        "type": "comment",
        "z": "122f65d809b34d8e",
        "name": "MongoDB upload",
        "info": "",
        "x": 100,
        "y": 60,
        "wires": []
    },
    {
        "id": "75f8dc9625317378",
        "type": "template",
        "z": "122f65d809b34d8e",
        "name": "Firmware Manager",
        "field": "payload",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <title>Database File Manager</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <link rel=\"stylesheet\" href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\">\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"></script>\n        <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n        <style>\n            .file-btn-grp {\n                display: none;\n            }\n            body {\n                background-color: #f6f6f6;\n            }\n            .text_holder {\n                display: block;\n                max-width: 100%;\n                word-wrap: break-word;\n                line-height: 30px;\n            }\n            #main {\n                margin-top: 50px;\n                background-color: #ffffff;\n                border-radius: 5px;\n                width: 70%;\n                min-width: 500px;\n                border: 1px solid #545454;\n            }\n            .alert {\n                margin-top: 10px;\n                margin-bottom: 5px;\n            }\n            .link {\n                font-style: italic;\n            }\n            .listentry {\n                display: none;\n                list-style-type: none;\n            }\n        </style>\n\n    </head>\n    <body>\n        <div class=\"container\" id=\"main\">\n            <h1><small>Database File Manager</small></h1>\n            <h2><small>Upload New Files</small></h2>\n<form action=\"test\" method=\"POST\">\n    <label for=\"cars\">Choose a collection:</label>\n    <select name=\"cars\" id=\"cars\">\n    <option value=\"test2\">test2</option>\n    <option value=\"test3\">test3</option>\n    <option value=\"test4\">test4</option>\n    <option value=\"test5\">test5</option>\n  </select>\n    <br><br>\n    <input type=\"submit\" value=\"Submit\">\n</form>\n            <form role =\"form\" id=\"main_input_box\" action=\"upload-into-database\" method=\"POST\" enctype=\"multipart/form-data\" class=\"form-inline\">\n                <input type=\"file\" accept=\".txt\" class=\"hidden\" id=\"fileUpload\" name=\"firmware\" placeholder=\"firmware.bin\">\n                <div class=\"form-group\">\n                <div class=\"input-group\">\n                    <span class=\"input-group-btn\">\n                        <button id=\"browse\" type=\"button\" class=\"btn btn-primary\">Browse...</button>\n                    </span>\n                    <input id=\"filename\" size=100 readonly=\"\" class=\"form-control\" placeholder=\"File\">\n                    <span class=\"input-group-btn\">\n                        <input type=\"submit\" value=\"Upload\" class=\"btn btn-primary add_button\">\n                    </span>\n                </div>\n                </div>\n            </form>\n\n            <h2><small>Current Files</small></h2>\n            <ul class=\"list-group\" id=\"list_of_items\">\n            </ul>\n        </div>\n\n        <div id=\"linkModal\" class=\"modal fade\" role=\"dialog\">\n            <div class=\"modal-dialog\">\n        \n                <!-- Modal content-->\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n                        <h4 class=\"modal-title\">Create Symbolic Link</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form class=\"form-horizontal\" id=\"linkForm\" role=\"form\" action=\"#\" method=\"POST\">\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkName\">Link:</label> \n                                <div class=\"col-sm-10\">\n                                    <input id=\"linkName\" name=\"linkName\" class=\"form-control\"/>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkFile\">To:</label> \n                                <div class=\"col-sm-10\">\n                                    <input class=\"form-control\" id=\"linkFile\" name=\"linkFile\"/>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"submit\" class=\"btn btn-success link-create\">Create</button>\n                        <button type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <script>\n\n            var deleteButton = \"<button id='delete' class='btn btn-warning'>Delete</button>\";\n            var linkButton = \"<button id='link' class='btn btn-success'>Link</button>\";\n            var oneButton = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + \"</div>\";\n            var twoButtons = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + linkButton + \"</div>\";\n            \n            function addListEntry(list, filename, linkname) {\n            \n                var entry;\n                \n                if (linkname === undefined) {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span>\" \n                    + filename + \"</span>\" + twoButtons + \"</div></li>\");\n                } else {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span class='link'>\" \n                    + filename + \"</span> <span class='glyphicon glyphicon-arrow-right'></span> \" \n                    + linkname + oneButton + \"</div></li>\");\n                }\n                \n                entry.mouseover(function(){\n                    $(this).find(\".btn-group\").fadeIn(\"fast\");\n                });\n                entry.mouseleave(function(){\n                    $(this).find(\".btn-group\").fadeOut(\"slow\");\n                });\n                \n                entry.on(\"click\", \"button#delete\", function(){\n                    var listItem = this.parentElement.parentElement.parentElement;\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $.ajax({\n                        type: 'DELETE',\n                        data: {\"filename\": file},\n                        success: function(result) {\n                            $(listItem).fadeOut(\"slow\", function(){\n                                listItem.remove();\n                            });\n                        },\n                        error: function(result) {\n                            $(listItem).append(\"<div class='alert alert-danger'>\"\n                                + \"<a href='#' class='close' data-dismiss='alert'\"\n                                + \"aria-label='close'>&times;</a>\"\n                                + result.responseText + \"</div>\");\n                        }\n                    });\n                });\n           \n                entry.on(\"click\", \"button#link\", function(){\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $(\"#linkName\").val(\"\");\n                    $(\"#linkFile\").prop(\"disabled\", true).val(file);\n                    $(\"#linkName\").parent().removeClass(\"has-error\");\n                    $(\"#linkModal\").modal();\n                    $('#linkModal').on('shown.bs.modal', function () {\n                        $('#linkName').focus();\n                    });\n                });\n                \n                if (list.children().length == 0) {\n                    list.append(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n\n                if (filename < $(\"li:first span:first\", list).text()) {\n                    $(\"li:first\", list).before(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                if (filename > $(\"li:last span:first\", list).text()) {\n                    $(\"li:last\", list).after(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                \n                var count = 0;\n                var $li = $(\"li\", list);\n                do {\n                    var index = parseInt($li.length / 2);\n                    var $compare = $li.eq(index);\n                    var compare = $(\"span:first\",$compare).text();\n                    if (filename === compare) {\n                        break;\n                    }\n                    else if (filename > compare) {\n                        $li = $li.slice(index, $li.length);\n                    } else {\n                        $li = $li.slice(0, index);\n                    }\n                } while ($li.length > 1);\n\n                if (filename === compare) {\n                    $compare.slideUp(\"fast\").slideDown(\"slow\");\n                    return;\n                } else if (filename < compare) { \n                    entry.insertBefore($compare); \n                } else { \n                    entry.insertAfter($compare); \n                }\n                entry.slideDown(\"slow\");\n            }\n            \n            \n            var files = String(\"{{payload.files}}\").split(',');\n            var links = String(\"{{payload.links}}\").split(',');\n            \n            var list_of_items = $(\"#list_of_items\");\n            \n            files.forEach(function(file,index) {\n                if (links[index] == \"\") {\n                    addListEntry(this, file.slice(0,-4));\n                } else {\n                    addListEntry(this, file.slice(0,-4), links[index].slice(0,-4));\n                }\n            },list_of_items);\n           \n           \n            $(\"#linkModal\").on(\"click\", \"button.link-create\", function(event){\n               event.preventDefault();\n               if ($(\"#linkName\").val() == \"\") {\n                    $('#linkName').focus();\n                    $('#linkName').parent().addClass(\"has-error\");\n                    return false;\n               }\n               $(\"#linkFile\").prop(\"disabled\",false);               \n               $.ajax({\n                    type: 'PUT',\n                    data: $(\"#linkForm\").serialize(),\n                    success: function(result) {\n                        $(\"#linkModal\").modal('hide');\n                        addListEntry(list_of_items, $('#linkName').val(), $('#linkFile').val());\n                    },\n                    error: function(result) {\n                        $(\"#linkFile\").prop(\"disabled\", true);\n                        $('#linkName').focus();\n                        $('#linkName').parent().addClass(\"has-error\");\n                        $(linkForm).append(\"<div id='linkError' class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n                });\n            });\n            \n            $(\"#browse\").on('click', function () {\n                fileUpload.click();\n            });\n            \n            $(\"#fileUpload\").on('change', function () {\n                $(\"#filename\").val($(\"#fileUpload\").val().split('/').pop().split('\\\\').pop());\n            });\n            \n            var frm = $(\"#main_input_box\");\n            \n            frm.submit( function( e ) {\n                e.preventDefault();\n                if ($('#fileUpload').val() == \"\") return null;\n                $.ajax( {\n                    url: frm.attr('action'),\n                    type: frm.attr('method'),\n                    data: new FormData( this ),\n                    processData: false,\n                    contentType: false,\n                    success: function(result) {\n                        addListEntry(list_of_items, $('#fileUpload').val().slice(0,-4).split('\\\\').pop());\n                        $('#fileUpload').val('');\n                        $(':text').val('');\n                    },\n                    error: function(result) {\n                        $(\"#main_input_box\").append(\"<div class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n\n                });\n            });\n            //form=document.getElementById(\"my_options\");\n            //function askForChange() {\n            //form.action=\"test\";\n            //form.submit();\n            //}\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 670,
        "y": 160,
        "wires": [
            [
                "b4b83576edf903b5"
            ]
        ]
    },
    {
        "id": "cab2d982dca2c30f",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "OTA Delete",
        "url": "/upload-into-database",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 480,
        "wires": [
            [
                "d20bc9138a0169be"
            ]
        ]
    },
    {
        "id": "10a5ab5dcfc58f1b",
        "type": "catch",
        "z": "122f65d809b34d8e",
        "name": "File Error",
        "scope": [
            "e28249513db9b6d9",
            "577364685ab43781",
            "cb89692e72e4a1a9",
            "bc3bb6ffb291288e",
            "4ab20d5b0eb3589e"
        ],
        "x": 80,
        "y": 340,
        "wires": [
            [
                "baf996edda360108"
            ]
        ]
    },
    {
        "id": "baf996edda360108",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "statusCode",
                "pt": "msg",
                "to": "500",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 340,
        "wires": [
            [
                "2757674848698812"
            ]
        ]
    },
    {
        "id": "83cd387005aedfca",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Change to MD5 filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.filename",
                "pt": "msg",
                "from": "bin",
                "fromt": "str",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 480,
        "wires": [
            [
                "577364685ab43781"
            ]
        ]
    },
    {
        "id": "5163f3c78ba48b6d",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "OTA Link",
        "url": "/upload-into-database",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 80,
        "y": 400,
        "wires": [
            [
                "ad13d04db5f53905"
            ]
        ]
    },
    {
        "id": "ad13d04db5f53905",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Extract filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.linkName",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".bin",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.linkFile",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".txt",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 400,
        "wires": [
            [
                "cb89692e72e4a1a9"
            ]
        ]
    },
    {
        "id": "90b8bceb32c9c7c8",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Change to MD5 Filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.linkName",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.linkFile",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 400,
        "wires": [
            [
                "bc3bb6ffb291288e"
            ]
        ]
    },
    {
        "id": "d20bc9138a0169be",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Extract filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".txt",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 480,
        "wires": [
            [
                "e28249513db9b6d9",
                "229b68c9527f20eb"
            ]
        ]
    },
    {
        "id": "cb89692e72e4a1a9",
        "type": "fs-ops-move",
        "z": "122f65d809b34d8e",
        "name": "Link firmware",
        "sourcePath": "",
        "sourcePathType": "str",
        "sourceFilename": "payload.linkFile",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "payload.linkName",
        "destFilenameType": "msg",
        "link": true,
        "x": 590,
        "y": 400,
        "wires": [
            [
                "90b8bceb32c9c7c8"
            ]
        ]
    },
    {
        "id": "bc3bb6ffb291288e",
        "type": "fs-ops-move",
        "z": "122f65d809b34d8e",
        "name": "Link MD5",
        "sourcePath": "",
        "sourcePathType": "str",
        "sourceFilename": "payload.linkFile",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "payload.linkName",
        "destFilenameType": "msg",
        "link": true,
        "x": 1060,
        "y": 400,
        "wires": [
            [
                "9830d71cb39f6027"
            ]
        ]
    },
    {
        "id": "e28249513db9b6d9",
        "type": "fs-ops-delete",
        "z": "122f65d809b34d8e",
        "name": "Delete firmware",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.filename",
        "filenameType": "msg",
        "x": 600,
        "y": 480,
        "wires": [
            [
                "83cd387005aedfca"
            ]
        ]
    },
    {
        "id": "577364685ab43781",
        "type": "fs-ops-delete",
        "z": "122f65d809b34d8e",
        "name": "Delete MD5 Hash",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.filename",
        "filenameType": "msg",
        "x": 1090,
        "y": 480,
        "wires": [
            [
                "9e5f7be850106284"
            ]
        ]
    },
    {
        "id": "f463a024845ffd4d",
        "type": "fs-ops-link",
        "z": "122f65d809b34d8e",
        "name": "Get Links",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.files",
        "filenameType": "msg",
        "link": "payload.links",
        "linkType": "msg",
        "x": 460,
        "y": 160,
        "wires": [
            [
                "75f8dc9625317378"
            ]
        ]
    },
    {
        "id": "62515f6e3d807c47",
        "type": "fs-ops-dir",
        "z": "122f65d809b34d8e",
        "name": "Firmware listing",
        "path": "firmware.directory",
        "pathType": "flow",
        "filter": "*.txt",
        "filterType": "str",
        "dir": "payload.files",
        "dirType": "msg",
        "x": 280,
        "y": 160,
        "wires": [
            [
                "f463a024845ffd4d"
            ]
        ]
    },
    {
        "id": "4ce9f93ab2d5cb33",
        "type": "httpInMultipart",
        "z": "122f65d809b34d8e",
        "name": "OTA Upload",
        "url": "/upload-into-database",
        "method": "post",
        "fields": "[{ \"name\": \"firmware\"}]",
        "swaggerDoc": "",
        "x": 90,
        "y": 240,
        "wires": [
            [
                "4ab20d5b0eb3589e"
            ]
        ]
    },
    {
        "id": "67d2b0e7ed804d0b",
        "type": "mongodb out",
        "z": "122f65d809b34d8e",
        "mongodb": "6046a47177835823",
        "name": "Load file into database",
        "collection": "{{flow.database.name}}",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 1180,
        "y": 240,
        "wires": []
    },
    {
        "id": "4ab20d5b0eb3589e",
        "type": "fs-ops-move",
        "z": "122f65d809b34d8e",
        "name": "Store firmware",
        "sourcePath": "req.files.firmware[0].destination",
        "sourcePathType": "msg",
        "sourceFilename": "req.files.firmware[0].filename",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "req.files.firmware[0].originalname",
        "destFilenameType": "msg",
        "link": false,
        "x": 280,
        "y": 240,
        "wires": [
            [
                "ed09f8e811dd3ebb",
                "a338d691dbcbcc95",
                "4b0e1b8ee55ee3dc"
            ]
        ]
    },
    {
        "id": "574e891f993fcb91",
        "type": "inject",
        "z": "122f65d809b34d8e",
        "g": "0888e7373481d35e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 890,
        "y": 700,
        "wires": [
            [
                "c8ba76d152d7366a"
            ]
        ]
    },
    {
        "id": "c8ba76d152d7366a",
        "type": "mongodb out",
        "z": "122f65d809b34d8e",
        "g": "0888e7373481d35e",
        "mongodb": "6046a47177835823",
        "name": "",
        "collection": "test",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 1110,
        "y": 700,
        "wires": []
    },
    {
        "id": "46f6454f8d3bdb92",
        "type": "function",
        "z": "122f65d809b34d8e",
        "name": "Format JSON",
        "func": "msg.payload = JSON.parse(msg.payload);\nmsg.filename = flow.get(\"original_name\");;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 240,
        "wires": [
            [
                "67d2b0e7ed804d0b",
                "5f8702cdecbebdd1"
            ]
        ]
    },
    {
        "id": "b4b83576edf903b5",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "e8c6e9ffed7b9a38"
        ],
        "x": 835,
        "y": 160,
        "wires": []
    },
    {
        "id": "e8c6e9ffed7b9a38",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 17",
        "links": [
            "b4b83576edf903b5",
            "13e5a65e6bd44eda"
        ],
        "x": 1365,
        "y": 220,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "ed09f8e811dd3ebb",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "a2b9b895f1a88888"
        ],
        "x": 415,
        "y": 200,
        "wires": []
    },
    {
        "id": "a2b9b895f1a88888",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 18",
        "links": [
            "ed09f8e811dd3ebb"
        ],
        "x": 1365,
        "y": 260,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "8d9f6656f8f37055",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 19",
        "links": [
            "2757674848698812"
        ],
        "x": 1365,
        "y": 300,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "2757674848698812",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "8d9f6656f8f37055"
        ],
        "x": 425,
        "y": 340,
        "wires": []
    },
    {
        "id": "9e5f7be850106284",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "5baf45c3e6032233"
        ],
        "x": 1225,
        "y": 480,
        "wires": []
    },
    {
        "id": "9830d71cb39f6027",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 6",
        "mode": "link",
        "links": [
            "20ec2a5a24d52017"
        ],
        "x": 1225,
        "y": 400,
        "wires": []
    },
    {
        "id": "20ec2a5a24d52017",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 20",
        "links": [
            "9830d71cb39f6027"
        ],
        "x": 1365,
        "y": 340,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "5baf45c3e6032233",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 21",
        "links": [
            "9e5f7be850106284"
        ],
        "x": 1365,
        "y": 380,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "78dabba95c4207d3",
        "type": "config",
        "z": "122f65d809b34d8e",
        "name": "Database Config",
        "properties": [
            {
                "p": "firmware.directory",
                "pt": "flow",
                "to": "/home/rhyloo/OTA/",
                "tot": "str"
            },
            {
                "p": "database.name",
                "pt": "flow",
                "to": "test",
                "tot": "str"
            }
        ],
        "active": true,
        "x": 330,
        "y": 60,
        "wires": []
    },
    {
        "id": "b36aa30.3a7276",
        "type": "http request",
        "z": "122f65d809b34d8e",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "url": "",
        "x": 970,
        "y": 760,
        "wires": [
            [
                "1ef9987c.956c78"
            ]
        ]
    },
    {
        "id": "11167f67.5d5031",
        "type": "inject",
        "z": "122f65d809b34d8e",
        "name": "cars on craigslist",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "http://localhost:1880/upload-into-database",
        "payloadType": "str",
        "x": 640,
        "y": 760,
        "wires": [
            [
                "70154cd4.de1444"
            ]
        ]
    },
    {
        "id": "70154cd4.de1444",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 760,
        "wires": [
            [
                "b36aa30.3a7276"
            ]
        ]
    },
    {
        "id": "1ef9987c.956c78",
        "type": "debug",
        "z": "122f65d809b34d8e",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 1130,
        "y": 760,
        "wires": []
    },
    {
        "id": "a338d691dbcbcc95",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "original_name",
                "pt": "flow",
                "to": "req.files.firmware[0].originalname",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 280,
        "wires": [
            [
                "8c7f90b7fc20034e"
            ]
        ]
    },
    {
        "id": "229b68c9527f20eb",
        "type": "mongodb out",
        "z": "122f65d809b34d8e",
        "mongodb": "6046a47177835823",
        "name": "Remove file from database",
        "collection": "flow.database.name",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 600,
        "y": 560,
        "wires": []
    },
    {
        "id": "5f8702cdecbebdd1",
        "type": "debug",
        "z": "122f65d809b34d8e",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1140,
        "y": 300,
        "wires": []
    },
    {
        "id": "ba5bdf24521f902e",
        "type": "mongodb out",
        "z": "122f65d809b34d8e",
        "mongodb": "6046a47177835823",
        "name": "Remove file from database",
        "collection": "flow.database.name",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 900,
        "y": 320,
        "wires": []
    },
    {
        "id": "8c7f90b7fc20034e",
        "type": "function",
        "z": "122f65d809b34d8e",
        "name": "Get name",
        "func": "var name = flow.get(\"original_name\");\nmsg.payload = JSON.parse('{\"filename\":\"' + name + '\"}');\nreturn msg;\n'{\"firstName\": \"John\",\"lastName\": \"Doe\",\"location\": \"New York\"}'",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 280,
        "wires": [
            [
                "ba5bdf24521f902e"
            ]
        ]
    },
    {
        "id": "4ccb8e8716f24a2a",
        "type": "debug",
        "z": "122f65d809b34d8e",
        "name": "debug 10",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 480,
        "y": 680,
        "wires": []
    },
    {
        "id": "8bd48ac4766a807d",
        "type": "function",
        "z": "122f65d809b34d8e",
        "name": "function 14",
        "func": "msg.req = { \"_readableState\": { \"objectMode\": false, \"highWaterMark\": 16384, \"buffer\": { \"head\": null, \"tail\": null, \"length\": 0 }, \"length\": 0, \"pipes\": [], \"flowing\": null, \"ended\": true, \"endEmitted\": false, \"reading\": false, \"constructed\": true, \"sync\": true, \"needReadable\": false, \"emittedReadable\": false, \"readableListening\": false, \"resumeScheduled\": false, \"errorEmitted\": false, \"emitClose\": true, \"autoDestroy\": true, \"destroyed\": false, \"errored\": null, \"closed\": false, \"closeEmitted\": false, \"defaultEncoding\": \"utf8\", \"awaitDrainWriters\": null, \"multiAwaitDrain\": false, \"readingMore\": true, \"dataEmitted\": false, \"decoder\": null, \"encoding\": null }, \"_events\": {}, \"_eventsCount\": 1, \"socket\": \"[internal]\", \"httpVersionMajor\": 1, \"httpVersionMinor\": 1, \"httpVersion\": \"1.1\", \"complete\": true, \"rawHeaders\": [\"Host\", \"localhost:1880\", \"User-Agent\", \"Mozilla/5.0 (X11; Linux x86_64; rv:106.0) Gecko/20100101 Firefox/106.0\", \"Accept\", \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\", \"Accept-Language\", \"en-US,en;q=0.5\", \"Accept-Encoding\", \"gzip, deflate, br\", \"Connection\", \"keep-alive\", \"Upgrade-Insecure-Requests\", \"1\", \"Sec-Fetch-Dest\", \"document\", \"Sec-Fetch-Mode\", \"navigate\", \"Sec-Fetch-Site\", \"none\", \"Sec-Fetch-User\", \"?1\", \"If-None-Match\", \"W/\\\"3128-qMtiVcwBVBzxIdUCUeE/ULHRlsg\\\"\"], \"rawTrailers\": [], \"aborted\": false, \"upgrade\": false, \"url\": \"/upload-into-database\", \"method\": \"GET\", \"statusCode\": null, \"statusMessage\": null, \"client\": \"[internal]\", \"_consuming\": false, \"_dumped\": false, \"baseUrl\": \"\", \"originalUrl\": \"/upload-into-database\", \"_parsedUrl\": { \"protocol\": null, \"slashes\": null, \"auth\": null, \"host\": null, \"port\": null, \"hostname\": null, \"hash\": null, \"search\": null, \"query\": null, \"pathname\": \"/upload-into-database\", \"path\": \"/upload-into-database\", \"href\": \"/upload-into-database\", \"_raw\": \"/upload-into-database\" }, \"params\": {}, \"query\": { \"files\": [\"acertijo.txt\", \"test.txt\"], \"links\": [\"\", \"\"] }, \"res\": \"[internal]\", \"body\": {}, \"_parsedOriginalUrl\": { \"protocol\": null, \"slashes\": null, \"auth\": null, \"host\": null, \"port\": null, \"hostname\": null, \"hash\": null, \"search\": null, \"query\": null, \"pathname\": \"/upload-into-database\", \"path\": \"/upload-into-database\", \"href\": \"/upload-into-database\", \"_raw\": \"/upload-into-database\" }, \"route\": { \"path\": \"/upload-into-database\", \"stack\": [{ \"name\": \"cookieParser\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"httpMiddleware\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"corsHandler\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"metricsHandler\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"<anonymous>\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"<anonymous>\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }], \"methods\": { \"get\": true } }, \"cookies\": {}, \"signedCookies\": {} };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 620,
        "wires": [
            [
                "6e6303ec1355dd7b"
            ]
        ]
    },
    {
        "id": "3ea1869ededca123",
        "type": "function",
        "z": "122f65d809b34d8e",
        "name": "function 15",
        "func": "flow.set(\"database.name\", msg.payload.cars); \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 680,
        "wires": [
            [
                "4ccb8e8716f24a2a"
            ]
        ]
    },
    {
        "id": "6e6303ec1355dd7b",
        "type": "fs-ops-dir",
        "z": "122f65d809b34d8e",
        "name": "Firmware listing",
        "path": "firmware.directory",
        "pathType": "flow",
        "filter": "*.txt",
        "filterType": "str",
        "dir": "payload.files",
        "dirType": "msg",
        "x": 500,
        "y": 620,
        "wires": [
            [
                "a29930999c9591dd"
            ]
        ]
    },
    {
        "id": "a29930999c9591dd",
        "type": "fs-ops-link",
        "z": "122f65d809b34d8e",
        "name": "Get Links",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.files",
        "filenameType": "msg",
        "link": "payload.links",
        "linkType": "msg",
        "x": 720,
        "y": 620,
        "wires": [
            [
                "7c32016dc0bd0ac8"
            ]
        ]
    },
    {
        "id": "13e5a65e6bd44eda",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 7",
        "mode": "link",
        "links": [
            "e8c6e9ffed7b9a38"
        ],
        "x": 1095,
        "y": 620,
        "wires": []
    },
    {
        "id": "eb17e5a1f3da02dc",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "OTA Manager",
        "url": "/test",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 620,
        "wires": [
            [
                "8bd48ac4766a807d"
            ]
        ]
    },
    {
        "id": "08fcca7c8fe2ad73",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "",
        "url": "/test",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 80,
        "y": 680,
        "wires": [
            [
                "8bd48ac4766a807d",
                "3ea1869ededca123"
            ]
        ]
    },
    {
        "id": "7c32016dc0bd0ac8",
        "type": "template",
        "z": "122f65d809b34d8e",
        "name": "Firmware Manager",
        "field": "payload",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <title>Database File Manager</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <link rel=\"stylesheet\" href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\">\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"></script>\n        <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n        <style>\n            .file-btn-grp {\n                display: none;\n            }\n            body {\n                background-color: #f6f6f6;\n            }\n            .text_holder {\n                display: block;\n                max-width: 100%;\n                word-wrap: break-word;\n                line-height: 30px;\n            }\n            #main {\n                margin-top: 50px;\n                background-color: #ffffff;\n                border-radius: 5px;\n                width: 70%;\n                min-width: 500px;\n                border: 1px solid #545454;\n            }\n            .alert {\n                margin-top: 10px;\n                margin-bottom: 5px;\n            }\n            .link {\n                font-style: italic;\n            }\n            .listentry {\n                display: none;\n                list-style-type: none;\n            }\n        </style>\n\n    </head>\n    <body>\n        <div class=\"container\" id=\"main\">\n            <h1><small>Database File Manager</small></h1>\n            <h2><small>Upload New Files</small></h2>\n<form action=\"test\" method=\"POST\">\n    <label for=\"cars\">Choose a collection:</label>\n    <select name=\"cars\" id=\"cars\">\n    <option value=\"test2\">test2</option>\n    <option value=\"test3\">test3</option>\n    <option value=\"test4\">test4</option>\n    <option value=\"test5\">test5</option>\n  </select>\n    <br><br>\n    <input type=\"submit\" value=\"Submit\">\n</form>\n            <form role =\"form\" id=\"main_input_box\" action=\"upload-into-database\" method=\"POST\" enctype=\"multipart/form-data\" class=\"form-inline\">\n                <input type=\"file\" accept=\".txt\" class=\"hidden\" id=\"fileUpload\" name=\"firmware\" placeholder=\"firmware.bin\">\n                <div class=\"form-group\">\n                <div class=\"input-group\">\n                    <span class=\"input-group-btn\">\n                        <button id=\"browse\" type=\"button\" class=\"btn btn-primary\">Browse...</button>\n                    </span>\n                    <input id=\"filename\" size=100 readonly=\"\" class=\"form-control\" placeholder=\"File\">\n                    <span class=\"input-group-btn\">\n                        <input type=\"submit\" value=\"Upload\" class=\"btn btn-primary add_button\">\n                    </span>\n                </div>\n                </div>\n            </form>\n\n            <h2><small>Current Files</small></h2>\n            <ul class=\"list-group\" id=\"list_of_items\">\n            </ul>\n        </div>\n\n        <div id=\"linkModal\" class=\"modal fade\" role=\"dialog\">\n            <div class=\"modal-dialog\">\n        \n                <!-- Modal content-->\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n                        <h4 class=\"modal-title\">Create Symbolic Link</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form class=\"form-horizontal\" id=\"linkForm\" role=\"form\" action=\"#\" method=\"POST\">\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkName\">Link:</label> \n                                <div class=\"col-sm-10\">\n                                    <input id=\"linkName\" name=\"linkName\" class=\"form-control\"/>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkFile\">To:</label> \n                                <div class=\"col-sm-10\">\n                                    <input class=\"form-control\" id=\"linkFile\" name=\"linkFile\"/>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"submit\" class=\"btn btn-success link-create\">Create</button>\n                        <button type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <script>\n\n            var deleteButton = \"<button id='delete' class='btn btn-warning'>Delete</button>\";\n            var linkButton = \"<button id='link' class='btn btn-success'>Link</button>\";\n            var oneButton = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + \"</div>\";\n            var twoButtons = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + linkButton + \"</div>\";\n            \n            function addListEntry(list, filename, linkname) {\n            \n                var entry;\n                \n                if (linkname === undefined) {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span>\" \n                    + filename + \"</span>\" + twoButtons + \"</div></li>\");\n                } else {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span class='link'>\" \n                    + filename + \"</span> <span class='glyphicon glyphicon-arrow-right'></span> \" \n                    + linkname + oneButton + \"</div></li>\");\n                }\n                \n                entry.mouseover(function(){\n                    $(this).find(\".btn-group\").fadeIn(\"fast\");\n                });\n                entry.mouseleave(function(){\n                    $(this).find(\".btn-group\").fadeOut(\"slow\");\n                });\n                \n                entry.on(\"click\", \"button#delete\", function(){\n                    var listItem = this.parentElement.parentElement.parentElement;\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $.ajax({\n                        type: 'DELETE',\n                        data: {\"filename\": file},\n                        success: function(result) {\n                            $(listItem).fadeOut(\"slow\", function(){\n                                listItem.remove();\n                            });\n                        },\n                        error: function(result) {\n                            $(listItem).append(\"<div class='alert alert-danger'>\"\n                                + \"<a href='#' class='close' data-dismiss='alert'\"\n                                + \"aria-label='close'>&times;</a>\"\n                                + result.responseText + \"</div>\");\n                        }\n                    });\n                });\n           \n                entry.on(\"click\", \"button#link\", function(){\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $(\"#linkName\").val(\"\");\n                    $(\"#linkFile\").prop(\"disabled\", true).val(file);\n                    $(\"#linkName\").parent().removeClass(\"has-error\");\n                    $(\"#linkModal\").modal();\n                    $('#linkModal').on('shown.bs.modal', function () {\n                        $('#linkName').focus();\n                    });\n                });\n                \n                if (list.children().length == 0) {\n                    list.append(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n\n                if (filename < $(\"li:first span:first\", list).text()) {\n                    $(\"li:first\", list).before(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                if (filename > $(\"li:last span:first\", list).text()) {\n                    $(\"li:last\", list).after(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                \n                var count = 0;\n                var $li = $(\"li\", list);\n                do {\n                    var index = parseInt($li.length / 2);\n                    var $compare = $li.eq(index);\n                    var compare = $(\"span:first\",$compare).text();\n                    if (filename === compare) {\n                        break;\n                    }\n                    else if (filename > compare) {\n                        $li = $li.slice(index, $li.length);\n                    } else {\n                        $li = $li.slice(0, index);\n                    }\n                } while ($li.length > 1);\n\n                if (filename === compare) {\n                    $compare.slideUp(\"fast\").slideDown(\"slow\");\n                    return;\n                } else if (filename < compare) { \n                    entry.insertBefore($compare); \n                } else { \n                    entry.insertAfter($compare); \n                }\n                entry.slideDown(\"slow\");\n            }\n            \n            \n            var files = String(\"{{payload.files}}\").split(',');\n            var links = String(\"{{payload.links}}\").split(',');\n            \n            var list_of_items = $(\"#list_of_items\");\n            \n            files.forEach(function(file,index) {\n                if (links[index] == \"\") {\n                    addListEntry(this, file.slice(0,-4));\n                } else {\n                    addListEntry(this, file.slice(0,-4), links[index].slice(0,-4));\n                }\n            },list_of_items);\n           \n           \n            $(\"#linkModal\").on(\"click\", \"button.link-create\", function(event){\n               event.preventDefault();\n               if ($(\"#linkName\").val() == \"\") {\n                    $('#linkName').focus();\n                    $('#linkName').parent().addClass(\"has-error\");\n                    return false;\n               }\n               $(\"#linkFile\").prop(\"disabled\",false);               \n               $.ajax({\n                    type: 'PUT',\n                    data: $(\"#linkForm\").serialize(),\n                    success: function(result) {\n                        $(\"#linkModal\").modal('hide');\n                        addListEntry(list_of_items, $('#linkName').val(), $('#linkFile').val());\n                    },\n                    error: function(result) {\n                        $(\"#linkFile\").prop(\"disabled\", true);\n                        $('#linkName').focus();\n                        $('#linkName').parent().addClass(\"has-error\");\n                        $(linkForm).append(\"<div id='linkError' class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n                });\n            });\n            \n            $(\"#browse\").on('click', function () {\n                fileUpload.click();\n            });\n            \n            $(\"#fileUpload\").on('change', function () {\n                $(\"#filename\").val($(\"#fileUpload\").val().split('/').pop().split('\\\\').pop());\n            });\n            \n            var frm = $(\"#main_input_box\");\n            \n            frm.submit( function( e ) {\n                e.preventDefault();\n                if ($('#fileUpload').val() == \"\") return null;\n                $.ajax( {\n                    url: frm.attr('action'),\n                    type: frm.attr('method'),\n                    data: new FormData( this ),\n                    processData: false,\n                    contentType: false,\n                    success: function(result) {\n                        addListEntry(list_of_items, $('#fileUpload').val().slice(0,-4).split('\\\\').pop());\n                        $('#fileUpload').val('');\n                        $(':text').val('');\n                    },\n                    error: function(result) {\n                        $(\"#main_input_box\").append(\"<div class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n\n                });\n            });\n            //form=document.getElementById(\"my_options\");\n            //function askForChange() {\n            //form.action=\"test\";\n            //form.submit();\n            //}\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 910,
        "y": 620,
        "wires": [
            [
                "13e5a65e6bd44eda"
            ]
        ]
    },
    {
        "id": "f3dc491e67b9826c",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "mensaje bienvenida",
        "func": "msg.payload = global.get(\"user\");\nif(msg.payload.content.substring(0,1)!=\"/\")\n{\n msg.payload.content=\"Bienvenidos aventureros. ¿Estáis listos para entrar en google? Accede al menú y mira todas las opciones disponibles.\";\n return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 240,
        "wires": [
            [
                "fedcb4bb1ace3832"
            ]
        ]
    },
    {
        "id": "d064a8a08363d9a0",
        "type": "telegram receiver",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "saveDataDir": "",
        "filterCommands": true,
        "x": 110,
        "y": 40,
        "wires": [
            [
                "22daf5dc41a5c8e3"
            ],
            []
        ]
    },
    {
        "id": "20a682fad8758c49",
        "type": "telegram sender",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1450,
        "y": 60,
        "wires": [
            [
                "18eebd5c17ad471e"
            ]
        ]
    },
    {
        "id": "ccfe11fbbed43d4e",
        "type": "telegram command",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "command": "/tiempo",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "1f33bd2091f1c0f0",
        "strict": false,
        "hasresponse": false,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 1,
        "x": 130,
        "y": 1520,
        "wires": [
            [
                "a674ddf7c07917a6"
            ]
        ]
    },
    {
        "id": "a674ddf7c07917a6",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 7",
        "func": "msg.user = msg.payload;\nvar hora_str = new Date();\nvar hora = Number(hora_str.getHours());\nif (hora < 6) {\n    var value = 3;\n}else if ( hora >= 6 && hora < 12){\n    var value = 4;\n}else if (hora >= 12 && hora < 18){\n    var value = 5;\n}else if (hora >= 18 && hora < 24){\n    var value = 6;\n}\nmsg.mensaje = value;\nmsg.limit = 1;\nmsg.sort = { \"date\": -1 };\nmsg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 1520,
        "wires": [
            [
                "c2d2ecc035fb300b"
            ]
        ]
    },
    {
        "id": "276e58b1359e1c7c",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 8",
        "func": "var period = msg.mensaje;\nmsg.elaborado = msg.payload.root.elaborado[0]\nmsg.prob_precipitacion = msg.payload.root.prediccion[0].dia[0].prob_precipitacion[period]._;\nmsg.periodo = msg.payload.root.prediccion[0].dia[0].prob_precipitacion[period].$.periodo;\nmsg.estado_del_cielo = msg.payload.root.prediccion[0].dia[0].estado_cielo[period].$.descripcion;\nmsg.prob_precipitacion_manana = msg.payload.root.prediccion[0].dia[1].prob_precipitacion[0]._;\nmsg.estado_del_cielo_manana = msg.payload.root.prediccion[0].dia[1].estado_cielo[0].$.descripcion;\n\n\nmsg.payload = msg.user;\nmsg.payload.content = \"\";\nmsg.payload.content += \"\\nSegún la AEMET la predicción para las próximas horas (\"+ msg.periodo + \"h)\"\nmsg.payload.content += \" es de \" + msg.estado_del_cielo;\nmsg.payload.content += \" y probabilidad de lluvia de \" + msg.prob_precipitacion + \"%. \"\nmsg.payload.content += \"Mañana se espera \" + msg.estado_del_cielo_manana + \" y probabilidad de lluvia de \" + msg.prob_precipitacion_manana + \"%.\";\nmsg.payload.content += \"\\nPredicción elaborada: \" + msg.elaborado + \".\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "c2d2ecc035fb300b",
        "type": "http request",
        "z": "b056b4cf9a298e0d",
        "name": "AEMET http request",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://www.aemet.es/xml/municipios/localidad_29901.xml",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 540,
        "y": 1520,
        "wires": [
            [
                "f23289d067bd0fa3"
            ]
        ]
    },
    {
        "id": "f23289d067bd0fa3",
        "type": "xml",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 750,
        "y": 1520,
        "wires": [
            [
                "276e58b1359e1c7c"
            ]
        ]
    },
    {
        "id": "22a622e6e3a77723",
        "type": "subflow:7cbc96056c55979a",
        "z": "b056b4cf9a298e0d",
        "name": "Prueba 1",
        "x": 480,
        "y": 300,
        "wires": [
            [
                "ad9e883957d3685b"
            ],
            [
                "5e29b723009e3677"
            ],
            [
                "dc20f200c13eb39a"
            ],
            [
                "b17841f01894f976"
            ],
            [
                "0d44cb0ff1d349ea",
                "7b3e58db5fa243a0"
            ]
        ],
        "icon": "font-awesome/fa-asl-interpreting"
    },
    {
        "id": "44dfea54ec883d66",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 11",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1320,
        "y": 1320,
        "wires": []
    },
    {
        "id": "2ed4b6ebe4a7f721",
        "type": "subflow:075ef7a340b6c689",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "x": 740,
        "y": 1140,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "12692250830d75c6",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "II3/ESP004/cmd/cara004",
        "payload": "0",
        "payloadType": "num",
        "x": 230,
        "y": 1160,
        "wires": [
            [
                "df9f920e3170ddf5"
            ]
        ]
    },
    {
        "id": "198f1fb018051790",
        "type": "mqtt out",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "topic": "II3/ESP004/cmd/cara004",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 750,
        "y": 1220,
        "wires": []
    },
    {
        "id": "895ad541ac1ed699",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "II3/ESP004/cmd/cara004",
        "payload": "1",
        "payloadType": "num",
        "x": 230,
        "y": 1220,
        "wires": [
            [
                "df9f920e3170ddf5"
            ]
        ]
    },
    {
        "id": "df9f920e3170ddf5",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 17",
        "func": "msg.payload = {\n    \"commands\": {\n        \"1\": { \"action\": \"activar_led\", \"value\": \"1\" },\n        \"2\": { \"action\": \"enable_game\", \"value\": \"1\" },\n        \"3\": { \"action\": \"get_sequence\", \"value\": \"010204\" }\n    }\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 1180,
        "wires": [
            [
                "198f1fb018051790",
                "2ed4b6ebe4a7f721",
                "3fa040803ea0ef0b"
            ]
        ]
    },
    {
        "id": "3fa040803ea0ef0b",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 640.0833129882812,
        "y": 1271.0833435058594,
        "wires": []
    },
    {
        "id": "a483d173586b9e5e",
        "type": "change",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "user",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 100,
        "wires": [
            [
                "a5686142f35c81ec"
            ]
        ]
    },
    {
        "id": "a5686142f35c81ec",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 16",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 100,
        "wires": []
    },
    {
        "id": "eafe96754ad3092d",
        "type": "telegram command",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "command": "/start",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "1f33bd2091f1c0f0",
        "strict": false,
        "hasresponse": false,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 1,
        "x": 70,
        "y": 100,
        "wires": [
            [
                "a483d173586b9e5e"
            ]
        ]
    },
    {
        "id": "fedcb4bb1ace3832",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "name": "link out 8",
        "mode": "link",
        "links": [
            "880fa11cf1585bf1",
            "d8313757e30311dd"
        ],
        "x": 565,
        "y": 240,
        "wires": []
    },
    {
        "id": "b4e7a71c03156b8f",
        "type": "complete",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "scope": [
            "a5686142f35c81ec"
        ],
        "uncaught": false,
        "x": 90,
        "y": 240,
        "wires": [
            [
                "f3dc491e67b9826c"
            ]
        ]
    },
    {
        "id": "e34ad49609205470",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "name": "link out 9",
        "mode": "link",
        "links": [
            "d8313757e30311dd"
        ],
        "x": 1105,
        "y": 60,
        "wires": []
    },
    {
        "id": "d8313757e30311dd",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "name": "link in 23",
        "links": [
            "e34ad49609205470",
            "fedcb4bb1ace3832",
            "f8d2fc3e0e98c026"
        ],
        "x": 1295,
        "y": 60,
        "wires": [
            [
                "20a682fad8758c49"
            ]
        ]
    },
    {
        "id": "c8318c5c0b6342cd",
        "type": "complete",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "scope": [
            "f3dc491e67b9826c"
        ],
        "uncaught": false,
        "x": 90,
        "y": 300,
        "wires": [
            [
                "5e3825e978460367"
            ]
        ]
    },
    {
        "id": "5e3825e978460367",
        "type": "controltimer",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "timerType": "delay",
        "timerDurationUnit": "second",
        "timerDurationType": "num",
        "timerDuration": 5,
        "timerLoopTimeoutUnit": "second",
        "timerLoopTimeoutType": "num",
        "timerLoopTimeout": 0,
        "loopTimeoutMessageType": "str",
        "loopTimeoutMessage": "LOOP_TIMEOUT",
        "timerMaxLoopIterationsType": "num",
        "timerMaxLoopIterations": 0,
        "loopMaxIterationsMessageType": "str",
        "loopMaxIterationsMessage": "MAX_LOOP_ITERATIONS",
        "isConsecutiveStartActionTimerResetAllowed": false,
        "isRunningTimerProgressVisible": true,
        "outputReceivedMessageOnTimerTrigger": true,
        "outputReceivedMessageOnTimerHalt": false,
        "startTimerOnReceivalOfUnknownMessage": true,
        "resetTimerOnReceivalOfUnknownMessage": false,
        "isDebugModeEnabled": true,
        "timerTriggeredMessageType": "str",
        "timerTriggeredMessage": "TIMER_TRIGGERED",
        "timerHaltedMessageType": "str",
        "timerHaltedMessage": "TIMER_HALTED",
        "isStartActionEnabled": true,
        "isStopActionEnabled": true,
        "isResetActionEnabled": true,
        "isPauseActionEnabled": true,
        "isContinueActionEnabled": true,
        "actionPropertyNameType": "str",
        "actionPropertyName": "payload",
        "startActionNameType": "str",
        "startActionName": "START",
        "stopActionNameType": "str",
        "stopActionName": "STOP",
        "resetActionNameType": "str",
        "resetActionName": "RESET",
        "pauseActionNameType": "str",
        "pauseActionName": "PAUSE",
        "continueActionNameType": "str",
        "continueActionName": "CONTINUE",
        "x": 300,
        "y": 300,
        "wires": [
            [
                "22a622e6e3a77723"
            ],
            []
        ]
    },
    {
        "id": "0d44cb0ff1d349ea",
        "type": "ui_led",
        "z": "b056b4cf9a298e0d",
        "order": 1,
        "group": "2f39551d1464f827",
        "width": 0,
        "height": 0,
        "label": "Enabled",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#008000",
                "value": "1",
                "valueType": "num"
            },
            {
                "color": "#ff0000",
                "value": "0",
                "valueType": "num"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 750,
        "y": 420,
        "wires": []
    },
    {
        "id": "eeaa4bc82bec7d95",
        "type": "ui_text",
        "z": "b056b4cf9a298e0d",
        "group": "5b43d9b58de38c94",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Game time",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1110,
        "y": 460,
        "wires": []
    },
    {
        "id": "cfe27898c4972426",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "func": "var time = global.get(\"time\");\ntime = time - 1;\nglobal.set(\"time\", time);\n\nvar sec_num = time;\nvar hours = Math.floor(sec_num / 3600);\nvar minutes = Math.floor((sec_num - (hours * 3600)) / 60);\nvar seconds = sec_num - (hours * 3600) - (minutes * 60);\n\nif (hours < 10) { hours = \"0\" + hours; }\nif (minutes < 10) { minutes = \"0\" + minutes; }\nif (seconds < 10) { seconds = \"0\" + seconds; }\n\nmsg.payload = hours + ':' + minutes + ':' + seconds;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 500,
        "wires": [
            [
                "eeaa4bc82bec7d95",
                "5b392c70bdeeab37"
            ]
        ]
    },
    {
        "id": "7b3e58db5fa243a0",
        "type": "controltimer",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "timerType": "loop",
        "timerDurationUnit": "second",
        "timerDurationType": "num",
        "timerDuration": 1,
        "timerLoopTimeoutUnit": "second",
        "timerLoopTimeoutType": "num",
        "timerLoopTimeout": 0,
        "loopTimeoutMessageType": "str",
        "loopTimeoutMessage": "LOOP_TIMEOUT",
        "timerMaxLoopIterationsType": "num",
        "timerMaxLoopIterations": 0,
        "loopMaxIterationsMessageType": "str",
        "loopMaxIterationsMessage": "MAX_LOOP_ITERATIONS",
        "isConsecutiveStartActionTimerResetAllowed": false,
        "isRunningTimerProgressVisible": true,
        "outputReceivedMessageOnTimerTrigger": true,
        "outputReceivedMessageOnTimerHalt": false,
        "startTimerOnReceivalOfUnknownMessage": true,
        "resetTimerOnReceivalOfUnknownMessage": false,
        "isDebugModeEnabled": true,
        "timerTriggeredMessageType": "str",
        "timerTriggeredMessage": "TIMER_TRIGGERED",
        "timerHaltedMessageType": "str",
        "timerHaltedMessage": "TIMER_HALTED",
        "isStartActionEnabled": true,
        "isStopActionEnabled": true,
        "isResetActionEnabled": true,
        "isPauseActionEnabled": true,
        "isContinueActionEnabled": true,
        "actionPropertyNameType": "str",
        "actionPropertyName": "payload",
        "startActionNameType": "str",
        "startActionName": "START",
        "stopActionNameType": "str",
        "stopActionName": "STOP",
        "resetActionNameType": "str",
        "resetActionName": "RESET",
        "pauseActionNameType": "str",
        "pauseActionName": "PAUSE",
        "continueActionNameType": "str",
        "continueActionName": "CONTINUE",
        "x": 760,
        "y": 500,
        "wires": [
            [
                "cfe27898c4972426"
            ],
            []
        ]
    },
    {
        "id": "08f030f5381a1c7d",
        "type": "config",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "properties": [
            {
                "p": "time",
                "pt": "global",
                "to": "3600",
                "tot": "num"
            },
            {
                "p": "Game",
                "pt": "global",
                "to": "0",
                "tot": "str"
            }
        ],
        "active": true,
        "x": 490,
        "y": 160,
        "wires": []
    },
    {
        "id": "05945e69aa847edd",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "STOP",
        "payloadType": "str",
        "x": 510,
        "y": 480,
        "wires": [
            [
                "7b3e58db5fa243a0"
            ]
        ]
    },
    {
        "id": "c58b99303fd6d492",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "START",
        "payloadType": "str",
        "x": 510,
        "y": 520,
        "wires": [
            [
                "7b3e58db5fa243a0"
            ]
        ]
    },
    {
        "id": "b17841f01894f976",
        "type": "mqtt out",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "topic": "II3/ESP002/cmd/cara002",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 990,
        "y": 400,
        "wires": []
    },
    {
        "id": "da39ff3f3bd01714",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 11",
        "func": "var texto = msg.payload;\nmsg.payload = global.get(\"user\");\nmsg.payload.content = texto;\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 970,
        "y": 60,
        "wires": [
            [
                "e34ad49609205470"
            ]
        ]
    },
    {
        "id": "ad9e883957d3685b",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "name": "link out 10",
        "mode": "link",
        "links": [
            "56de6b18ecd69a81"
        ],
        "x": 795,
        "y": 280,
        "wires": []
    },
    {
        "id": "5e29b723009e3677",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "name": "link out 11",
        "mode": "link",
        "links": [
            "56de6b18ecd69a81"
        ],
        "x": 795,
        "y": 320,
        "wires": []
    },
    {
        "id": "dc20f200c13eb39a",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "name": "link out 12",
        "mode": "link",
        "links": [
            "56de6b18ecd69a81"
        ],
        "x": 805,
        "y": 360,
        "wires": []
    },
    {
        "id": "56de6b18ecd69a81",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "name": "link in 24",
        "links": [
            "5e29b723009e3677",
            "dc20f200c13eb39a",
            "ad9e883957d3685b"
        ],
        "x": 835,
        "y": 60,
        "wires": [
            [
                "da39ff3f3bd01714"
            ]
        ]
    },
    {
        "id": "5b392c70bdeeab37",
        "type": "ui_text",
        "z": "b056b4cf9a298e0d",
        "group": "f870df7d6c3cc2e9",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Game time - User",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1130,
        "y": 540,
        "wires": []
    },
    {
        "id": "8cf6b99ba10ac475",
        "type": "complete",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "scope": [
            "a5686142f35c81ec"
        ],
        "uncaught": false,
        "x": 290,
        "y": 160,
        "wires": [
            [
                "08f030f5381a1c7d"
            ]
        ]
    },
    {
        "id": "1d03197f3c061eb1",
        "type": "telegram reply",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "x": 900,
        "y": 700,
        "wires": [
            [
                "22a1024f0a5078c2"
            ]
        ]
    },
    {
        "id": "078431c881436679",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 40,
        "wires": []
    },
    {
        "id": "22daf5dc41a5c8e3",
        "type": "change",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "user",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 40,
        "wires": [
            [
                "078431c881436679"
            ]
        ]
    },
    {
        "id": "45b13b8067bd0463",
        "type": "telegram event",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "event": "callback_query",
        "autoanswer": true,
        "x": 200,
        "y": 800,
        "wires": [
            [
                "de872b1f544a4849"
            ]
        ]
    },
    {
        "id": "d0400cc2d42c64a1",
        "type": "telegram control",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "outputs": 1,
        "checkconnection": false,
        "hostname": "",
        "interval": 10,
        "timeout": 1,
        "x": 220,
        "y": 620,
        "wires": [
            [
                "3d9b46ce2ae6df0f"
            ]
        ]
    },
    {
        "id": "18eebd5c17ad471e",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 21",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1700,
        "y": 60,
        "wires": []
    },
    {
        "id": "3d9b46ce2ae6df0f",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 22",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 620,
        "wires": []
    },
    {
        "id": "410b2e29e96f730c",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 18",
        "func": "var texto = msg.payload;\nmsg.payload = global.get(\"user\");\nmsg.payload.content = \"te gusta el pan ?\";\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 700,
        "wires": [
            [
                "c22d0fc5e8d6920e"
            ]
        ]
    },
    {
        "id": "b7c420a071e870e1",
        "type": "change",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "user",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 700,
        "wires": [
            [
                "410b2e29e96f730c"
            ]
        ]
    },
    {
        "id": "c22d0fc5e8d6920e",
        "type": "telegram sender",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "haserroroutput": false,
        "outputs": 1,
        "x": 670,
        "y": 700,
        "wires": [
            [
                "1d03197f3c061eb1"
            ]
        ]
    },
    {
        "id": "22a1024f0a5078c2",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 23",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 700,
        "wires": []
    },
    {
        "id": "97f5e9edd2802103",
        "type": "state-machine",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "triggerProperty": "topic",
        "triggerPropertyType": "msg",
        "stateProperty": "topic",
        "statePropertyType": "msg",
        "outputStateChangeOnly": false,
        "throwException": false,
        "states": [
            "start",
            "game1",
            "game2"
        ],
        "transitions": [
            {
                "name": "game 1",
                "from": "start",
                "to": "start"
            }
        ],
        "x": 380,
        "y": 1600,
        "wires": [
            [
                "362a9acb79e1d7ca"
            ]
        ]
    },
    {
        "id": "79f25662b28050dd",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 1600,
        "wires": [
            [
                "97f5e9edd2802103"
            ]
        ]
    },
    {
        "id": "362a9acb79e1d7ca",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 24",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 1600,
        "wires": []
    },
    {
        "id": "9bdde8bb42ac5b19",
        "type": "finite-state-machine",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "fsmDefinition": "{\"state\":{\"status\":\"IDLE\",\"data\":{\"x\":5}},\"transitions\":{\"IDLE\":{\"run\":\"RUNNING\"},\"RUNNING\":{\"stop\":\"IDLE\"}}}",
        "sendInitialState": true,
        "sendStateWithoutChange": true,
        "showTransitionErrors": true,
        "x": 390,
        "y": 1640,
        "wires": [
            [
                "86b04bf2bfeb5ee2"
            ]
        ]
    },
    {
        "id": "86b04bf2bfeb5ee2",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 25",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 620,
        "y": 1640,
        "wires": []
    },
    {
        "id": "8cc29a55472fde41",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "run",
        "payload": "run",
        "payloadType": "str",
        "x": 170,
        "y": 1640,
        "wires": [
            [
                "9bdde8bb42ac5b19"
            ]
        ]
    },
    {
        "id": "de872b1f544a4849",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 19",
        "func": "var show_alert = false; // you can set this to true to open a dialog with the answer in the client.\n\n// msg.payload.content contains the callback data from the keyboard.\n// You may change this value here.\nmsg.payload.options = show_alert;\n\nreturn [msg];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 800,
        "wires": [
            [
                "14bc9dd2719eec8b"
            ]
        ]
    },
    {
        "id": "14bc9dd2719eec8b",
        "type": "telegram sender",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "haserroroutput": false,
        "outputs": 1,
        "x": 710,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "1a2629111d9359b7",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 20",
        "func": "var opts = {\n    reply_to_message_id: msg.payload.messageId,\n    reply_markup: JSON.stringify({\n        \"inline_keyboard\": [[\n            {\n                \"text\": \"Yes\",\n                \"callback_data\": \"FOO YES\"\n            },\n            {\n                \"text\": \"No\",\n                \"callback_data\": \"FOO NO\"\n            }]\n        ]\n    })\n};\n\nmsg.payload.content = 'Are you sure?';\nmsg.payload.options = opts;\n\nreturn [msg];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 880,
        "wires": [
            [
                "d3033b7e02e5a0e4"
            ]
        ]
    },
    {
        "id": "d3033b7e02e5a0e4",
        "type": "telegram sender",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "haserroroutput": false,
        "outputs": 1,
        "x": 710,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "19423ee5387d4eca",
        "type": "telegram command",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "command": "/menu",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "1f33bd2091f1c0f0",
        "strict": false,
        "hasresponse": false,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 1,
        "x": 170,
        "y": 880,
        "wires": [
            [
                "1a2629111d9359b7"
            ]
        ]
    },
    {
        "id": "66a34744cd46d525",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 21",
        "func": "msg.payload.content = \"/home/rhyloo/nol/pics/AUD-20221122-WA0012.aac\";\nmsg.payload.type = 'audio';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\ndice\nvoice\ndocument\n*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1000,
        "wires": [
            [
                "751c8b2e1c8308c8"
            ]
        ]
    },
    {
        "id": "751c8b2e1c8308c8",
        "type": "telegram sender",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "1f33bd2091f1c0f0",
        "haserroroutput": false,
        "outputs": 1,
        "x": 710,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "93d57dffb3c04f77",
        "type": "telegram command",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "command": "/tiempo",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "1f33bd2091f1c0f0",
        "strict": false,
        "hasresponse": false,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 1,
        "x": 170,
        "y": 1000,
        "wires": [
            [
                "66a34744cd46d525"
            ]
        ]
    },
    {
        "id": "f7d93e22ce1faa13",
        "type": "file in",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "filename": "/home/rhyloo/nol/pics/foo.jpeg",
        "filenameType": "str",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 430,
        "y": 1340,
        "wires": [
            [
                "02b00a3680685ea1"
            ]
        ]
    },
    {
        "id": "02b00a3680685ea1",
        "type": "mongodb out",
        "z": "b056b4cf9a298e0d",
        "mongodb": "6046a47177835823",
        "name": "",
        "collection": "test",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 730,
        "y": 1340,
        "wires": []
    },
    {
        "id": "9ed1dc9910ace64f",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1340,
        "wires": [
            [
                "f7d93e22ce1faa13"
            ]
        ]
    },
    {
        "id": "2bb6decf9cc889b5",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "Recupera un acertijo aleatorio de la base de datos",
        "func": "msg.payload = {\"filename\":\"/home/rhyloo/nol/pics/foo.jpeg\"};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 1400,
        "wires": [
            [
                "8fd0cf9f2119d17a"
            ]
        ]
    },
    {
        "id": "8fd0cf9f2119d17a",
        "type": "mongodb in",
        "z": "b056b4cf9a298e0d",
        "mongodb": "6046a47177835823",
        "name": "",
        "collection": "test",
        "operation": "find",
        "x": 830,
        "y": 1400,
        "wires": [
            [
                "9a3a99cb954ede25"
            ]
        ]
    },
    {
        "id": "c18f8a03da6877a1",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1400,
        "wires": [
            [
                "2bb6decf9cc889b5"
            ]
        ]
    },
    {
        "id": "3528be3381a42afd",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "function 22",
        "func": "flow.set(\"photo\", msg.payload[0].payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 1400,
        "wires": [
            [
                "44dfea54ec883d66"
            ]
        ]
    },
    {
        "id": "9f8e3c4efe2ab1ec",
        "type": "buffer-maker",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "specification": "",
        "specificationType": "ui",
        "items": [
            {
                "name": "item1",
                "type": "int16be",
                "data": "payload",
                "dataType": "msg"
            }
        ],
        "swap1": "",
        "swap2": "",
        "swap3": "",
        "swap1Type": "swap",
        "swap2Type": "swap",
        "swap3Type": "swap",
        "msgProperty": "payload",
        "msgPropertyType": "str",
        "x": 990,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "9a3a99cb954ede25",
        "type": "buffer-parser",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "specification": "spec",
        "specificationType": "ui",
        "items": [
            {
                "type": "buffer",
                "name": "item1",
                "offset": 0,
                "length": 1,
                "offsetbit": 0,
                "scale": "1",
                "mask": ""
            }
        ],
        "swap1": "",
        "swap2": "",
        "swap3": "",
        "swap1Type": "swap",
        "swap2Type": "swap",
        "swap3Type": "swap",
        "msgProperty": "payload",
        "msgPropertyType": "str",
        "resultType": "object",
        "resultTypeType": "return",
        "multipleResult": true,
        "fanOutMultipleResult": false,
        "setTopic": true,
        "outputs": 1,
        "x": 1030,
        "y": 1400,
        "wires": [
            [
                "3528be3381a42afd",
                "44dfea54ec883d66"
            ]
        ]
    },
    {
        "id": "a2fc907344de6d8a",
        "type": "debug",
        "z": "e124bbec17d40651",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 547.0141983032227,
        "y": 126.00568771362305,
        "wires": []
    },
    {
        "id": "1c305de4d82de9c2",
        "type": "json",
        "z": "e124bbec17d40651",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 393.01419830322266,
        "y": 168.00569343566895,
        "wires": [
            [
                "a2fc907344de6d8a",
                "d33ac88c6ce120b7"
            ]
        ]
    },
    {
        "id": "d33ac88c6ce120b7",
        "type": "function",
        "z": "e124bbec17d40651",
        "name": "añade fecha",
        "func": "msg.payload.date=new Date();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 549.0141906738281,
        "y": 169.0056962966919,
        "wires": [
            [
                "b71d13c66d89b292"
            ]
        ]
    },
    {
        "id": "b71d13c66d89b292",
        "type": "mongodb out",
        "z": "e124bbec17d40651",
        "mongodb": "3752afa1.deaf9",
        "name": "",
        "collection": "test_agrega",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 828.0142021179199,
        "y": 168.00568771362305,
        "wires": []
    },
    {
        "id": "27aea1532517a43b",
        "type": "inject",
        "z": "e124bbec17d40651",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 172.7897186279297,
        "y": 261.9715576171875,
        "wires": [
            [
                "8739f53cf1bb5475"
            ]
        ]
    },
    {
        "id": "8739f53cf1bb5475",
        "type": "mongodb in",
        "z": "e124bbec17d40651",
        "mongodb": "3752afa1.deaf9",
        "name": "",
        "collection": "test_agrega",
        "operation": "find",
        "x": 479.78687286376953,
        "y": 261.69884872436523,
        "wires": [
            [
                "d118ec6cbfc571a9"
            ]
        ]
    },
    {
        "id": "d118ec6cbfc571a9",
        "type": "debug",
        "z": "e124bbec17d40651",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 888.7897109985352,
        "y": 263.81244564056396,
        "wires": []
    },
    {
        "id": "a02946380512c1c2",
        "type": "comment",
        "z": "e124bbec17d40651",
        "name": "Almacenamiento en base de datos",
        "info": "",
        "x": 202.78973388671875,
        "y": 79.08808326721191,
        "wires": []
    },
    {
        "id": "c7b8687c56b02fd9",
        "type": "function",
        "z": "e124bbec17d40651",
        "name": "agrega por días",
        "func": "// fecha por defecto es hoy\nvar ahora = new Date();\n// pillo los globales si los hay, si no la fecha de hoy\nvar desde = new Date(global.get(\"desde\") || ahora);\nvar hasta = new Date(global.get(\"hasta\") || ahora); \n// el día de inicio desde las cero horas\nvar inicio = new Date(desde.getFullYear(),desde.getMonth(),desde.getDate(),1,0,0,0);\n// el día final es hasta final del día\nvar final = new Date(hasta.getFullYear(),hasta.getMonth(),hasta.getDate(),24,59,59,99);\n\nmsg.payload=\n[\n    { \"$match\": { \"date\": { \"$gte\": inicio , \"$lte\": final } } },\n    { \"$project\": {\n        \"date\": 1,\n        \"temperatura\": \"$BME280.Temperatura\"\n        }\n    },\n    { \"$group\": {\n        \"_id\": { \n        \"$dateFromParts\" : {\n            \"year\": { \"$year\": \"$date\" }, \n            \"month\": { \"$month\": \"$date\" },\n            \"day\": { \"$dayOfMonth\": \"$date\" }\n        }},\n\n        \"Tmedia\":{\"$avg\":\"$temperatura\"},\n        \"Tmax\":  {\"$max\":\"$temperatura\"},\n        \"Tmin\":  {\"$min\":\"$temperatura\"},\n        \"datos\": {\"$sum\":1},\n    }},\n    { \"$sort\": {\"_id\": 1} }\n];\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 269.314266204834,
        "y": 718.0055141448975,
        "wires": [
            [
                "539a9ea3512020a7"
            ]
        ]
    },
    {
        "id": "539a9ea3512020a7",
        "type": "mongodb in",
        "z": "e124bbec17d40651",
        "mongodb": "3752afa1.deaf9",
        "name": "",
        "collection": "test_agrega",
        "operation": "aggregate",
        "x": 543.3284492492676,
        "y": 718.0113296508789,
        "wires": [
            [
                "bc3d1c26265c1a7d",
                "3282fc564feba52e"
            ]
        ]
    },
    {
        "id": "bc3d1c26265c1a7d",
        "type": "function",
        "z": "e124bbec17d40651",
        "name": "genera datos gráfica",
        "func": "var arrayavg=[];\nvar arraymax=[];\nvar arraymin=[];\n\n// los arrays usados en la represenstación gráfica deben contener objetos JSON con dos campos: {x , y}\n// en x debemos poner la hora en formato \"timestamp\". Si tenemos un objeto fecha se puede convertir usando el método getTime()\n// en y debemos poner el valor de la variable\n// mas info en: https://github.com/node-red/node-red-dashboard/blob/master/Charts.md\n\nif(Array.isArray(msg.payload) && msg.payload.length>0)\n{\n    for (var i = 0; i < msg.payload.length; i++) { // añade datos a los array\n        arrayavg.push({x : msg.payload[i]._id.getTime() , y : msg.payload[i].Tmedia});\n        arraymax.push({x : msg.payload[i]._id.getTime() , y : msg.payload[i].Tmax});\n        arraymin.push({x : msg.payload[i]._id.getTime() , y : msg.payload[i].Tmin});\n    }\n}\n    \nmsg.payload = [{\n        \"series\":[\"T.media\",\"T.max\",\"T.min\"],\n        \"data\":[arrayavg, arraymax, arraymin],\n        \"labels\":[\"\"]\n        }];\n\nreturn msg;  ",
        "outputs": "1",
        "noerr": 0,
        "x": 859.0142402648926,
        "y": 777.0056324005127,
        "wires": [
            [
                "81db042e5e69f5f1"
            ]
        ]
    },
    {
        "id": "81db042e5e69f5f1",
        "type": "ui_chart",
        "z": "e124bbec17d40651",
        "name": "",
        "group": "970b2d92940cc035",
        "order": 8,
        "width": 0,
        "height": 0,
        "label": "Temperaturas diarias",
        "chartType": "line",
        "legend": "true",
        "xformat": "D/M",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "colors": [
            "#008000",
            "#ff0000",
            "#0080ff",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 2,
        "x": 1088.014072418213,
        "y": 777.0055847167969,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "30625925796ef13d",
        "type": "change",
        "z": "e124bbec17d40651",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "desde",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 394.0057258605957,
        "y": 438.5766592025757,
        "wires": [
            [
                "1e99ec801a739960"
            ]
        ]
    },
    {
        "id": "dadba7bb0af1d36b",
        "type": "change",
        "z": "e124bbec17d40651",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hasta",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 397.232967376709,
        "y": 490.4602007865906,
        "wires": [
            [
                "1e99ec801a739960"
            ]
        ]
    },
    {
        "id": "1e99ec801a739960",
        "type": "link out",
        "z": "e124bbec17d40651",
        "name": "",
        "links": [],
        "x": 596.7698726654053,
        "y": 470.70737075805664,
        "wires": []
    },
    {
        "id": "5c852cceec460465",
        "type": "link in",
        "z": "e124bbec17d40651",
        "name": "",
        "links": [],
        "x": 115.78126525878906,
        "y": 678.8350811004639,
        "wires": [
            [
                "c7b8687c56b02fd9",
                "4982f1ea4ac82c96"
            ]
        ]
    },
    {
        "id": "4982f1ea4ac82c96",
        "type": "function",
        "z": "e124bbec17d40651",
        "name": "agreaga todo",
        "func": "// fecha por defecto es hoy\nvar ahora = new Date();\n// pillo los globales si los hay, si no la fecha de hoy\nvar desde = new Date(global.get(\"desde\") || ahora);\nvar hasta = new Date(global.get(\"hasta\") || ahora); \n// el día de inicio desde las cero horas\nvar inicio = new Date(desde.getFullYear(),desde.getMonth(),desde.getDate(),1,0,0,0);\n// el día final es hasta final del día\nvar final = new Date(hasta.getFullYear(),hasta.getMonth(),hasta.getDate(),24,59,59,99);\n\nmsg.payload=\n[\n    { \"$match\": { \"date\": { \"$gte\": inicio , \"$lte\": final } } },\n    { \"$project\": {\n        \"temperatura\": \"$BME280.Temperatura\"\n        }\n    },\n    { \"$group\": {\n        \"_id\": 0,\n        \"Tmedia\":{\"$avg\":\"$temperatura\"},\n        \"Tmax\":  {\"$max\":\"$temperatura\"},\n        \"Tmin\":  {\"$min\":\"$temperatura\"},\n        \"datos\": {\"$sum\":1}\n    }}\n];\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 264.01423263549805,
        "y": 636.9146575927734,
        "wires": [
            [
                "238d7e44c04a8810"
            ]
        ]
    },
    {
        "id": "238d7e44c04a8810",
        "type": "mongodb in",
        "z": "e124bbec17d40651",
        "mongodb": "3752afa1.deaf9",
        "name": "",
        "collection": "test_agrega",
        "operation": "aggregate",
        "x": 543.0284309387207,
        "y": 635.9202737808228,
        "wires": [
            [
                "27e40a90ef928a39",
                "a0c908b7694f1ef0",
                "17fecee46f9ee5c0",
                "934730b3846b60c3",
                "2e9b21727b3a9d4e"
            ]
        ]
    },
    {
        "id": "27e40a90ef928a39",
        "type": "ui_text",
        "z": "e124bbec17d40651",
        "group": "970b2d92940cc035",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Média en el período",
        "format": "{{msg.payload[0].Tmedia | number:1 }}ºC",
        "layout": "row-left",
        "x": 1042.792636871338,
        "y": 557.3292970657349,
        "wires": []
    },
    {
        "id": "a0c908b7694f1ef0",
        "type": "ui_text",
        "z": "e124bbec17d40651",
        "group": "970b2d92940cc035",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Máxima en el período",
        "format": "{{msg.payload[0].Tmax | number:1 }}ºC",
        "layout": "row-left",
        "x": 1037.0142250061035,
        "y": 596.7327833175659,
        "wires": []
    },
    {
        "id": "17fecee46f9ee5c0",
        "type": "ui_text",
        "z": "e124bbec17d40651",
        "group": "970b2d92940cc035",
        "order": 5,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Mínima en el período",
        "format": "{{msg.payload[0].Tmin | number:1 }}ºC",
        "layout": "row-left",
        "x": 1036.0142250061035,
        "y": 634.7327489852905,
        "wires": []
    },
    {
        "id": "94ec24b7edd7fab1",
        "type": "comment",
        "z": "e124bbec17d40651",
        "name": "Controles para seleccionar fechas",
        "info": "",
        "x": 198.00001525878906,
        "y": 373.82383251190186,
        "wires": []
    },
    {
        "id": "a70e90d5112c8b40",
        "type": "comment",
        "z": "e124bbec17d40651",
        "name": "Consultas agregadas",
        "info": "",
        "x": 173.7897720336914,
        "y": 579.3663816452026,
        "wires": []
    },
    {
        "id": "3282fc564feba52e",
        "type": "debug",
        "z": "e124bbec17d40651",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 846.789737701416,
        "y": 737.8124227523804,
        "wires": []
    },
    {
        "id": "934730b3846b60c3",
        "type": "debug",
        "z": "e124bbec17d40651",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 812.0142364501953,
        "y": 545.0055742263794,
        "wires": []
    },
    {
        "id": "2e9b21727b3a9d4e",
        "type": "ui_text",
        "z": "e124bbec17d40651",
        "group": "970b2d92940cc035",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Número de datos",
        "format": "{{msg.payload[0].datos }} muestras",
        "layout": "row-left",
        "x": 1032.0142402648926,
        "y": 682.0055913925171,
        "wires": []
    },
    {
        "id": "94b83f62d7415cb4",
        "type": "ui_date_picker",
        "z": "e124bbec17d40651",
        "name": "",
        "label": "Fecha de inicio",
        "group": "970b2d92940cc035",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "",
        "x": 185.76986694335938,
        "y": 434.73571586608887,
        "wires": [
            [
                "30625925796ef13d"
            ]
        ]
    },
    {
        "id": "9817d8acea692ecd",
        "type": "ui_date_picker",
        "z": "e124bbec17d40651",
        "name": "",
        "label": "Fecha de final",
        "group": "970b2d92940cc035",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "topic": "",
        "x": 162.7783966064453,
        "y": 488.7414951324463,
        "wires": [
            [
                "dadba7bb0af1d36b"
            ]
        ]
    },
    {
        "id": "0406c81e19dabaa7",
        "type": "mqtt in",
        "z": "e124bbec17d40651",
        "name": "",
        "topic": "iot/datos/json",
        "qos": "2",
        "datatype": "auto",
        "broker": "2b251178.95ad2e",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 150,
        "y": 171.1111159324646,
        "wires": [
            [
                "1c305de4d82de9c2"
            ]
        ]
    },
    {
        "id": "2b1fd44b018140ee",
        "type": "ui_text_input",
        "z": "03c76acfc9a07adb",
        "name": "",
        "label": "",
        "tooltip": "",
        "group": "ef4e3347ed457b9c",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 80,
        "y": 180,
        "wires": [
            [
                "08d055d326c442f3"
            ]
        ]
    },
    {
        "id": "fea16bf35a5b6776",
        "type": "mongodb in",
        "z": "03c76acfc9a07adb",
        "mongodb": "f605fa69.8f5008",
        "name": "Colección: datousuario",
        "collection": "datosusuario",
        "operation": "find",
        "x": 500,
        "y": 180,
        "wires": [
            [
                "c53aef741aedf07b"
            ]
        ]
    },
    {
        "id": "92630cfa0aa3f6ba",
        "type": "debug",
        "z": "03c76acfc9a07adb",
        "name": "debug 13",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 220,
        "wires": []
    },
    {
        "id": "08d055d326c442f3",
        "type": "function",
        "z": "03c76acfc9a07adb",
        "name": "Finder",
        "func": "var user = msg.payload;\nflow.set(\"user\", user);\nmsg.payload = {\"usuario\":user};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 180,
        "wires": [
            [
                "fea16bf35a5b6776"
            ]
        ]
    },
    {
        "id": "9f868786c5ba7ce5",
        "type": "mongodb in",
        "z": "03c76acfc9a07adb",
        "mongodb": "f605fa69.8f5008",
        "name": "Colección: hashusuario",
        "collection": "hashusuario",
        "operation": "find",
        "x": 510,
        "y": 260,
        "wires": [
            [
                "049dad2d81834087"
            ]
        ]
    },
    {
        "id": "c53aef741aedf07b",
        "type": "function",
        "z": "03c76acfc9a07adb",
        "name": "Set pass as flow var",
        "func": "flow.set(\"password\", msg.payload[0].password);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 180,
        "wires": [
            [
                "92630cfa0aa3f6ba"
            ]
        ]
    },
    {
        "id": "049dad2d81834087",
        "type": "function",
        "z": "03c76acfc9a07adb",
        "name": "Set hash as flow var",
        "func": "flow.set(\"hash\", msg.payload[0].hash);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 260,
        "wires": [
            [
                "92630cfa0aa3f6ba"
            ]
        ]
    },
    {
        "id": "bb7b9511815b13de",
        "type": "mqtt out",
        "z": "03c76acfc9a07adb",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "64cdcf7a3b4cd223",
        "x": 850,
        "y": 320,
        "wires": []
    },
    {
        "id": "8c89d76f308cbeee",
        "type": "function",
        "z": "03c76acfc9a07adb",
        "name": "Generate JSON",
        "func": "var user = flow.get(\"user\");\nvar password = flow.get(\"password\");\nvar hash = flow.get(\"hash\");\nmsg.topic = \"examen/nodered/\";\nmsg.topic = msg.topic + password;\nmsg.payload = { \"usuario\": user, \"password\": password, \"hash\": hash };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 320,
        "wires": [
            [
                "8e30187b8aa0c3f8"
            ]
        ]
    },
    {
        "id": "8e30187b8aa0c3f8",
        "type": "json",
        "z": "03c76acfc9a07adb",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 550,
        "y": 320,
        "wires": [
            [
                "bb7b9511815b13de"
            ]
        ]
    },
    {
        "id": "d9ce5f1f9c1579e9",
        "type": "mqtt in",
        "z": "03c76acfc9a07adb",
        "g": "9c2f3a58f83b946f",
        "name": "",
        "topic": "respuesta/usuario/7742805",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 440,
        "wires": [
            [
                "47d6ae483f6a2bd1"
            ]
        ]
    },
    {
        "id": "47d6ae483f6a2bd1",
        "type": "debug",
        "z": "03c76acfc9a07adb",
        "g": "9c2f3a58f83b946f",
        "name": "debug 14",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 420,
        "y": 440,
        "wires": []
    },
    {
        "id": "080a623157448939",
        "type": "function",
        "z": "03c76acfc9a07adb",
        "name": "Finder",
        "func": "var user = flow.get(\"user\");\nmsg.payload = {\"usuario\":user};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 260,
        "wires": [
            [
                "9f868786c5ba7ce5"
            ]
        ]
    },
    {
        "id": "4f2367b80d0a8388",
        "type": "complete",
        "z": "03c76acfc9a07adb",
        "name": "",
        "scope": [
            "c53aef741aedf07b"
        ],
        "uncaught": false,
        "x": 90,
        "y": 260,
        "wires": [
            [
                "080a623157448939"
            ]
        ]
    },
    {
        "id": "deacca659cf6a327",
        "type": "complete",
        "z": "03c76acfc9a07adb",
        "name": "",
        "scope": [
            "049dad2d81834087"
        ],
        "uncaught": false,
        "x": 90,
        "y": 320,
        "wires": [
            [
                "8c89d76f308cbeee"
            ]
        ]
    },
    {
        "id": "8121d49eefc3b958",
        "type": "mqtt in",
        "z": "03c76acfc9a07adb",
        "name": "",
        "topic": "examen/datos/NODO14319362",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "64cdcf7a3b4cd223",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 540,
        "wires": [
            [
                "4e04fd6c0992a865"
            ]
        ]
    },
    {
        "id": "4e04fd6c0992a865",
        "type": "debug",
        "z": "03c76acfc9a07adb",
        "name": "debug 15",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 540,
        "wires": []
    }
]