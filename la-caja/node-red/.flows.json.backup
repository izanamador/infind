[
    {
        "id": "a43193f9452562d4",
        "type": "tab",
        "label": "FOTA",
        "disabled": true,
        "info": ""
    },
    {
        "id": "122f65d809b34d8e",
        "type": "tab",
        "label": "Upload intomongo",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b056b4cf9a298e0d",
        "type": "tab",
        "label": "La caja - Game",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b23dfd10f01a4521",
        "type": "tab",
        "label": "Pruebas -  Jorge",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d13323c9cef06b5d",
        "type": "tab",
        "label": "Test",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1736e63b25650818",
        "type": "subflow",
        "name": "Json-Parametros",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 240,
                "y": 180,
                "wires": [
                    {
                        "id": "4e09efcff6e84b0c"
                    },
                    {
                        "id": "95164f1d4c36c5d5"
                    },
                    {
                        "id": "6c4c38ff165dbd18"
                    },
                    {
                        "id": "b03cec66fb391724"
                    },
                    {
                        "id": "b0c38e47413631d4"
                    },
                    {
                        "id": "fa36c4f9fd494fa8"
                    },
                    {
                        "id": "8579e5a838f746f2"
                    },
                    {
                        "id": "c80f38ea1c9620b4"
                    },
                    {
                        "id": "3ab993c9aaeb02a9"
                    },
                    {
                        "id": "ed54312aaa364df5"
                    },
                    {
                        "id": "cbca515058def3f9"
                    },
                    {
                        "id": "965433bea2abdd7f"
                    },
                    {
                        "id": "02ad691c4d094030"
                    },
                    {
                        "id": "37ec8e592794dd5a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 700,
                "y": 60,
                "wires": [
                    {
                        "id": "4e09efcff6e84b0c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 100,
                "wires": [
                    {
                        "id": "95164f1d4c36c5d5",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 140,
                "wires": [
                    {
                        "id": "6c4c38ff165dbd18",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 180,
                "wires": [
                    {
                        "id": "b03cec66fb391724",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 220,
                "wires": [
                    {
                        "id": "b0c38e47413631d4",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 260,
                "wires": [
                    {
                        "id": "fa36c4f9fd494fa8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 300,
                "wires": [
                    {
                        "id": "8579e5a838f746f2",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 340,
                "wires": [
                    {
                        "id": "c80f38ea1c9620b4",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 380,
                "wires": [
                    {
                        "id": "3ab993c9aaeb02a9",
                        "port": 0
                    }
                ]
            },
            {
                "x": 700,
                "y": 420,
                "wires": [
                    {
                        "id": "ed54312aaa364df5",
                        "port": 0
                    }
                ]
            },
            {
                "x": 730,
                "y": 520,
                "wires": [
                    {
                        "id": "cbca515058def3f9",
                        "port": 0
                    }
                ]
            },
            {
                "x": 720,
                "y": 560,
                "wires": [
                    {
                        "id": "965433bea2abdd7f",
                        "port": 0
                    }
                ]
            },
            {
                "x": 720,
                "y": 600,
                "wires": [
                    {
                        "id": "02ad691c4d094030",
                        "port": 0
                    }
                ]
            },
            {
                "x": 710,
                "y": 680,
                "wires": [
                    {
                        "id": "37ec8e592794dd5a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "entrada",
                "type": "str",
                "value": "salida"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "inputLabels": [
            "json"
        ],
        "outputLabels": [
            "SSID",
            "RSSI",
            "localIP",
            "macAddress",
            "uptime_ms",
            "interval_s",
            "ChipID",
            "Des",
            "Rojo",
            "Verde",
            "Temperatura",
            "Humedad",
            "Presion",
            "Illuminacion"
        ],
        "icon": "node-red/parser-json.svg"
    },
    {
        "id": "7cbc96056c55979a",
        "type": "subflow",
        "name": "Cara002",
        "info": "Este bloque funsiona asin",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 60,
                "wires": [
                    {
                        "id": "d8fc63694048f63f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 2140,
                "y": 200,
                "wires": [
                    {
                        "id": "f467c017da051f39",
                        "port": 0
                    }
                ]
            },
            {
                "x": 2130,
                "y": 400,
                "wires": [
                    {
                        "id": "99f8ad3df90e445c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 2140,
                "y": 440,
                "wires": [
                    {
                        "id": "e2e49d26f6fd4e46",
                        "port": 0
                    }
                ]
            },
            {
                "x": 2140,
                "y": 560,
                "wires": [
                    {
                        "id": "2eb58ec64814c2b3",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {
            "version": "0.0.1",
            "author": "Rhyloo",
            "license": "MIT"
        },
        "color": "#DDAA99",
        "outputLabels": [
            "msgToBot",
            "State",
            "gametime",
            "gameinfo"
        ]
    },
    {
        "id": "72ea5fcb0b022fe1",
        "type": "subflow",
        "name": "Cara003",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 120,
                "y": 80,
                "wires": [
                    {
                        "id": "ac7dfeb5cf992750"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1440,
                "y": 80,
                "wires": [
                    {
                        "id": "d5422d86349077ea",
                        "port": 0
                    },
                    {
                        "id": "ac7dfeb5cf992750",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1450,
                "y": 740,
                "wires": [
                    {
                        "id": "d4b49bc94f317197",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1450,
                "y": 700,
                "wires": [
                    {
                        "id": "eebe47aca36fb577",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "msgToBot",
            "State",
            "Clock"
        ]
    },
    {
        "id": "90d9a362f6d9804b",
        "type": "subflow",
        "name": "Cara005",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 180,
                "wires": [
                    {
                        "id": "f016bc1d142a0eb9"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1800,
                "y": 240,
                "wires": [
                    {
                        "id": "3b61f394285ac503",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1810,
                "y": 360,
                "wires": [
                    {
                        "id": "c78a643484dd5c49",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1810,
                "y": 400,
                "wires": [
                    {
                        "id": "a29f543e4a245926",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "msgToBot",
            "state",
            "clock"
        ]
    },
    {
        "id": "7e2a7678166f609f",
        "type": "subflow",
        "name": "INTRO",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "f3dc491e67b9826c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1420,
                "y": 300,
                "wires": [
                    {
                        "id": "53fe3b5f5eab4862",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1410,
                "y": 620,
                "wires": [
                    {
                        "id": "2aacb55b03d625ef",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "msgToBot",
            "game_start"
        ]
    },
    {
        "id": "178fa897d7510777",
        "type": "subflow",
        "name": "Cara004",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "3d9cbd050ccf436b"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 2260,
                "y": 240,
                "wires": [
                    {
                        "id": "0a67632feb36fdf6",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1770,
                "y": 480,
                "wires": [
                    {
                        "id": "0aedc8df5c1d0937",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1770,
                "y": 520,
                "wires": [
                    {
                        "id": "bb1fc23bb83a7812",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "msgToBot",
            "State",
            "Clock"
        ]
    },
    {
        "id": "0888e7373481d35e",
        "type": "group",
        "z": "122f65d809b34d8e",
        "name": "Clean the collection",
        "style": {
            "label": true
        },
        "nodes": [
            "574e891f993fcb91",
            "c8ba76d152d7366a"
        ],
        "x": 794,
        "y": 659,
        "w": 472,
        "h": 82
    },
    {
        "id": "0f1cf58e08b73cc2",
        "type": "group",
        "z": "122f65d809b34d8e",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "21f9347e8aef3828",
            "e8c6e9ffed7b9a38",
            "a2b9b895f1a88888",
            "8d9f6656f8f37055",
            "20ec2a5a24d52017",
            "5baf45c3e6032233"
        ],
        "x": 1324,
        "y": 179,
        "w": 342,
        "h": 242
    },
    {
        "id": "4cd2d92b6f1e42de",
        "type": "group",
        "z": "b056b4cf9a298e0d",
        "name": "Común",
        "style": {
            "stroke": "#3f93cf",
            "fill": "#e3f3d3",
            "fill-opacity": "0.57",
            "label": true
        },
        "nodes": [
            "20a682fad8758c49",
            "d8313757e30311dd",
            "cfe27898c4972426",
            "da39ff3f3bd01714",
            "56de6b18ecd69a81",
            "5b392c70bdeeab37",
            "18eebd5c17ad471e",
            "0d44cb0ff1d349ea",
            "ef258efaabcdd988",
            "a30bf994eae7cd3e",
            "5d4807349eb7d70c",
            "adf692ef0a9e9fb2",
            "eae9519bc6028278",
            "53043cabf9626c6d",
            "08ddf1692c99f594",
            "df04ce1c2dcf737c",
            "c4abfd79327ad2ff",
            "97b7c34a01b8e8b1"
        ],
        "x": 1024,
        "y": 39,
        "w": 942,
        "h": 622
    },
    {
        "id": "407e3e089de46a03",
        "type": "group",
        "z": "b056b4cf9a298e0d",
        "name": "Cara002",
        "style": {
            "stroke": "#6f2fa0",
            "fill": "#dbcbe7",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "22a622e6e3a77723",
            "ad9e883957d3685b",
            "b8246bec0ff6bd43",
            "1f58fb8b96bce92e",
            "7dc2883e2ed41873",
            "f43072220deb7eb3",
            "7e42775797773e47"
        ],
        "x": 14,
        "y": 399,
        "w": 782,
        "h": 202
    },
    {
        "id": "f0bc3c69188895b3",
        "type": "group",
        "z": "b056b4cf9a298e0d",
        "name": "Cara003",
        "style": {
            "stroke": "#6f2fa0",
            "fill": "#dbcbe7",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "7e40046c60ee2860",
            "fdb7e2982875f8ba",
            "323b84f05b7a90a2",
            "e851ebc98b56550e",
            "0b1f4c3a444e4988",
            "90effe8f20f81252",
            "e789e8e1711a246d"
        ],
        "x": 14,
        "y": 619,
        "w": 782,
        "h": 162
    },
    {
        "id": "ef9e0b05387b0f7f",
        "type": "group",
        "z": "b056b4cf9a298e0d",
        "name": "Cara005",
        "style": {
            "stroke": "#6f2fa0",
            "fill": "#dbcbe7",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ca6fc1c375a4484a",
            "81702d1a90090e50",
            "5dbd7316c3660276",
            "6fdb94005210418f",
            "d5f490ad8e2a8675",
            "376f1e1e0b41f292",
            "592ea0f1449e87e8"
        ],
        "x": 14,
        "y": 979,
        "w": 782,
        "h": 162
    },
    {
        "id": "cf3c6d5c39d2c130",
        "type": "group",
        "z": "b056b4cf9a298e0d",
        "name": "Cara004",
        "style": {
            "label": true,
            "stroke": "#6f2fa0",
            "fill": "#dbcbe7"
        },
        "nodes": [
            "35a82e75ac72f0d7",
            "48e47a4a4fa7878c",
            "15db43e96aacebc7",
            "6513cbef9618b513",
            "0419ec0ef4ea5662",
            "1c364c42988add9a",
            "2251ca56c78e191a"
        ],
        "x": 14,
        "y": 799,
        "w": 782,
        "h": 162
    },
    {
        "id": "aebc254432ed2103",
        "type": "group",
        "z": "b056b4cf9a298e0d",
        "name": "Función para recuperar textos en rango",
        "style": {
            "stroke": "#3f93cf",
            "fill": "#3f93cf",
            "label": true
        },
        "nodes": [
            "c5ae80492cc45acc",
            "6fec583b8ba2414b",
            "1afbd2ca7999e2cb",
            "3ebb0818b8ba2406"
        ],
        "x": 1074,
        "y": 699,
        "w": 692,
        "h": 162
    },
    {
        "id": "dfefd42be31cab40",
        "type": "mqtt-broker",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "64cdcf7a3b4cd223",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "950c05f1ac2d3f82",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "Arial Black,Arial Black,Gadget,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "La Caja Game",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "afc96c5537aa9bd2",
        "type": "ui_tab",
        "name": "Tarea 1 + extra",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5b43d9b58de38c94",
        "type": "ui_group",
        "name": "Time",
        "tab": "89e7d4e0c36d9489",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": "<style>     #nr-dashboard-cardtitle{text-align: center !important;} </style>"
    },
    {
        "id": "fadc24b19848c47b",
        "type": "ui_group",
        "name": "Control LED Verde",
        "tab": "afc96c5537aa9bd2",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "13bc2dd9a45cc0e9",
        "type": "ui_group",
        "name": "Temperatura",
        "tab": "afc96c5537aa9bd2",
        "order": 3,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "cb79f73074024dbb",
        "type": "ui_group",
        "name": "Humedad",
        "tab": "afc96c5537aa9bd2",
        "order": 4,
        "disp": false,
        "width": "8",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d27cc3eaafc9bcc8",
        "type": "ui_group",
        "name": "Presión",
        "tab": "afc96c5537aa9bd2",
        "order": 5,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "96d7b634fbe25751",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "9ff8455e4877d275",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "1482f7c9cab5d4a1",
        "type": "ui_group",
        "name": "Dato ADC",
        "tab": "afc96c5537aa9bd2",
        "order": 6,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "c8b2b5778aed34b0",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "251fc0d11da602c6",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "59aa107107b6074e",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "a15e8808fd506feb",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "ec6230cd34b267ef",
        "type": "ui_tab",
        "name": "Tarea 2",
        "icon": "dashboard",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "6d8ffaa69a25c68f",
        "type": "ui_group",
        "name": "Control LED Rojo",
        "tab": "ec6230cd34b267ef",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": "<style>     #nr-dashboard-cardtitle{text-align: center !important;} </style>"
    },
    {
        "id": "e8ccf6ad47502312",
        "type": "ui_group",
        "name": "Control LED Verde",
        "tab": "ec6230cd34b267ef",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "60916e8014cfd3f7",
        "type": "ui_group",
        "name": "Temperatura",
        "tab": "ec6230cd34b267ef",
        "order": 3,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8599d9afed430a9d",
        "type": "ui_group",
        "name": "Humedad",
        "tab": "ec6230cd34b267ef",
        "order": 4,
        "disp": false,
        "width": "8",
        "collapse": false,
        "className": ""
    },
    {
        "id": "386ddfb962d0c80d",
        "type": "ui_group",
        "name": "Presión",
        "tab": "ec6230cd34b267ef",
        "order": 5,
        "disp": false,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bb45de54a7fe18b8",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "c9c513303f389c7d",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "3d72c6d43da61785",
        "type": "ui_group",
        "name": "Conexión",
        "tab": "ec6230cd34b267ef",
        "order": 6,
        "disp": true,
        "width": "8",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bf64e5c6fbbba3c3",
        "type": "ui_group",
        "name": "Dato ADC",
        "tab": "ec6230cd34b267ef",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "498b706769fb5160",
        "type": "ui_tab",
        "name": "Tarea 4",
        "icon": "dashboard",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "d20b3cd14e645d48",
        "type": "ui_group",
        "name": "Humedad",
        "tab": "498b706769fb5160",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8a548b476cc419b4",
        "type": "ui_group",
        "name": "Temperatura",
        "tab": "498b706769fb5160",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "e968a1c70a34a463",
        "type": "ui_group",
        "name": "Sensación térmica",
        "tab": "498b706769fb5160",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ff340c796cfbcd07",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "ce30e442c74a8757",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "b838b28975e115b3",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "25d3b348baa44989",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "3faf59b5c0904ba0",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "69f9be3977f6a86b",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "a5a79e0203c5b083",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "387bddd0cc6d1f12",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "70257f4534da7029",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "284e0b37b67b2822",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "e8038adf457b4465",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "6ac432b491b7d6fc",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "ca0dd972168dc6a0",
        "type": "mongodb",
        "hostname": "iot.ac.uma.es",
        "topology": "direct",
        "connectOptions": "",
        "port": "27017",
        "db": "pruebas",
        "name": ""
    },
    {
        "id": "05cea6759e795a87",
        "type": "mongodb",
        "hostname": "127.0.0.1",
        "topology": "direct",
        "connectOptions": "",
        "port": "27017",
        "db": "local",
        "name": ""
    },
    {
        "id": "cd777711829327e5",
        "type": "ui_tab",
        "name": "Tarea 3",
        "icon": "dashboard",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "cbfbdc48914b032d",
        "type": "ui_group",
        "name": "Conexiones",
        "tab": "cd777711829327e5",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2888ca9d00385ef8",
        "type": "ui_group",
        "name": "LED Rojo",
        "tab": "cd777711829327e5",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "98ee1182cc353ad6",
        "type": "ui_group",
        "name": "Presión",
        "tab": "cd777711829327e5",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "c271ce14649409b0",
        "type": "ui_group",
        "name": "Humedad",
        "tab": "cd777711829327e5",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4f2fd049c27a14a1",
        "type": "ui_group",
        "name": "Temperatura",
        "tab": "cd777711829327e5",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f8b2658284e752dc",
        "type": "ui_group",
        "name": "LED Verde",
        "tab": "cd777711829327e5",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f4f4dc208bbef1ee",
        "type": "ui_group",
        "name": "Consultas Slider",
        "tab": "cd777711829327e5",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9eaa5333ae7be1f9",
        "type": "ui_group",
        "name": "Consultas numeric",
        "tab": "cd777711829327e5",
        "order": 8,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "24a2032a9df17ba3",
        "type": "ui_group",
        "name": "Consultas Range",
        "tab": "cd777711829327e5",
        "order": 9,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8b67b1bd51c43347",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "b8b5fb6b4bfeb434",
        "type": "ui_group",
        "name": "Estado y LWT",
        "tab": "4a06ba0a96f6d1fb",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "27e360b8dee7f0ae",
        "type": "ui_group",
        "name": "G3 Datos",
        "tab": "4a06ba0a96f6d1fb",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4a06ba0a96f6d1fb",
        "type": "ui_tab",
        "name": "Home",
        "icon": "dashboard",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "b8514a208e81c49e",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "3dc9ec03600ab1b0",
        "type": "ui_group",
        "name": "datos",
        "tab": "547a5b5e59839162",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "95bf002b73b4a351",
        "type": "ui_group",
        "name": "Default",
        "tab": "f3101f3b8af327c7",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "547a5b5e59839162",
        "type": "ui_tab",
        "name": "elquequerais",
        "icon": "dashboard",
        "order": 8,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f3101f3b8af327c7",
        "type": "ui_tab",
        "name": "LEDs",
        "icon": "dashboard",
        "order": 9,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ec5e3bd27f5064bc",
        "type": "ui_group",
        "name": "Datos dispositivo",
        "tab": "da9051b8aca9da78",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "69f47afb1a3237b5",
        "type": "ui_group",
        "name": "Gráficas",
        "tab": "da9051b8aca9da78",
        "order": 2,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "142ed0bb263fc1a7",
        "type": "ui_group",
        "name": "Estado LEDs",
        "tab": "da9051b8aca9da78",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "da9051b8aca9da78",
        "type": "ui_tab",
        "name": "Dashboard Principal",
        "icon": "dashboard",
        "order": 10,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "9ffa43d52f7365a9",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "f8e3360024a8fede",
        "type": "ui_group",
        "name": "Datos dispositivo",
        "tab": "906601726774ec61",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9de2c791b931a51a",
        "type": "ui_group",
        "name": "Histórico",
        "tab": "906601726774ec61",
        "order": 2,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b0172c0d62a7dc67",
        "type": "ui_group",
        "name": "LEDs",
        "tab": "906601726774ec61",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "906601726774ec61",
        "type": "ui_tab",
        "name": "Grupo1",
        "icon": "dashboard",
        "order": 11,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "fd4ef32ed97b3267",
        "type": "ui_tab",
        "name": "Información Completa",
        "icon": "dashboard",
        "order": 12,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f05d79154bee32af",
        "type": "ui_group",
        "name": "Conexiones",
        "tab": "fd4ef32ed97b3267",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d65024e343511220",
        "type": "ui_group",
        "name": "Gráficas",
        "tab": "fd4ef32ed97b3267",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "995da68e7598652e",
        "type": "ui_group",
        "name": "Datos del Dispositivo",
        "tab": "fd4ef32ed97b3267",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "b266f63deeb3007d",
        "type": "ui_group",
        "name": "LEDs",
        "tab": "fd4ef32ed97b3267",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4a17300d61e0065b",
        "type": "ui_group",
        "name": "Control LEDs",
        "tab": "da9051b8aca9da78",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "76fc120df06c3d4a",
        "type": "ui_group",
        "name": "Conexiones",
        "tab": "da9051b8aca9da78",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "74b28a5e7c866247",
        "type": "ui_group",
        "name": "ESP82",
        "tab": "423b6a130b684fb2",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "11e77274e18f5e66",
        "type": "ui_group",
        "name": "Control LEDs JSON",
        "tab": "da9051b8aca9da78",
        "order": 6,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "6d4110de9bf1bcf5",
        "type": "ui_group",
        "name": "Estado LEDs (sin bugs JSON)",
        "tab": "da9051b8aca9da78",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4f161821e0636e81",
        "type": "ui_group",
        "name": "Datos Dispositivo 2.0",
        "tab": "da9051b8aca9da78",
        "order": 8,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f229aa351b50819b",
        "type": "mongodb",
        "hostname": "127.0.0.1",
        "topology": "direct",
        "connectOptions": "",
        "port": "27017",
        "db": "pruebas",
        "name": ""
    },
    {
        "id": "2222263843bdba85",
        "type": "ui_tab",
        "name": "MongoDB",
        "icon": "dashboard",
        "order": 13,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "5f8d4c27dcbd6798",
        "type": "ui_group",
        "name": "Default",
        "tab": "2222263843bdba85",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "71800cda9a1eabf9",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "6046a47177835823",
        "type": "mongodb",
        "hostname": "127.0.0.1",
        "connectOptions": "",
        "port": "27017",
        "db": "test",
        "name": ""
    },
    {
        "id": "71d4105137694090",
        "type": "ui_group",
        "name": "Consulta",
        "tab": "4db8e8aa79d93f4e",
        "order": 1,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4db8e8aa79d93f4e",
        "type": "ui_tab",
        "name": "Ejemplo Mongo",
        "icon": "dashboard",
        "order": 14,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "423b6a130b684fb2",
        "type": "ui_tab",
        "name": "ESP82",
        "icon": "dashboard",
        "order": 15,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "89e7d4e0c36d9489",
        "type": "ui_tab",
        "name": "LaCaja - Debug",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1d5a7f2c4047edc7",
        "type": "ui_group",
        "name": "Controles Consulta",
        "tab": "4db8e8aa79d93f4e",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "638e08dab45a6aee",
        "type": "ui_group",
        "name": "Datos Sensor",
        "tab": "423b6a130b684fb2",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "98c3801e20c06bc5",
        "type": "ui_group",
        "name": "Consulta Tiempo",
        "tab": "4db8e8aa79d93f4e",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "81d3b2a6dd28b58e",
        "type": "ui_group",
        "name": "Gráfica",
        "tab": "4db8e8aa79d93f4e",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ef2c90a21fdbd37b",
        "type": "ui_group",
        "name": "Mensaje",
        "tab": "423b6a130b684fb2",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f605fa69.8f5008",
        "type": "mongodb",
        "hostname": "iot.ac.uma.es",
        "connectOptions": "",
        "port": "27017",
        "db": "examen",
        "name": ""
    },
    {
        "id": "c7a3425e606353b2",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "1f33bd2091f1c0f0",
        "type": "telegram bot",
        "botname": "botagendabot",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "3752afa1.deaf9",
        "type": "mongodb",
        "hostname": "iot.ac.uma.es",
        "connectOptions": "",
        "port": "27017",
        "db": "pruebas",
        "name": ""
    },
    {
        "id": "a34ffe7a.04009",
        "type": "ui_group",
        "name": "Grupo descarga",
        "tab": "e63432e4.6c1e",
        "order": 1,
        "disp": true,
        "width": "8",
        "collapse": false
    },
    {
        "id": "2b251178.95ad2e",
        "type": "mqtt-broker",
        "name": "iot infind",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "e63432e4.6c1e",
        "type": "ui_tab",
        "name": "Ejemplo descarga",
        "icon": "dashboard",
        "order": 16,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "970b2d92940cc035",
        "type": "ui_group",
        "name": "Grupo aggregación",
        "tab": "078c073b376af0aa",
        "order": 1,
        "disp": true,
        "width": "10",
        "collapse": false
    },
    {
        "id": "078c073b376af0aa",
        "type": "ui_tab",
        "name": "Agregación",
        "icon": "dashboard",
        "order": 17,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "14bda206c3f7ab91",
        "type": "ui_tab",
        "name": "Examen",
        "icon": "dashboard",
        "order": 18,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ef4e3347ed457b9c",
        "type": "ui_group",
        "name": "Input",
        "tab": "14bda206c3f7ab91",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2f39551d1464f827",
        "type": "ui_group",
        "name": "Game Status",
        "tab": "89e7d4e0c36d9489",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2156a9e02110da25",
        "type": "ui_tab",
        "name": "LaCaja - User",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f870df7d6c3cc2e9",
        "type": "ui_group",
        "name": "Game Status",
        "tab": "2156a9e02110da25",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bd903d6.d9fc7c",
        "type": "ui_group",
        "name": "Report",
        "tab": "1e3fe400.0baf5c",
        "order": 2,
        "disp": true,
        "width": "18"
    },
    {
        "id": "1e17cd0b.862863",
        "type": "ui_group",
        "name": "Selection",
        "tab": "1e3fe400.0baf5c",
        "order": 1,
        "disp": true,
        "width": "5"
    },
    {
        "id": "1e3fe400.0baf5c",
        "type": "ui_tab",
        "name": "Reports",
        "icon": "dashboard",
        "order": 9
    },
    {
        "id": "5359497a2a301f2a",
        "type": "ui_group",
        "name": "JuegoSimon",
        "tab": "2ec127612123211b",
        "order": 1,
        "disp": true,
        "width": "10",
        "collapse": false,
        "className": ""
    },
    {
        "id": "2ec127612123211b",
        "type": "ui_tab",
        "name": "LaCaja",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "f2d93db89ab63446",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "3999f8259e1b43de",
        "type": "mqtt-broker",
        "name": "",
        "broker": "iot.ac.uma.es",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "d95354d46509e771",
        "type": "telegram bot",
        "botname": "ChiquiBot",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksprotocol": "socks5",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "96e271eba0b52a94",
        "type": "mongodb",
        "hostname": "iot.ac.uma.es",
        "topology": "direct",
        "connectOptions": "",
        "port": "27017",
        "db": "II3",
        "name": ""
    },
    {
        "id": "9fd09ec59450a624",
        "type": "telegram bot",
        "botname": "Tarea_9_Irene",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksprotocol": "socks5",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "da9d18fd4873c01a",
        "type": "telegram bot",
        "botname": "Simonbot",
        "usernames": "",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksprotocol": "socks5",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "219ce9d84d63af72",
        "type": "ui_group",
        "name": "Game Status",
        "tab": "9198a8f9e2a34ed3",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9198a8f9e2a34ed3",
        "type": "ui_tab",
        "name": "LaCaja - User",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "37ec8e592794dd5a",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Iluminacion",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.ADC.Iluminacion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "cbca515058def3f9",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Temperatura",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Temperatura",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "965433bea2abdd7f",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Humedad",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Humedad",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "02ad691c4d094030",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Presion",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.BME280.Presion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "3ab993c9aaeb02a9",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Rojo",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.LEDs.Rojo",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "ed54312aaa364df5",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Verde",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.LEDs.Verde",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "8579e5a838f746f2",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "ChipID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.nodeID.ChipID",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "c80f38ea1c9620b4",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "Des",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.Des",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "4e09efcff6e84b0c",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "SSID",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.SSID",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "95164f1d4c36c5d5",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "RSSI",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.RSSI",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "6c4c38ff165dbd18",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "localIP",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.localIP",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "b03cec66fb391724",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "macAddress",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.macAddress",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "b0c38e47413631d4",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "uptime_ms",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.uptime_ms",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "fa36c4f9fd494fa8",
        "type": "change",
        "z": "1736e63b25650818",
        "name": "interval_s",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.conexion.interval_s",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "d8fc63694048f63f",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Foto: Inicial del juego",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.content = \"/home/rhyloo/nol/pics/prueba1_preview.png\";\nmsg.payload.type = 'photo';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 60,
        "wires": [
            [
                "95e3ae4c7cf01afe",
                "30a9a1de061806a0"
            ]
        ]
    },
    {
        "id": "60f7d5fedf815de3",
        "type": "mongodb in",
        "z": "7cbc96056c55979a",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "recursos_de_las_pruebas",
        "operation": "aggregate",
        "x": 830,
        "y": 300,
        "wires": [
            [
                "50d67abb826b5bad",
                "47a99b0fd9516842"
            ]
        ]
    },
    {
        "id": "ee71b9a0dd9d7153",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Recupera un acertijo aleatorio de la base de datos",
        "func": "msg.payload = [{ $match: { \"filename\": \"acertijos_cara002.json\" } },\n                { $unwind: \"$payload\" },\n                { \"$sample\": { \"size\": 1 } },\n                { $replaceRoot: { newRoot: \"$payload\" } }];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 300,
        "wires": [
            [
                "60f7d5fedf815de3"
            ]
        ]
    },
    {
        "id": "662f7e25afd3725e",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "Get puzzle",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].content",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1270,
        "y": 300,
        "wires": [
            [
                "20ef49c17eb61b27"
            ]
        ]
    },
    {
        "id": "f3b847c371af68b1",
        "type": "complete",
        "z": "7cbc96056c55979a",
        "name": "",
        "scope": [
            "951ddf27018e089f"
        ],
        "uncaught": false,
        "x": 90,
        "y": 300,
        "wires": [
            [
                "ee71b9a0dd9d7153"
            ]
        ]
    },
    {
        "id": "47a99b0fd9516842",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "Get ans",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].ans",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 340,
        "wires": [
            [
                "b17841f01894f976"
            ]
        ]
    },
    {
        "id": "e658caa098e07164",
        "type": "delay",
        "z": "7cbc96056c55979a",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 300,
        "y": 180,
        "wires": [
            [
                "951ddf27018e089f"
            ]
        ]
    },
    {
        "id": "45a21b9fac9c3de7",
        "type": "mqtt in",
        "z": "7cbc96056c55979a",
        "name": "",
        "topic": "II3/ESP002/pub/cara002",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "2b251178.95ad2e",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 110,
        "y": 440,
        "wires": [
            [
                "99f8ad3df90e445c",
                "e2e49d26f6fd4e46",
                "33612072a9903295",
                "5c2cf1620e7bb78b",
                "2eb58ec64814c2b3"
            ]
        ]
    },
    {
        "id": "01f722175d46f796",
        "type": "ui_text",
        "z": "7cbc96056c55979a",
        "group": "f870df7d6c3cc2e9",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Número introducido",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1490,
        "y": 40,
        "wires": []
    },
    {
        "id": "50d67abb826b5bad",
        "type": "delay",
        "z": "7cbc96056c55979a",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1120,
        "y": 300,
        "wires": [
            [
                "662f7e25afd3725e"
            ]
        ]
    },
    {
        "id": "95e3ae4c7cf01afe",
        "type": "link out",
        "z": "7cbc96056c55979a",
        "name": "link out 14",
        "mode": "link",
        "links": [
            "f467c017da051f39"
        ],
        "x": 1725,
        "y": 60,
        "wires": []
    },
    {
        "id": "f467c017da051f39",
        "type": "link in",
        "z": "7cbc96056c55979a",
        "name": "link in 25",
        "links": [
            "95e3ae4c7cf01afe",
            "d29bf012134f8ffe",
            "d70f73aa1eeae7b7",
            "d638963d2d5d1a35",
            "2731515564e2a084",
            "a683ded7ea3cc190",
            "3ad526a566996839"
        ],
        "x": 2025,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "d29bf012134f8ffe",
        "type": "link out",
        "z": "7cbc96056c55979a",
        "name": "link out 15",
        "mode": "link",
        "links": [
            "f467c017da051f39"
        ],
        "x": 1725,
        "y": 180,
        "wires": []
    },
    {
        "id": "d70f73aa1eeae7b7",
        "type": "link out",
        "z": "7cbc96056c55979a",
        "name": "link out 16",
        "mode": "link",
        "links": [
            "f467c017da051f39"
        ],
        "x": 1725,
        "y": 300,
        "wires": []
    },
    {
        "id": "b17841f01894f976",
        "type": "mqtt out",
        "z": "7cbc96056c55979a",
        "name": "",
        "topic": "II3/ESP002/cmd/cara002",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 1350,
        "y": 340,
        "wires": []
    },
    {
        "id": "99f8ad3df90e445c",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "State",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "2eb58ec64814c2b3",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "gameinfo",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.gameinfo",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "7a3228361c8fbb4b",
        "type": "delay",
        "z": "7cbc96056c55979a",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 300,
        "y": 240,
        "wires": [
            [
                "47fda2aa80a73f98"
            ]
        ]
    },
    {
        "id": "d638963d2d5d1a35",
        "type": "link out",
        "z": "7cbc96056c55979a",
        "name": "link out 42",
        "mode": "link",
        "links": [
            "f467c017da051f39"
        ],
        "x": 1725,
        "y": 240,
        "wires": []
    },
    {
        "id": "47fda2aa80a73f98",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "+Instrucciones",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.content= \"El acertijo es el siguiente: \";\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 240,
        "wires": [
            [
                "d638963d2d5d1a35"
            ]
        ]
    },
    {
        "id": "951ddf27018e089f",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Instrucciones",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.content = \"Recordad que podéis utilizar el botón de \\\"Pista\\\" para obtener una pista adicional. ¡Buena suerte a todos!\";\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 180,
        "wires": [
            [
                "d29bf012134f8ffe",
                "7a3228361c8fbb4b"
            ]
        ]
    },
    {
        "id": "1a20248644484714",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Mensaje: Inicia el juego",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.type = \"message\";\nmsg.payload.content = \"¡Bienvenidos a la primera prueba de \\\"La Caja\\\"! Para resolver esta prueba, tendréis que utilizar el numpad disponible en la caja para introducir un número de dos dígitos.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 120,
        "wires": [
            [
                "2731515564e2a084",
                "e658caa098e07164"
            ]
        ]
    },
    {
        "id": "2731515564e2a084",
        "type": "link out",
        "z": "7cbc96056c55979a",
        "name": "link out 43",
        "mode": "link",
        "links": [
            "f467c017da051f39"
        ],
        "x": 1725,
        "y": 120,
        "wires": []
    },
    {
        "id": "30a9a1de061806a0",
        "type": "delay",
        "z": "7cbc96056c55979a",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "1a20248644484714"
            ]
        ]
    },
    {
        "id": "19e8c8726cf10ee7",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "terminado?",
        "func": "if (msg.payload == 2){\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 860,
        "wires": [
            [
                "fd123d5df6b8a4f3"
            ]
        ]
    },
    {
        "id": "fd123d5df6b8a4f3",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Mensaje: Inicia el juego",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.type = \"message\";\nmsg.payload.content = \"¡Felicidades por haber pasado la primera prueba de \\\"La Caja\\\"! Estamos impresionados por vuestra habilidad para resolver el acertijo.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 920,
        "wires": [
            [
                "a683ded7ea3cc190",
                "2ef4b606db53ca11"
            ]
        ]
    },
    {
        "id": "a683ded7ea3cc190",
        "type": "link out",
        "z": "7cbc96056c55979a",
        "name": "link out 44",
        "mode": "link",
        "links": [
            "f467c017da051f39"
        ],
        "x": 1585,
        "y": 920,
        "wires": []
    },
    {
        "id": "651287b90e979c55",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Mensaje: Inicia el juego",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.type = \"message\";\nmsg.payload.content = \"Estamos seguros de que seguiréis demostrando vuestras habilidades a lo largo del juego. ¡Seguid adelante y no dejéis que nada os detenga! ¡Buena suerte en la siguiente prueba!\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 980,
        "wires": [
            [
                "3ad526a566996839"
            ]
        ]
    },
    {
        "id": "2ef4b606db53ca11",
        "type": "delay",
        "z": "7cbc96056c55979a",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 720,
        "y": 980,
        "wires": [
            [
                "651287b90e979c55"
            ]
        ]
    },
    {
        "id": "3ad526a566996839",
        "type": "link out",
        "z": "7cbc96056c55979a",
        "name": "link out 45",
        "mode": "link",
        "links": [
            "f467c017da051f39"
        ],
        "x": 1585,
        "y": 980,
        "wires": []
    },
    {
        "id": "f7990599de758aac",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Send an inline message",
        "func": "var texto = msg.payload;\nmsg.payload = global.get(\"user\");\nmsg.payload.content = texto;\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "20ef49c17eb61b27",
        "type": "function",
        "z": "7cbc96056c55979a",
        "name": "Send an inline message",
        "func": "var texto = msg.payload;\nmsg.payload = global.get(\"user\");\nmsg.payload.content = \"*\";\nmsg.payload.content += texto;\nmsg.payload.content += \"*\";\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1530,
        "y": 300,
        "wires": [
            [
                "d70f73aa1eeae7b7"
            ]
        ]
    },
    {
        "id": "33612072a9903295",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "trytime",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.trytime",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "5c2cf1620e7bb78b",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "numtries",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.numtries",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "e2e49d26f6fd4e46",
        "type": "change",
        "z": "7cbc96056c55979a",
        "name": "gametime",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.gametime",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "0acde4c796f02db3",
        "type": "complete",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "scope": [
            "ac7dfeb5cf992750"
        ],
        "uncaught": false,
        "x": 170,
        "y": 180,
        "wires": [
            [
                "3f20526c93fc2976"
            ]
        ]
    },
    {
        "id": "3f20526c93fc2976",
        "type": "delay",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 360,
        "y": 180,
        "wires": [
            [
                "bc5e1aff13f86696"
            ]
        ]
    },
    {
        "id": "9f114dbce8fa9b53",
        "type": "telegram command",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "command": "/ayuda2",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "d95354d46509e771",
        "strict": false,
        "hasresponse": false,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 1,
        "x": 150,
        "y": 120,
        "wires": [
            [
                "1699125b4b0f183c"
            ]
        ]
    },
    {
        "id": "bc5e1aff13f86696",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "Start Game",
        "func": "msg.payload= {\"state\":1, \"reducir_secuencia\":0};\nmsg.topic = \"II3/ESP14440037/datos_juego2\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 180,
        "wires": [
            [
                "0fa8f0d66dddee5f"
            ]
        ]
    },
    {
        "id": "d5422d86349077ea",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "mensaje respuesta",
        "func": "msg.payload= \"No abuses del comando que acabas de utilizar, tus puntaciones quedarán registradas. \\n\";\nmsg.payload+=\"Se ha reducido en '1' el número de secuencias que debes acertar para ganar el juego. Quizás con esta ayudita puedas conseguir superar la prueba, sino recuerda que puedes usar el comando: \\n/ayuda2\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "ac7dfeb5cf992750",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "mensaje bienvenida",
        "func": "msg.payload=\"Hey amigo/a, ya estás en el segundo nivel del juego 'La Caja'. Enhorabuena, pero no sonrías tan pronto porque debes de superar esta prueba. Para resolver este nivel, juega al Simon y gana. Si necesitas algo, puedes pulsar el comando: \\n/ayuda2\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "1699125b4b0f183c",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "info telegram user",
        "func": "msg.payload= {\"empieza_juego2\":1, \"reducir_secuencia\":1};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 120,
        "wires": [
            [
                "d5422d86349077ea",
                "0fa8f0d66dddee5f"
            ]
        ]
    },
    {
        "id": "c396cce8f8361451",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "func": "msg.payload= {\"state\":1, \"reducir_secuencia\":0};\n//msg.topic = \"II3/ESP14440037/datos_juego2\";\nmsg.topic =\"II3/ESP14440037/datos_juego2\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 780,
        "wires": [
            [
                "944f25fe086ec57d",
                "d4b49bc94f317197",
                "4c63f309e596ec62"
            ]
        ]
    },
    {
        "id": "0a0c47359b1a98d2",
        "type": "mqtt in",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "topic": "II3/ESP14440037/resultados_juego2",
        "qos": "0",
        "datatype": "auto",
        "broker": "2b251178.95ad2e",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 240,
        "y": 340,
        "wires": [
            [
                "b2e8bf8ff160cecf",
                "3179cf7e6fc7a5f9"
            ]
        ]
    },
    {
        "id": "b2e8bf8ff160cecf",
        "type": "debug",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 530,
        "y": 280,
        "wires": []
    },
    {
        "id": "944f25fe086ec57d",
        "type": "debug",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 820,
        "wires": []
    },
    {
        "id": "d4b49bc94f317197",
        "type": "change",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "389aec60cf888f6b",
        "type": "ui_text",
        "z": "72ea5fcb0b022fe1",
        "group": "f870df7d6c3cc2e9",
        "order": 7,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Tiempo partida total: ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1400,
        "y": 280,
        "wires": []
    },
    {
        "id": "96af37f5e6e600d7",
        "type": "ui_text",
        "z": "72ea5fcb0b022fe1",
        "group": "f870df7d6c3cc2e9",
        "order": 8,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Tiempo partida actual:  ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1400,
        "y": 340,
        "wires": []
    },
    {
        "id": "5daa642f63fb92a4",
        "type": "change",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.aciertos_por_partida",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 400,
        "wires": [
            [
                "16db2d8abaf06bd6"
            ]
        ]
    },
    {
        "id": "16db2d8abaf06bd6",
        "type": "ui_text",
        "z": "72ea5fcb0b022fe1",
        "group": "f870df7d6c3cc2e9",
        "order": 9,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Aciertos por partida:  ",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1400,
        "y": 400,
        "wires": []
    },
    {
        "id": "3179cf7e6fc7a5f9",
        "type": "json",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 340,
        "wires": [
            [
                "5daa642f63fb92a4",
                "468e9211a838685c",
                "36f4edce8a725ba5",
                "533be197ee698298",
                "d7b279830c877d20"
            ]
        ]
    },
    {
        "id": "468e9211a838685c",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "func": "var tiempo = msg.payload.tiempo_partida_total;\n\nvar minutos = Math.trunc(tiempo/(1000*60));\n    tiempo = tiempo - minutos*60*1000;\nvar segundos = Math.trunc(tiempo/(1000));\n\nmsg.payload = minutos +\":\"+segundos;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 280,
        "wires": [
            [
                "389aec60cf888f6b"
            ]
        ]
    },
    {
        "id": "36f4edce8a725ba5",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "func": "var tiempo = msg.payload.tiempo_partida_actual;\n\nvar minutos = Math.trunc(tiempo/(1000*60));\n    tiempo = tiempo - minutos*60*1000;\nvar segundos = Math.trunc(tiempo/(1000));\n\nmsg.payload = minutos +\":\"+segundos;\nreturn msg;\n\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 340,
        "wires": [
            [
                "96af37f5e6e600d7"
            ]
        ]
    },
    {
        "id": "2434dcb911ad72ca",
        "type": "ui_button",
        "z": "72ea5fcb0b022fe1",
        "name": "Start",
        "group": "f870df7d6c3cc2e9",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Start",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 150,
        "y": 780,
        "wires": [
            [
                "c396cce8f8361451"
            ]
        ]
    },
    {
        "id": "f3dccf0c40acb14b",
        "type": "mqtt in",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "topic": "II3/ESP14440037/estado_juego2",
        "qos": "0",
        "datatype": "auto",
        "broker": "2b251178.95ad2e",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 230,
        "y": 740,
        "wires": [
            [
                "d97fe414beeacd6a"
            ]
        ]
    },
    {
        "id": "d97fe414beeacd6a",
        "type": "json",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 450,
        "y": 740,
        "wires": [
            [
                "d4b49bc94f317197",
                "be12d3481b65aef4",
                "eebe47aca36fb577"
            ]
        ]
    },
    {
        "id": "fa4ff7af71006060",
        "type": "mongodb out",
        "z": "72ea5fcb0b022fe1",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "records_cara003",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 1380,
        "y": 460,
        "wires": []
    },
    {
        "id": "533be197ee698298",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "+ fecha",
        "func": "msg.payload.date = new Date();\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 460,
        "wires": [
            [
                "fa4ff7af71006060"
            ]
        ]
    },
    {
        "id": "48ccd2eb16d7d281",
        "type": "mongodb in",
        "z": "72ea5fcb0b022fe1",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "records_cara003",
        "operation": "find",
        "x": 640,
        "y": 580,
        "wires": [
            [
                "a02e951529342c38",
                "0c66d54ac2cb33ee"
            ]
        ]
    },
    {
        "id": "a02e951529342c38",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "genera datos gráfica",
        "func": "var arraytiempo=[];\nvar arrayaciertos=[];\n\n// los arrays usados en la represenstación gráfica deben contener objetos JSON con dos campos: {x , y}\n// en x debemos poner la hora en formato \"timestamp\". Si tenemos un objeto fecha se puede convertir usando el método getTime()\n// en y debemos poner el valor de la variable\n// mas info en: https://github.com/node-red/node-red-dashboard/blob/master/Charts.md\n\nif(Array.isArray(msg.payload) && msg.payload.length>0)\n{\n    for (var i = 0; i < msg.payload.length; i++) { // añade datos a los arrays\n        //arraytiempo.push({x : msg.payload[i].date.getTime() , y : msg.payload[i].tiempo_partida_actual});\n        arraytiempo.push({x : Math.trunc(msg.payload[i].tiempo_partida_total/1000) , y : msg.payload[i].aciertos_por_partida});\n        //arrayaciertos.push({x : msg.payload[i].date.getTime() , y : msg.payload[i].aciertos_por_partida});\n    }\n}\n    \nmsg.payload = [{\n        //\"series\":[\"Tiempo_partida_actual\",\"Aciertos_por_partida\"],\n        //\"data\":[arraytiempo, arrayaciertos],\n        \"series\":[\"Aciertos_por_partida\"],\n        \"data\":[arraytiempo],\n        \"labels\":[\"\"]\n        }];\n\nreturn msg;  ",
        "outputs": "1",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 580,
        "wires": [
            [
                "88af94195d1aef44",
                "8255e48346b2b242"
            ]
        ]
    },
    {
        "id": "88af94195d1aef44",
        "type": "ui_chart",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "group": "f870df7d6c3cc2e9",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "Registro resultados",
        "chartType": "line",
        "legend": "true",
        "xformat": "auto",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "20",
        "removeOlder": "10",
        "removeOlderPoints": "",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1410,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "56e2082898110e66",
        "type": "function",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "func": "msg.sort = {\"date\" : -1}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 580,
        "wires": [
            [
                "48ccd2eb16d7d281"
            ]
        ]
    },
    {
        "id": "ad7db8353ffabfd1",
        "type": "ui_button",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "group": "f870df7d6c3cc2e9",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Ver resultados",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "{ }",
        "payloadType": "json",
        "topic": "topic",
        "topicType": "str",
        "x": 180,
        "y": 580,
        "wires": [
            [
                "56e2082898110e66"
            ]
        ]
    },
    {
        "id": "0c66d54ac2cb33ee",
        "type": "debug",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 850,
        "y": 620,
        "wires": []
    },
    {
        "id": "8255e48346b2b242",
        "type": "debug",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1230,
        "y": 620,
        "wires": []
    },
    {
        "id": "d7b279830c877d20",
        "type": "debug",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 750,
        "y": 220,
        "wires": []
    },
    {
        "id": "4c63f309e596ec62",
        "type": "mqtt out",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "topic": "II3/ESP14440037/datos_juego2",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 1370,
        "y": 780,
        "wires": []
    },
    {
        "id": "0fa8f0d66dddee5f",
        "type": "mqtt out",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "topic": "II3/ESP14440037/datos_juego2",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 1170,
        "y": 180,
        "wires": []
    },
    {
        "id": "be12d3481b65aef4",
        "type": "debug",
        "z": "72ea5fcb0b022fe1",
        "name": "debug 32",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 680,
        "wires": []
    },
    {
        "id": "eebe47aca36fb577",
        "type": "change",
        "z": "72ea5fcb0b022fe1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.clock",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "f016bc1d142a0eb9",
        "type": "function",
        "z": "90d9a362f6d9804b",
        "name": "Mensaje: Inicia el juego",
        "func": "msg.payload = \"El juego 5 ha comenzado!\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 180,
        "wires": [
            [
                "faf8321602dd30ff"
            ]
        ]
    },
    {
        "id": "254398daec3d12f8",
        "type": "change",
        "z": "90d9a362f6d9804b",
        "name": "Get puzzle",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].content",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1450,
        "y": 300,
        "wires": [
            [
                "c5e7218cb59fa9d3"
            ]
        ]
    },
    {
        "id": "a850f82e9954bb89",
        "type": "complete",
        "z": "90d9a362f6d9804b",
        "name": "",
        "scope": [
            "3ec53b27288a9a62"
        ],
        "uncaught": false,
        "x": 90,
        "y": 320,
        "wires": [
            [
                "c3838804c8c01f86"
            ]
        ]
    },
    {
        "id": "3ec53b27288a9a62",
        "type": "function",
        "z": "90d9a362f6d9804b",
        "name": "Instrucciones",
        "func": "msg.payload = \"\\nInstrucciones del juego...\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 240,
        "wires": [
            [
                "d6f32d6ac4060582"
            ]
        ]
    },
    {
        "id": "aa44cd521da0e858",
        "type": "complete",
        "z": "90d9a362f6d9804b",
        "name": "",
        "scope": [
            "f016bc1d142a0eb9"
        ],
        "uncaught": false,
        "x": 90,
        "y": 240,
        "wires": [
            [
                "6b12b87a295902d0"
            ]
        ]
    },
    {
        "id": "26ed1fe739c0b74d",
        "type": "change",
        "z": "90d9a362f6d9804b",
        "name": "Get ans",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].ans",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1260,
        "y": 340,
        "wires": [
            [
                "a6738fb75a8ff60d"
            ]
        ]
    },
    {
        "id": "6b12b87a295902d0",
        "type": "delay",
        "z": "90d9a362f6d9804b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 240,
        "wires": [
            [
                "3ec53b27288a9a62"
            ]
        ]
    },
    {
        "id": "65e18ee7ce830848",
        "type": "mqtt in",
        "z": "90d9a362f6d9804b",
        "name": "",
        "topic": "II3/ESP005/pub/cara005",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "2b251178.95ad2e",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 400,
        "wires": [
            [
                "c78a643484dd5c49",
                "a29f543e4a245926",
                "b002e99671ded181"
            ]
        ]
    },
    {
        "id": "c51e4f5a395e6c02",
        "type": "delay",
        "z": "90d9a362f6d9804b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1260,
        "y": 300,
        "wires": [
            [
                "254398daec3d12f8"
            ]
        ]
    },
    {
        "id": "faf8321602dd30ff",
        "type": "link out",
        "z": "90d9a362f6d9804b",
        "name": "link out 22",
        "mode": "link",
        "links": [
            "3b61f394285ac503"
        ],
        "x": 1585,
        "y": 180,
        "wires": []
    },
    {
        "id": "3b61f394285ac503",
        "type": "link in",
        "z": "90d9a362f6d9804b",
        "name": "link in 31",
        "links": [
            "faf8321602dd30ff",
            "d6f32d6ac4060582",
            "c5e7218cb59fa9d3"
        ],
        "x": 1675,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "d6f32d6ac4060582",
        "type": "link out",
        "z": "90d9a362f6d9804b",
        "name": "link out 23",
        "mode": "link",
        "links": [
            "3b61f394285ac503"
        ],
        "x": 1585,
        "y": 240,
        "wires": []
    },
    {
        "id": "c5e7218cb59fa9d3",
        "type": "link out",
        "z": "90d9a362f6d9804b",
        "name": "link out 24",
        "mode": "link",
        "links": [
            "3b61f394285ac503"
        ],
        "x": 1585,
        "y": 300,
        "wires": []
    },
    {
        "id": "a6738fb75a8ff60d",
        "type": "mqtt out",
        "z": "90d9a362f6d9804b",
        "name": "",
        "topic": "II3/ESP005/cmd/cara005",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 1490,
        "y": 340,
        "wires": []
    },
    {
        "id": "c78a643484dd5c49",
        "type": "change",
        "z": "90d9a362f6d9804b",
        "name": "State",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "a29f543e4a245926",
        "type": "change",
        "z": "90d9a362f6d9804b",
        "name": "Clock",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.clock",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "b002e99671ded181",
        "type": "debug",
        "z": "90d9a362f6d9804b",
        "name": "debug 29",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 380,
        "y": 440,
        "wires": []
    },
    {
        "id": "d626c2214f59ffb5",
        "type": "mongodb in",
        "z": "90d9a362f6d9804b",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "recursos_de_las_pruebas",
        "operation": "aggregate",
        "x": 930,
        "y": 320,
        "wires": [
            [
                "c51e4f5a395e6c02",
                "26ed1fe739c0b74d"
            ]
        ]
    },
    {
        "id": "c3838804c8c01f86",
        "type": "function",
        "z": "90d9a362f6d9804b",
        "name": "Recupera una secuencia aleatoria de la base de datos",
        "func": "msg.payload = [{ $match: { \"filename\": \"secuencias_cara005.json\" }},\n                { $unwind: \"$payload\" },\n                { \"$sample\": { \"size\": 1 } },\n                { $replaceRoot: { newRoot: \"$payload\" } }];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 320,
        "wires": [
            [
                "d626c2214f59ffb5"
            ]
        ]
    },
    {
        "id": "f3dc491e67b9826c",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "msg 1",
        "func": "msg.payload = global.get(\"user\");\nif(msg.payload.content.substring(0,1)!=\"/\")\n{\n    msg.payload.content = \"¡Bienvenidos a \\\"La Caja\\\"! Soy Chiquito de la Calzada, el bot encargado de guiaros en este juego creado por Google.\";\n return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 80,
        "wires": [
            [
                "9943bdf78bf74fd9",
                "34d88de82163e7b8",
                "6e79899d3c75578d"
            ]
        ]
    },
    {
        "id": "39bea2a6fd0e8709",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "msg 2",
        "func": "msg.payload = global.get(\"user\");\nif(msg.payload.content.substring(0,1)!=\"/\")\n{\n    msg.payload.content = \"Estamos buscando ingenieros talentosos para nuestro nuevo centro en Málaga. Hemos creado este juego para poner a prueba vuestras habilidades.\";\n return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 160,
        "wires": [
            [
                "5d0cc38a34c5db1c",
                "636e8ac26caacaca",
                "7e2486afa05a2895"
            ]
        ]
    },
    {
        "id": "def0734b13b7a1c1",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "msg 3",
        "func": "msg.payload = global.get(\"user\");\nif(msg.payload.content.substring(0,1)!=\"/\")\n{\n    msg.payload.content = \"En este juego, os enfrentaréis a pruebas de lógica y pensamiento lateral utilizando los sensores y actuadores disponibles en la caja.\";\n return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 240,
        "wires": [
            [
                "344c56729b021957",
                "f1ed81c15fe8f86c",
                "dece2e4abcf4790c"
            ]
        ]
    },
    {
        "id": "344c56729b021957",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "random",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "5",
        "randomLast": "15",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 200,
        "y": 320,
        "wires": [
            [
                "030631861963728b"
            ]
        ]
    },
    {
        "id": "030631861963728b",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "msg 4",
        "func": "msg.payload = global.get(\"user\");\nif(msg.payload.content.substring(0,1)!=\"/\")\n{\n    msg.payload.content = \"Si necesitáis ayuda, no dudéis en poneros en contacto conmigo a través de Telegram.\";\n return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 320,
        "wires": [
            [
                "e6ff3aa647233dec",
                "8b518044c9524902",
                "76c6bedb812967f7"
            ]
        ]
    },
    {
        "id": "a85c4273e4db8289",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "msg 5",
        "func": "msg.payload = global.get(\"user\");\nif(msg.payload.content.substring(0,1)!=\"/\")\n{\n    msg.payload.content = \"¡Espero que disfrutéis del juego y que demostréis vuestras habilidades como ingenieros!\";\n return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 400,
        "wires": [
            [
                "915c07d21e2c4676",
                "667ef464ef444ba1",
                "097a151d94afedf3"
            ]
        ]
    },
    {
        "id": "b876d33393c76d7e",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "msg 6",
        "func": "msg.payload = global.get(\"user\");\nif(msg.payload.content.substring(0,1)!=\"/\")\n{\n    msg.payload.content = \"¡Buena suerte a todos! Hasta luego Lucas.\";\n return msg;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 480,
        "wires": [
            [
                "d6f79670b4ba8fe4",
                "2a3a3cd156e72cee"
            ]
        ]
    },
    {
        "id": "9943bdf78bf74fd9",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "random",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "5",
        "randomLast": "15",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 220,
        "y": 160,
        "wires": [
            [
                "39bea2a6fd0e8709"
            ]
        ]
    },
    {
        "id": "5d0cc38a34c5db1c",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "random",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "5",
        "randomLast": "15",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 200,
        "y": 240,
        "wires": [
            [
                "def0734b13b7a1c1"
            ]
        ]
    },
    {
        "id": "e6ff3aa647233dec",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "random",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "5",
        "randomLast": "15",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 200,
        "y": 400,
        "wires": [
            [
                "a85c4273e4db8289"
            ]
        ]
    },
    {
        "id": "915c07d21e2c4676",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "random",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "5",
        "randomLast": "15",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 200,
        "y": 480,
        "wires": [
            [
                "b876d33393c76d7e"
            ]
        ]
    },
    {
        "id": "4d8947e22371d07e",
        "type": "complete",
        "z": "7e2a7678166f609f",
        "name": "",
        "scope": [
            "76809f1a9b916a55"
        ],
        "uncaught": false,
        "x": 210,
        "y": 620,
        "wires": [
            [
                "2aacb55b03d625ef"
            ]
        ]
    },
    {
        "id": "2aacb55b03d625ef",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "random",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "4",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 400,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "2fe3574d1dffe3f1",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "voide - msg 1",
        "func": "msg.payload.content = \"/home/rhyloo/nol/pics/mensaje1.wav\";\nmsg.payload.type = 'voice';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 120,
        "wires": [
            [
                "3bd6a0917156869d"
            ]
        ]
    },
    {
        "id": "34d88de82163e7b8",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 560,
        "y": 120,
        "wires": [
            [
                "2fe3574d1dffe3f1"
            ]
        ]
    },
    {
        "id": "53fe3b5f5eab4862",
        "type": "link in",
        "z": "7e2a7678166f609f",
        "name": "link in 34",
        "links": [
            "6e79899d3c75578d",
            "3bd6a0917156869d",
            "494eb9bbef3fb728",
            "1e1008a25a016d28",
            "7af0be34fac5f0a3",
            "3005571e909bbfaf",
            "7279a0e62f34a89a",
            "7e2486afa05a2895",
            "dece2e4abcf4790c",
            "76c6bedb812967f7",
            "097a151d94afedf3",
            "2a3a3cd156e72cee"
        ],
        "x": 1265,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "6e79899d3c75578d",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 30",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 80,
        "wires": []
    },
    {
        "id": "3bd6a0917156869d",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 31",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 120,
        "wires": []
    },
    {
        "id": "46fb8e42bdd58c16",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "voide - msg 2",
        "func": "msg.payload.content = \"/home/rhyloo/nol/pics/mensaje2.wav\";\nmsg.payload.type = 'voice';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 200,
        "wires": [
            [
                "494eb9bbef3fb728"
            ]
        ]
    },
    {
        "id": "636e8ac26caacaca",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 560,
        "y": 200,
        "wires": [
            [
                "46fb8e42bdd58c16"
            ]
        ]
    },
    {
        "id": "494eb9bbef3fb728",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 32",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 200,
        "wires": []
    },
    {
        "id": "43caa776853b7933",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "voide - msg 3",
        "func": "msg.payload.content = \"/home/rhyloo/nol/pics/mensaje3.wav\";\nmsg.payload.type = 'voice';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 280,
        "wires": [
            [
                "1e1008a25a016d28"
            ]
        ]
    },
    {
        "id": "f1ed81c15fe8f86c",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 560,
        "y": 280,
        "wires": [
            [
                "43caa776853b7933"
            ]
        ]
    },
    {
        "id": "1e1008a25a016d28",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 33",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 280,
        "wires": []
    },
    {
        "id": "6ef0f673041aa04c",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "voide - msg 4",
        "func": "msg.payload.content = \"/home/rhyloo/nol/pics/mensaje4.wav\";\nmsg.payload.type = 'voice';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 360,
        "wires": [
            [
                "7af0be34fac5f0a3"
            ]
        ]
    },
    {
        "id": "8b518044c9524902",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 560,
        "y": 360,
        "wires": [
            [
                "6ef0f673041aa04c"
            ]
        ]
    },
    {
        "id": "7af0be34fac5f0a3",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 34",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 360,
        "wires": []
    },
    {
        "id": "3a49108706019dcd",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "voide - msg 5",
        "func": "msg.payload.content = \"/home/rhyloo/nol/pics/mensaje5.wav\";\nmsg.payload.type = 'voice';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 440,
        "wires": [
            [
                "3005571e909bbfaf"
            ]
        ]
    },
    {
        "id": "667ef464ef444ba1",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 560,
        "y": 440,
        "wires": [
            [
                "3a49108706019dcd"
            ]
        ]
    },
    {
        "id": "3005571e909bbfaf",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 35",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 440,
        "wires": []
    },
    {
        "id": "76809f1a9b916a55",
        "type": "function",
        "z": "7e2a7678166f609f",
        "name": "voide - msg 6",
        "func": "msg.payload.content = \"/home/rhyloo/nol/pics/mensaje6.wav\";\nmsg.payload.type = 'voice';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 520,
        "wires": [
            [
                "7279a0e62f34a89a"
            ]
        ]
    },
    {
        "id": "d6f79670b4ba8fe4",
        "type": "delay",
        "z": "7e2a7678166f609f",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 560,
        "y": 520,
        "wires": [
            [
                "76809f1a9b916a55"
            ]
        ]
    },
    {
        "id": "7279a0e62f34a89a",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 36",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 520,
        "wires": []
    },
    {
        "id": "7e2486afa05a2895",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 37",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 160,
        "wires": []
    },
    {
        "id": "dece2e4abcf4790c",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 38",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 240,
        "wires": []
    },
    {
        "id": "76c6bedb812967f7",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 39",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 320,
        "wires": []
    },
    {
        "id": "097a151d94afedf3",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 40",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 400,
        "wires": []
    },
    {
        "id": "2a3a3cd156e72cee",
        "type": "link out",
        "z": "7e2a7678166f609f",
        "name": "link out 41",
        "mode": "link",
        "links": [
            "53fe3b5f5eab4862"
        ],
        "x": 875,
        "y": 480,
        "wires": []
    },
    {
        "id": "1e6ca6d375750aed",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "Foto: Inicial del juego",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.content = \"/home/rhyloo/nol/pics/prueba1_preview.png\";\nmsg.payload.type = 'photo';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 100,
        "wires": [
            [
                "daf32c42d50a5d7c",
                "f8b2d0572cf25250"
            ]
        ]
    },
    {
        "id": "2c5538c2a46cb659",
        "type": "mongodb in",
        "z": "178fa897d7510777",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "recursos_de_las_pruebas",
        "operation": "aggregate",
        "x": 890,
        "y": 360,
        "wires": [
            [
                "1c2d747a50f3c8bb"
            ]
        ]
    },
    {
        "id": "3d9cbd050ccf436b",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "Recupera un acertijo aleatorio de la base de datos",
        "func": "msg.payload = [{ $match: { \"filename\": \"secuencias_cara004.json\" } },\n                { $unwind: \"$payload\" },\n                { \"$sample\": { \"size\": 1 } },\n                { $replaceRoot: { newRoot: \"$payload\" } }];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 360,
        "wires": [
            [
                "2c5538c2a46cb659"
            ]
        ]
    },
    {
        "id": "e336a9f3ac958bdf",
        "type": "complete",
        "z": "178fa897d7510777",
        "name": "",
        "scope": [
            "c6c33e071b5ea97d"
        ],
        "uncaught": false,
        "x": 170,
        "y": 360,
        "wires": [
            [
                "3d9cbd050ccf436b"
            ]
        ]
    },
    {
        "id": "0f4bf996baac19e8",
        "type": "delay",
        "z": "178fa897d7510777",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 220,
        "wires": [
            [
                "c6c33e071b5ea97d"
            ]
        ]
    },
    {
        "id": "053c5d8897190a89",
        "type": "mqtt in",
        "z": "178fa897d7510777",
        "name": "",
        "topic": "II3/ESP004/pub/cara004",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "2b251178.95ad2e",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 210,
        "y": 480,
        "wires": [
            [
                "b81126ae51b39355",
                "0aedc8df5c1d0937",
                "bb1fc23bb83a7812"
            ]
        ]
    },
    {
        "id": "21ae83aa8505a7b1",
        "type": "ui_text",
        "z": "178fa897d7510777",
        "group": "f870df7d6c3cc2e9",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Número introducido",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1730,
        "y": 440,
        "wires": []
    },
    {
        "id": "daf32c42d50a5d7c",
        "type": "link out",
        "z": "178fa897d7510777",
        "name": "link out 46",
        "mode": "link",
        "links": [
            "0a67632feb36fdf6"
        ],
        "x": 1805,
        "y": 100,
        "wires": []
    },
    {
        "id": "0a67632feb36fdf6",
        "type": "link in",
        "z": "178fa897d7510777",
        "name": "link in 35",
        "links": [
            "daf32c42d50a5d7c",
            "47cb9e7f26445191",
            "48ebca8d40b2da94",
            "6478e2ba3b14184c",
            "10da3a12949656e6",
            "f653e9d1a8043d06"
        ],
        "x": 2105,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "48ebca8d40b2da94",
        "type": "link out",
        "z": "178fa897d7510777",
        "name": "link out 47",
        "mode": "link",
        "links": [
            "0a67632feb36fdf6"
        ],
        "x": 1805,
        "y": 220,
        "wires": []
    },
    {
        "id": "4af6499201c53fd0",
        "type": "mqtt out",
        "z": "178fa897d7510777",
        "name": "",
        "topic": "II3/ESP004/cmd/cara004",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 1710,
        "y": 360,
        "wires": []
    },
    {
        "id": "0aedc8df5c1d0937",
        "type": "change",
        "z": "178fa897d7510777",
        "name": "State",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.state",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 480,
        "wires": [
            [
                "2512bf06fd39160b"
            ]
        ]
    },
    {
        "id": "b81126ae51b39355",
        "type": "change",
        "z": "178fa897d7510777",
        "name": "Número",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.numero",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 440,
        "wires": [
            [
                "21ae83aa8505a7b1"
            ]
        ]
    },
    {
        "id": "bb1fc23bb83a7812",
        "type": "change",
        "z": "178fa897d7510777",
        "name": "Clock",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.clock",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "58f3565941639bda",
        "type": "delay",
        "z": "178fa897d7510777",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 280,
        "wires": [
            [
                "378b8bfcc6014df3"
            ]
        ]
    },
    {
        "id": "6478e2ba3b14184c",
        "type": "link out",
        "z": "178fa897d7510777",
        "name": "link out 49",
        "mode": "link",
        "links": [
            "0a67632feb36fdf6"
        ],
        "x": 1805,
        "y": 280,
        "wires": []
    },
    {
        "id": "378b8bfcc6014df3",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "+Instrucciones",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.content= \"El acertijo es el siguiente: \";\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 280,
        "wires": [
            [
                "6478e2ba3b14184c"
            ]
        ]
    },
    {
        "id": "c6c33e071b5ea97d",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "Instrucciones",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.content = \"Recordad que podéis utilizar el botón de \\\"Pista\\\" para obtener una pista adicional. ¡Buena suerte a todos!\";\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 220,
        "wires": [
            [
                "48ebca8d40b2da94",
                "58f3565941639bda"
            ]
        ]
    },
    {
        "id": "16345e0ca4093a39",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "Mensaje: Inicia el juego",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.type = \"message\";\nmsg.payload.content = \"¡Bienvenidos a la primera prueba de \\\"La Caja\\\"! Para resolver esta prueba, tendréis que utilizar el numpad disponible en la caja para introducir un número de dos dígitos.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 160,
        "wires": [
            [
                "47cb9e7f26445191",
                "0f4bf996baac19e8"
            ]
        ]
    },
    {
        "id": "47cb9e7f26445191",
        "type": "link out",
        "z": "178fa897d7510777",
        "name": "link out 50",
        "mode": "link",
        "links": [
            "0a67632feb36fdf6"
        ],
        "x": 1805,
        "y": 160,
        "wires": []
    },
    {
        "id": "f8b2d0572cf25250",
        "type": "delay",
        "z": "178fa897d7510777",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 380,
        "y": 160,
        "wires": [
            [
                "16345e0ca4093a39"
            ]
        ]
    },
    {
        "id": "2512bf06fd39160b",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "terminado?",
        "func": "if (msg.payload == 2){\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 640,
        "wires": [
            [
                "284c066dd6754ae0"
            ]
        ]
    },
    {
        "id": "284c066dd6754ae0",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "Mensaje: Inicia el juego",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.type = \"message\";\nmsg.payload.content = \"¡Felicidades por haber pasado la primera prueba de \\\"La Caja\\\"! Estamos impresionados por vuestra habilidad para resolver el acertijo.\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 640,
        "wires": [
            [
                "10da3a12949656e6",
                "360ddd442ecb1a62"
            ]
        ]
    },
    {
        "id": "10da3a12949656e6",
        "type": "link out",
        "z": "178fa897d7510777",
        "name": "link out 51",
        "mode": "link",
        "links": [
            "0a67632feb36fdf6"
        ],
        "x": 1805,
        "y": 640,
        "wires": []
    },
    {
        "id": "bde6d9327d460e23",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "Mensaje: Inicia el juego",
        "func": "msg.payload = global.get(\"user\");\nmsg.payload.type = \"message\";\nmsg.payload.content = \"Estamos seguros de que seguiréis demostrando vuestras habilidades a lo largo del juego. ¡Seguid adelante y no dejéis que nada os detenga! ¡Buena suerte en la siguiente prueba!\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 700,
        "wires": [
            [
                "f653e9d1a8043d06"
            ]
        ]
    },
    {
        "id": "360ddd442ecb1a62",
        "type": "delay",
        "z": "178fa897d7510777",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 940,
        "y": 700,
        "wires": [
            [
                "bde6d9327d460e23"
            ]
        ]
    },
    {
        "id": "f653e9d1a8043d06",
        "type": "link out",
        "z": "178fa897d7510777",
        "name": "link out 52",
        "mode": "link",
        "links": [
            "0a67632feb36fdf6"
        ],
        "x": 1805,
        "y": 700,
        "wires": []
    },
    {
        "id": "1c2d747a50f3c8bb",
        "type": "function",
        "z": "178fa897d7510777",
        "name": "function 24",
        "func": "var content = msg.payload[0].content;\nvar ans = msg.payload[0].ans;\nmsg.payload = { \"content\":  content, \"ans\": ans};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 360,
        "wires": [
            [
                "4af6499201c53fd0"
            ]
        ]
    },
    {
        "id": "bd8e92c58e986043",
        "type": "http response",
        "z": "a43193f9452562d4",
        "name": "OTA Response",
        "statusCode": "",
        "headers": {},
        "x": 2772.559814453125,
        "y": 663.1071910858154,
        "wires": []
    },
    {
        "id": "8ad9254a301cc9e1",
        "type": "http in",
        "z": "a43193f9452562d4",
        "name": "OTA Manager",
        "url": "/esp8266-ota",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 88.05558013916016,
        "y": 648.2856712341309,
        "wires": [
            [
                "12342794a20eb41a"
            ]
        ]
    },
    {
        "id": "25990e299e8ea478",
        "type": "file",
        "z": "a43193f9452562d4",
        "name": "Save md5 Checksum",
        "filename": "",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "x": 1539.9998168945312,
        "y": 845.8333740234375,
        "wires": [
            []
        ]
    },
    {
        "id": "e41d936cb00e38e2",
        "type": "file in",
        "z": "a43193f9452562d4",
        "name": "Read firmware",
        "filename": "",
        "format": "",
        "x": 842.0833740234375,
        "y": 846.6666870117188,
        "wires": [
            [
                "3eaeda14915885af"
            ]
        ]
    },
    {
        "id": "3a79386246aae5fb",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Extract filename",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "firmware.directory",
                "tot": "flow"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": "req.files.firmware[0].originalname",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "req",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "res",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 619.375,
        "y": 847.9166870117188,
        "wires": [
            [
                "e41d936cb00e38e2"
            ]
        ]
    },
    {
        "id": "72ab6f4ff778dbd2",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1225.625,
        "y": 846.25,
        "wires": [
            [
                "25990e299e8ea478"
            ]
        ]
    },
    {
        "id": "319d75c67a0d36f4",
        "type": "comment",
        "z": "a43193f9452562d4",
        "name": "Firmware Upgrade",
        "info": "The system determines which firmware to send based\non the MAC address, version, and MD5 headers in the\nrequest from the ESP8266.\n\nFirstly, it checks if a firmware hash file with \nthe MAC address as the name exists, or else if a \nfirmware file with the version as the name exists.\nIf neither exist then no update is available.\n\nIt then reads the corresponding MD5 hash from the\nhash file and compares to the MD5 hash in the\nrequest.  If they match then the firmware is up\nto date and no update is required.\n\nOtherwise, it sends the contents of the firmware\nbin file and the MD5 hash value.",
        "x": 103.5,
        "y": 46,
        "wires": []
    },
    {
        "id": "8ddbca4d41b63a4f",
        "type": "comment",
        "z": "a43193f9452562d4",
        "name": "Firmware Management",
        "info": "",
        "x": 110.5,
        "y": 542,
        "wires": []
    },
    {
        "id": "485c752861a20405",
        "type": "template",
        "z": "a43193f9452562d4",
        "name": "Firmware Manager",
        "field": "payload",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <title>ESP8266 OTA Firmware Manager</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <link rel=\"stylesheet\" href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\">\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"></script>\n        <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n        <style>\n            .file-btn-grp {\n                display: none;\n            }\n            body {\n                background-color: #f6f6f6;\n            }\n            .text_holder {\n                display: block;\n                max-width: 100%;\n                word-wrap: break-word;\n                line-height: 30px;\n            }\n            #main {\n                margin-top: 50px;\n                background-color: #ffffff;\n                border-radius: 5px;\n                width: 70%;\n                min-width: 500px;\n                border: 1px solid #545454;\n            }\n            .alert {\n                margin-top: 10px;\n                margin-bottom: 5px;\n            }\n            .link {\n                font-style: italic;\n            }\n            .listentry {\n                display: none;\n                list-style-type: none;\n            }\n        </style>\n\n    </head>\n    <body>\n        <div class=\"container\" id=\"main\">\n            <h1><small>ESP8266 OTA Firmware Manager</small></h1>\n            <h2><small>Upload New Firmware</small></h2>\n\n            <form role =\"form\" id=\"main_input_box\" action=\"esp8266-ota\" method=\"POST\" enctype=\"multipart/form-data\" class=\"form-inline\">\n                <input type=\"file\" accept=\".bin\" class=\"hidden\" id=\"fileUpload\" name=\"firmware\" placeholder=\"firmware.bin\">\n                <div class=\"form-group\">\n                <div class=\"input-group\">\n                    <span class=\"input-group-btn\">\n                        <button id=\"browse\" type=\"button\" class=\"btn btn-primary\">Browse...</button>\n                    </span>\n                    <input id=\"filename\" size=100 readonly=\"\" class=\"form-control\" placeholder=\"Firmware.bin\">\n                    <span class=\"input-group-btn\">\n                        <input type=\"submit\" value=\"Upload\" class=\"btn btn-primary add_button\">\n                    </span>\n                </div>\n                </div>\n            </form>\n\n            <h2><small>Current Firmware</small></h2>\n            <ul class=\"list-group\" id=\"list_of_items\">\n            </ul>\n        </div>\n\n        <div id=\"linkModal\" class=\"modal fade\" role=\"dialog\">\n            <div class=\"modal-dialog\">\n        \n                <!-- Modal content-->\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n                        <h4 class=\"modal-title\">Create Symbolic Link</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form class=\"form-horizontal\" id=\"linkForm\" role=\"form\" action=\"#\" method=\"POST\">\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkName\">Link:</label> \n                                <div class=\"col-sm-10\">\n                                    <input id=\"linkName\" name=\"linkName\" class=\"form-control\"/>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkFile\">To:</label> \n                                <div class=\"col-sm-10\">\n                                    <input class=\"form-control\" id=\"linkFile\" name=\"linkFile\"/>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"submit\" class=\"btn btn-success link-create\">Create</button>\n                        <button type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <script>\n\n            var deleteButton = \"<button id='delete' class='btn btn-warning'>Delete</button>\";\n            var linkButton = \"<button id='link' class='btn btn-success'>Link</button>\";\n            var oneButton = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + \"</div>\";\n            var twoButtons = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + linkButton + \"</div>\";\n            \n            function addListEntry(list, filename, linkname) {\n            \n                var entry;\n                \n                if (linkname === undefined) {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span>\" \n                    + filename + \"</span>\" + twoButtons + \"</div></li>\");\n                } else {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span class='link'>\" \n                    + filename + \"</span> <span class='glyphicon glyphicon-arrow-right'></span> \" \n                    + linkname + oneButton + \"</div></li>\");\n                }\n                \n                entry.mouseover(function(){\n                    $(this).find(\".btn-group\").fadeIn(\"fast\");\n                });\n                entry.mouseleave(function(){\n                    $(this).find(\".btn-group\").fadeOut(\"slow\");\n                });\n                \n                entry.on(\"click\", \"button#delete\", function(){\n                    var listItem = this.parentElement.parentElement.parentElement;\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $.ajax({\n                        type: 'DELETE',\n                        data: {\"filename\": file},\n                        success: function(result) {\n                            $(listItem).fadeOut(\"slow\", function(){\n                                listItem.remove();\n                            });\n                        },\n                        error: function(result) {\n                            $(listItem).append(\"<div class='alert alert-danger'>\"\n                                + \"<a href='#' class='close' data-dismiss='alert'\"\n                                + \"aria-label='close'>&times;</a>\"\n                                + result.responseText + \"</div>\");\n                        }\n                    });\n                });\n           \n                entry.on(\"click\", \"button#link\", function(){\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $(\"#linkName\").val(\"\");\n                    $(\"#linkFile\").prop(\"disabled\", true).val(file);\n                    $(\"#linkName\").parent().removeClass(\"has-error\");\n                    $(\"#linkModal\").modal();\n                    $('#linkModal').on('shown.bs.modal', function () {\n                        $('#linkName').focus();\n                    });\n                });\n                \n                if (list.children().length == 0) {\n                    list.append(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n\n                if (filename < $(\"li:first span:first\", list).text()) {\n                    $(\"li:first\", list).before(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                if (filename > $(\"li:last span:first\", list).text()) {\n                    $(\"li:last\", list).after(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                \n                var count = 0;\n                var $li = $(\"li\", list);\n                do {\n                    var index = parseInt($li.length / 2);\n                    var $compare = $li.eq(index);\n                    var compare = $(\"span:first\",$compare).text();\n                    if (filename === compare) {\n                        break;\n                    }\n                    else if (filename > compare) {\n                        $li = $li.slice(index, $li.length);\n                    } else {\n                        $li = $li.slice(0, index);\n                    }\n                } while ($li.length > 1);\n\n                if (filename === compare) {\n                    $compare.slideUp(\"fast\").slideDown(\"slow\");\n                    return;\n                } else if (filename < compare) { \n                    entry.insertBefore($compare); \n                } else { \n                    entry.insertAfter($compare); \n                }\n                entry.slideDown(\"slow\");\n            }\n            \n            \n            var files = String(\"{{payload.files}}\").split(',');\n            var links = String(\"{{payload.links}}\").split(',');\n            \n            var list_of_items = $(\"#list_of_items\");\n            \n            files.forEach(function(file,index) {\n                if (links[index] == \"\") {\n                    addListEntry(this, file.slice(0,-4));\n                } else {\n                    addListEntry(this, file.slice(0,-4), links[index].slice(0,-4));\n                }\n            },list_of_items);\n           \n           \n            $(\"#linkModal\").on(\"click\", \"button.link-create\", function(event){\n               event.preventDefault();\n               if ($(\"#linkName\").val() == \"\") {\n                    $('#linkName').focus();\n                    $('#linkName').parent().addClass(\"has-error\");\n                    return false;\n               }\n               $(\"#linkFile\").prop(\"disabled\",false);               \n               $.ajax({\n                    type: 'PUT',\n                    data: $(\"#linkForm\").serialize(),\n                    success: function(result) {\n                        $(\"#linkModal\").modal('hide');\n                        addListEntry(list_of_items, $('#linkName').val(), $('#linkFile').val());\n                    },\n                    error: function(result) {\n                        $(\"#linkFile\").prop(\"disabled\", true);\n                        $('#linkName').focus();\n                        $('#linkName').parent().addClass(\"has-error\");\n                        $(linkForm).append(\"<div id='linkError' class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n                });\n            });\n            \n            $(\"#browse\").on('click', function () {\n                fileUpload.click();\n            });\n            \n            $(\"#fileUpload\").on('change', function () {\n                $(\"#filename\").val($(\"#fileUpload\").val().split('/').pop().split('\\\\').pop());\n            });\n            \n            var frm = $(\"#main_input_box\");\n            \n            frm.submit( function( e ) {\n                e.preventDefault();\n                if ($('#fileUpload').val() == \"\") return null;\n                $.ajax( {\n                    url: frm.attr('action'),\n                    type: frm.attr('method'),\n                    data: new FormData( this ),\n                    processData: false,\n                    contentType: false,\n                    success: function(result) {\n                        addListEntry(list_of_items, $('#fileUpload').val().slice(0,-4).split('\\\\').pop());\n                        $('#fileUpload').val('');\n                        $(':text').val('');\n                    },\n                    error: function(result) {\n                        $(\"#main_input_box\").append(\"<div class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n\n                });\n            });\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 1381.3333740234375,
        "y": 645.8135375976562,
        "wires": [
            [
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "1649c4977994eb61",
        "type": "http in",
        "z": "a43193f9452562d4",
        "name": "OTA Delete",
        "url": "/esp8266-ota",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 83.125,
        "y": 933.75,
        "wires": [
            [
                "7bc256301dc109eb"
            ]
        ]
    },
    {
        "id": "99e38eadd16b15bf",
        "type": "catch",
        "z": "a43193f9452562d4",
        "name": "File Error",
        "scope": [
            "e4bb9da0a7d3a501",
            "302d0c5c07faa824",
            "8eb5cc497dfc9319",
            "cda498639522b0d1",
            "bc6a0c7c3144df43"
        ],
        "x": 1870.6665573120117,
        "y": 805.3333158493042,
        "wires": [
            [
                "58be7524738ce76c"
            ]
        ]
    },
    {
        "id": "58be7524738ce76c",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "statusCode",
                "pt": "msg",
                "to": "500",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2159,
        "y": 791,
        "wires": [
            [
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "fd3dfb38f31f1426",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Change to MD5 filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.filename",
                "pt": "msg",
                "from": "bin",
                "fromt": "str",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1879.1666564941406,
        "y": 936.6666269302368,
        "wires": [
            [
                "302d0c5c07faa824"
            ]
        ]
    },
    {
        "id": "8406a3849f1cd590",
        "type": "http in",
        "z": "a43193f9452562d4",
        "name": "OTA Link",
        "url": "/esp8266-ota",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 84,
        "y": 1041.5,
        "wires": [
            [
                "3ae4160bd63e0341"
            ]
        ]
    },
    {
        "id": "3ae4160bd63e0341",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Extract filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.linkName",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".bin",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.linkFile",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".bin",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1385,
        "y": 1044,
        "wires": [
            [
                "8eb5cc497dfc9319"
            ]
        ]
    },
    {
        "id": "a92d64597b791f82",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Change to MD5 Filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.linkName",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.linkFile",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1908,
        "y": 1045,
        "wires": [
            [
                "cda498639522b0d1"
            ]
        ]
    },
    {
        "id": "7bc256301dc109eb",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Extract filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".bin",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1382.5,
        "y": 937.5,
        "wires": [
            [
                "e4bb9da0a7d3a501"
            ]
        ]
    },
    {
        "id": "38b92bdc91223c2c",
        "type": "http response",
        "z": "a43193f9452562d4",
        "name": "OTA Response",
        "x": 3210.059814453125,
        "y": 366.06256103515625,
        "wires": []
    },
    {
        "id": "1bf6140c858cf0ef",
        "type": "file in",
        "z": "a43193f9452562d4",
        "name": "Load Firmware",
        "filename": "filename",
        "filenameType": "msg",
        "format": "",
        "sendError": false,
        "x": 2586.999786376953,
        "y": 399.88400077819824,
        "wires": [
            [
                "38b92bdc91223c2c",
                "9b2f875ac25af443"
            ]
        ]
    },
    {
        "id": "e1024e4ff3d510bd",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "No Update",
        "rules": [
            {
                "t": "set",
                "p": "statusCode",
                "pt": "msg",
                "to": "304",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2956.107421875,
        "y": 258.52682304382324,
        "wires": [
            [
                "38b92bdc91223c2c"
            ]
        ]
    },
    {
        "id": "2fafb6a308eb7732",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Forbidden",
        "rules": [
            {
                "t": "set",
                "p": "statusCode",
                "pt": "msg",
                "to": "403",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Forbidden",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2933.999755859375,
        "y": 135.84826469421387,
        "wires": [
            [
                "38b92bdc91223c2c"
            ]
        ]
    },
    {
        "id": "9b2f875ac25af443",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "Update sent",
        "active": true,
        "console": "false",
        "complete": "req.headers.x-esp8266-sta-mac",
        "x": 2932.0000610351562,
        "y": 405.955472946167,
        "wires": []
    },
    {
        "id": "ebdd9cfedabb6851",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Save MD5 Hash",
        "rules": [
            {
                "t": "set",
                "p": "headers.x-MD5",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "md5",
                "fromt": "str",
                "to": "bin",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2375.785789489746,
        "y": 387.0268669128418,
        "wires": [
            [
                "1bf6140c858cf0ef"
            ]
        ]
    },
    {
        "id": "c90ec0d226a68c11",
        "type": "switch",
        "z": "a43193f9452562d4",
        "name": "Update type",
        "property": "req.headers.x-esp8266-mode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "spiffs",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "sketch",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 474.5179748535156,
        "y": 228.52685356140137,
        "wires": [
            [
                "e1024e4ff3d510bd"
            ],
            [
                "53b5fa34136e8b17"
            ]
        ]
    },
    {
        "id": "e1949839d4cd7ef8",
        "type": "switch",
        "z": "a43193f9452562d4",
        "name": "Compare MD5 hash",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "req.headers.x-esp8266-sketch-md5",
                "vt": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "outputs": 2,
        "x": 1945.41064453125,
        "y": 342.13403129577637,
        "wires": [
            [
                "e1024e4ff3d510bd",
                "3d514a7b77c4e737"
            ],
            [
                "ebdd9cfedabb6851",
                "f657e29e4c2abb1e"
            ]
        ]
    },
    {
        "id": "6479672fce9ef8c7",
        "type": "catch",
        "z": "a43193f9452562d4",
        "name": "File error",
        "scope": [
            "1bf6140c858cf0ef",
            "bace0d35836c8d87"
        ],
        "x": 2628.3572387695312,
        "y": 348.52682304382324,
        "wires": [
            [
                "e1024e4ff3d510bd",
                "30b6f430532463ef"
            ]
        ]
    },
    {
        "id": "c8ccf35b11a423af",
        "type": "switch",
        "z": "a43193f9452562d4",
        "name": "Check user agent",
        "property": "req.headers.user-agent",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "ESP8266-http-Update",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 290,
        "y": 140,
        "wires": [
            [
                "2fafb6a308eb7732"
            ],
            [
                "c90ec0d226a68c11"
            ]
        ]
    },
    {
        "id": "53b5fa34136e8b17",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Get MAC hash filename",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "firmware.directory",
                "tot": "flow"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": "req.headers.x-esp8266-sta-mac",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 703.6428451538086,
        "y": 354.9554100036621,
        "wires": [
            [
                "8725631065c8f057"
            ]
        ]
    },
    {
        "id": "bace0d35836c8d87",
        "type": "file in",
        "z": "a43193f9452562d4",
        "name": "Load Hash",
        "filename": "",
        "format": "utf8",
        "sendError": false,
        "x": 1734.410629272461,
        "y": 341.7768840789795,
        "wires": [
            [
                "e1949839d4cd7ef8"
            ]
        ]
    },
    {
        "id": "3f50a364d5026f4c",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Get Version hash filename",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "firmware.directory",
                "tot": "flow"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": "req.headers.x-esp8266-version",
                "tot": "msg"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1183.7857666015625,
        "y": 459.5982036590576,
        "wires": [
            [
                "b91674c82b73a515",
                "6c2e3ed78ff1828b"
            ]
        ]
    },
    {
        "id": "30b6f430532463ef",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "Firmware file error",
        "active": true,
        "console": "false",
        "complete": "error",
        "x": 2891.2142944335938,
        "y": 347.09826469421387,
        "wires": []
    },
    {
        "id": "c444f513a6b6a252",
        "type": "http in",
        "z": "a43193f9452562d4",
        "name": "OTA Request",
        "url": "/esp8266-ota/update",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 75,
        "y": 134.95541191101074,
        "wires": [
            [
                "c8ccf35b11a423af",
                "08e6bc0a944e47be"
            ]
        ]
    },
    {
        "id": "eef781e23a0c2a85",
        "type": "switch",
        "z": "a43193f9452562d4",
        "name": "",
        "property": "req.headers.x-esp8266-version",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 687.4642333984375,
        "y": 466.74108695983887,
        "wires": [
            [
                "3f50a364d5026f4c"
            ],
            [
                "d47654243d11f45a"
            ]
        ]
    },
    {
        "id": "d47654243d11f45a",
        "type": "change",
        "z": "a43193f9452562d4",
        "name": "Version in Request",
        "rules": [
            {
                "t": "set",
                "p": "req.headers.x-esp8266-version",
                "pt": "msg",
                "to": "req.params.version",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 896.9285278320312,
        "y": 532.8125286102295,
        "wires": [
            [
                "3f50a364d5026f4c"
            ]
        ]
    },
    {
        "id": "08e6bc0a944e47be",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "Update req",
        "active": true,
        "tosidebar": true,
        "console": false,
        "complete": "true",
        "statusVal": "",
        "statusType": "auto",
        "x": 246.2144012451172,
        "y": 235.66967582702637,
        "wires": []
    },
    {
        "id": "c0d491d04c0d434d",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 1291.773494720459,
        "y": 382.1797161102295,
        "wires": []
    },
    {
        "id": "d3f244fc45adece6",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 1290,
        "y": 280,
        "wires": []
    },
    {
        "id": "6c2e3ed78ff1828b",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 1393.0234375,
        "y": 555.0390625,
        "wires": []
    },
    {
        "id": "556d541d6eab0c13",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 1770.0234375,
        "y": 524.0390625,
        "wires": []
    },
    {
        "id": "d5bca0febc4ea1c2",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 1789.0234375,
        "y": 407.0390625,
        "wires": []
    },
    {
        "id": "3d514a7b77c4e737",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 2148.0234375,
        "y": 279.0390625,
        "wires": []
    },
    {
        "id": "f657e29e4c2abb1e",
        "type": "debug",
        "z": "a43193f9452562d4",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "filename",
        "x": 2170.0234375,
        "y": 506.0390625,
        "wires": []
    },
    {
        "id": "bc6a0c7c3144df43",
        "type": "fs-ops-move",
        "z": "a43193f9452562d4",
        "name": "Store firmware",
        "sourcePath": "req.files.firmware[0].destination",
        "sourcePathType": "msg",
        "sourceFilename": "req.files.firmware[0].filename",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "req.files.firmware[0].originalname",
        "destFilenameType": "msg",
        "link": false,
        "x": 365.89284896850586,
        "y": 818.3332557678223,
        "wires": [
            [
                "3a79386246aae5fb",
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "8eb5cc497dfc9319",
        "type": "fs-ops-move",
        "z": "a43193f9452562d4",
        "name": "Link firmware",
        "sourcePath": "",
        "sourcePathType": "str",
        "sourceFilename": "payload.linkFile",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "payload.linkName",
        "destFilenameType": "msg",
        "link": true,
        "x": 1644.5,
        "y": 1044,
        "wires": [
            [
                "a92d64597b791f82"
            ]
        ]
    },
    {
        "id": "cda498639522b0d1",
        "type": "fs-ops-move",
        "z": "a43193f9452562d4",
        "name": "Link MD5",
        "sourcePath": "",
        "sourcePathType": "str",
        "sourceFilename": "payload.linkFile",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "payload.linkName",
        "destFilenameType": "msg",
        "link": true,
        "x": 2152.5,
        "y": 1044,
        "wires": [
            [
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "e4bb9da0a7d3a501",
        "type": "fs-ops-delete",
        "z": "a43193f9452562d4",
        "name": "Delete firmware",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.filename",
        "filenameType": "msg",
        "x": 1628.6250457763672,
        "y": 936.5832777023315,
        "wires": [
            [
                "fd3dfb38f31f1426"
            ]
        ]
    },
    {
        "id": "302d0c5c07faa824",
        "type": "fs-ops-delete",
        "z": "a43193f9452562d4",
        "name": "Delete MD5 Hash",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.filename",
        "filenameType": "msg",
        "x": 2170.833206176758,
        "y": 936.6665878295898,
        "wires": [
            [
                "bd8e92c58e986043"
            ]
        ]
    },
    {
        "id": "b91674c82b73a515",
        "type": "fs-ops-access",
        "z": "a43193f9452562d4",
        "name": "Check for MD5 file exists",
        "path": "",
        "pathType": "str",
        "filename": "filename",
        "filenameType": "msg",
        "read": true,
        "write": false,
        "throwerror": false,
        "x": 1497.2857055664062,
        "y": 459.6696147918701,
        "wires": [
            [
                "bace0d35836c8d87",
                "d5bca0febc4ea1c2"
            ],
            [
                "e1024e4ff3d510bd",
                "556d541d6eab0c13"
            ]
        ]
    },
    {
        "id": "8725631065c8f057",
        "type": "fs-ops-access",
        "z": "a43193f9452562d4",
        "name": "Check for MD5 file exists",
        "path": "",
        "pathType": "str",
        "filename": "filename",
        "filenameType": "msg",
        "read": true,
        "write": false,
        "throwerror": false,
        "x": 1009.357177734375,
        "y": 349.09826469421387,
        "wires": [
            [
                "bace0d35836c8d87",
                "d3f244fc45adece6"
            ],
            [
                "eef781e23a0c2a85",
                "c0d491d04c0d434d"
            ]
        ]
    },
    {
        "id": "307eb70a95d584c7",
        "type": "fs-ops-link",
        "z": "a43193f9452562d4",
        "name": "Get Links",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.files",
        "filenameType": "msg",
        "link": "payload.links",
        "linkType": "msg",
        "x": 776.4999923706055,
        "y": 648.3333110809326,
        "wires": [
            [
                "485c752861a20405"
            ]
        ]
    },
    {
        "id": "12342794a20eb41a",
        "type": "fs-ops-dir",
        "z": "a43193f9452562d4",
        "name": "Firmware listing",
        "path": "firmware.directory",
        "pathType": "flow",
        "filter": "*.bin",
        "filterType": "str",
        "dir": "payload.files",
        "dirType": "msg",
        "x": 493.0355987548828,
        "y": 647.8015928268433,
        "wires": [
            [
                "307eb70a95d584c7"
            ]
        ]
    },
    {
        "id": "3eaeda14915885af",
        "type": "md5",
        "z": "a43193f9452562d4",
        "name": "",
        "fieldToHash": "payload",
        "hashField": "payload",
        "hashFieldType": "msg",
        "x": 1031.6668090820312,
        "y": 846.6666259765625,
        "wires": [
            [
                "72ab6f4ff778dbd2"
            ]
        ]
    },
    {
        "id": "b0744d4557e56190",
        "type": "config",
        "z": "a43193f9452562d4",
        "name": "Firmware Config",
        "properties": [
            {
                "p": "firmware.directory",
                "pt": "flow",
                "to": "/home/rhyloo/OTA/",
                "tot": "str"
            }
        ],
        "active": true,
        "x": 123.0714111328125,
        "y": 360.1428527832031,
        "wires": []
    },
    {
        "id": "1188246186822415",
        "type": "httpInMultipart",
        "z": "a43193f9452562d4",
        "name": "OTA Upload",
        "url": "/esp8266-ota",
        "method": "post",
        "fields": "[{ \"name\": \"firmware\"}]",
        "swaggerDoc": "",
        "x": 79.7857437133789,
        "y": 812.4286108016968,
        "wires": [
            [
                "bc6a0c7c3144df43"
            ]
        ]
    },
    {
        "id": "1077eb7e8ada2c39",
        "type": "comment",
        "z": "a43193f9452562d4",
        "name": "Dirección Gestionar Firmwares",
        "info": "http://192.168.144.66:1880/esp8266-ota",
        "x": 190,
        "y": 1140,
        "wires": []
    },
    {
        "id": "21f9347e8aef3828",
        "type": "http response",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "OTA Response",
        "statusCode": "",
        "headers": {},
        "x": 1560,
        "y": 300,
        "wires": []
    },
    {
        "id": "d2824f6f609c0386",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "OTA Manager",
        "url": "/upload-into-database",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 160,
        "wires": [
            [
                "62515f6e3d807c47"
            ]
        ]
    },
    {
        "id": "bda262cf2eaa8c3a",
        "type": "file in",
        "z": "122f65d809b34d8e",
        "name": "Read firmware",
        "filename": "filename",
        "filenameType": "msg",
        "format": "utf8",
        "encoding": "utf8",
        "allProps": false,
        "x": 780,
        "y": 240,
        "wires": [
            [
                "46f6454f8d3bdb92"
            ]
        ]
    },
    {
        "id": "4b0e1b8ee55ee3dc",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Extract filename",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "firmware.directory",
                "tot": "flow"
            },
            {
                "t": "change",
                "p": "filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": "req.files.firmware[0].originalname",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "req",
                "pt": "msg"
            },
            {
                "t": "delete",
                "p": "res",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 240,
        "wires": [
            [
                "bda262cf2eaa8c3a"
            ]
        ]
    },
    {
        "id": "fb39343aee052faa",
        "type": "comment",
        "z": "122f65d809b34d8e",
        "name": "MongoDB upload",
        "info": "",
        "x": 100,
        "y": 60,
        "wires": []
    },
    {
        "id": "75f8dc9625317378",
        "type": "template",
        "z": "122f65d809b34d8e",
        "name": "Firmware Manager",
        "field": "payload",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <title>Database File Manager</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <link rel=\"stylesheet\" href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\">\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"></script>\n        <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n        <style>\n            .file-btn-grp {\n                display: none;\n            }\n            body {\n                background-color: #f6f6f6;\n            }\n            .text_holder {\n                display: block;\n                max-width: 100%;\n                word-wrap: break-word;\n                line-height: 30px;\n            }\n            #main {\n                margin-top: 50px;\n                background-color: #ffffff;\n                border-radius: 5px;\n                width: 70%;\n                min-width: 500px;\n                border: 1px solid #545454;\n            }\n            .alert {\n                margin-top: 10px;\n                margin-bottom: 5px;\n            }\n            .link {\n                font-style: italic;\n            }\n            .listentry {\n                display: none;\n                list-style-type: none;\n            }\n        </style>\n\n    </head>\n    <body>\n        <div class=\"container\" id=\"main\">\n            <h1><small>Database File Manager</small></h1>\n            <h2><small>Upload New Files</small></h2>\n<form action=\"test\" method=\"POST\">\n    <label for=\"cars\">Choose a collection:</label>\n    <select name=\"cars\" id=\"cars\">\n    <option value=\"test2\">test2</option>\n    <option value=\"test3\">test3</option>\n    <option value=\"test4\">test4</option>\n    <option value=\"test5\">test5</option>\n  </select>\n    <br><br>\n    <input type=\"submit\" value=\"Submit\">\n</form>\n            <form role =\"form\" id=\"main_input_box\" action=\"upload-into-database\" method=\"POST\" enctype=\"multipart/form-data\" class=\"form-inline\">\n                <input type=\"file\" accept=\".json\" class=\"hidden\" id=\"fileUpload\" name=\"firmware\" placeholder=\"firmware.bin\">\n                <div class=\"form-group\">\n                <div class=\"input-group\">\n                    <span class=\"input-group-btn\">\n                        <button id=\"browse\" type=\"button\" class=\"btn btn-primary\">Browse...</button>\n                    </span>\n                    <input id=\"filename\" size=100 readonly=\"\" class=\"form-control\" placeholder=\"File\">\n                    <span class=\"input-group-btn\">\n                        <input type=\"submit\" value=\"Upload\" class=\"btn btn-primary add_button\">\n                    </span>\n                </div>\n                </div>\n            </form>\n\n            <h2><small>Current Files</small></h2>\n            <ul class=\"list-group\" id=\"list_of_items\">\n            </ul>\n        </div>\n\n        <div id=\"linkModal\" class=\"modal fade\" role=\"dialog\">\n            <div class=\"modal-dialog\">\n        \n                <!-- Modal content-->\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n                        <h4 class=\"modal-title\">Create Symbolic Link</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form class=\"form-horizontal\" id=\"linkForm\" role=\"form\" action=\"#\" method=\"POST\">\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkName\">Link:</label> \n                                <div class=\"col-sm-10\">\n                                    <input id=\"linkName\" name=\"linkName\" class=\"form-control\"/>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkFile\">To:</label> \n                                <div class=\"col-sm-10\">\n                                    <input class=\"form-control\" id=\"linkFile\" name=\"linkFile\"/>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"submit\" class=\"btn btn-success link-create\">Create</button>\n                        <button type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <script>\n\n            var deleteButton = \"<button id='delete' class='btn btn-warning'>Delete</button>\";\n            var linkButton = \"<button id='link' class='btn btn-success'>Link</button>\";\n            var oneButton = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + \"</div>\";\n            var twoButtons = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + linkButton + \"</div>\";\n            \n            function addListEntry(list, filename, linkname) {\n            \n                var entry;\n                \n                if (linkname === undefined) {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span>\" \n                    + filename + \"</span>\" + twoButtons + \"</div></li>\");\n                } else {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span class='link'>\" \n                    + filename + \"</span> <span class='glyphicon glyphicon-arrow-right'></span> \" \n                    + linkname + oneButton + \"</div></li>\");\n                }\n                \n                entry.mouseover(function(){\n                    $(this).find(\".btn-group\").fadeIn(\"fast\");\n                });\n                entry.mouseleave(function(){\n                    $(this).find(\".btn-group\").fadeOut(\"slow\");\n                });\n                \n                entry.on(\"click\", \"button#delete\", function(){\n                    var listItem = this.parentElement.parentElement.parentElement;\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $.ajax({\n                        type: 'DELETE',\n                        data: {\"filename\": file},\n                        success: function(result) {\n                            $(listItem).fadeOut(\"slow\", function(){\n                                listItem.remove();\n                            });\n                        },\n                        error: function(result) {\n                            $(listItem).append(\"<div class='alert alert-danger'>\"\n                                + \"<a href='#' class='close' data-dismiss='alert'\"\n                                + \"aria-label='close'>&times;</a>\"\n                                + result.responseText + \"</div>\");\n                        }\n                    });\n                });\n           \n                entry.on(\"click\", \"button#link\", function(){\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $(\"#linkName\").val(\"\");\n                    $(\"#linkFile\").prop(\"disabled\", true).val(file);\n                    $(\"#linkName\").parent().removeClass(\"has-error\");\n                    $(\"#linkModal\").modal();\n                    $('#linkModal').on('shown.bs.modal', function () {\n                        $('#linkName').focus();\n                    });\n                });\n                \n                if (list.children().length == 0) {\n                    list.append(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n\n                if (filename < $(\"li:first span:first\", list).text()) {\n                    $(\"li:first\", list).before(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                if (filename > $(\"li:last span:first\", list).text()) {\n                    $(\"li:last\", list).after(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                \n                var count = 0;\n                var $li = $(\"li\", list);\n                do {\n                    var index = parseInt($li.length / 2);\n                    var $compare = $li.eq(index);\n                    var compare = $(\"span:first\",$compare).text();\n                    if (filename === compare) {\n                        break;\n                    }\n                    else if (filename > compare) {\n                        $li = $li.slice(index, $li.length);\n                    } else {\n                        $li = $li.slice(0, index);\n                    }\n                } while ($li.length > 1);\n\n                if (filename === compare) {\n                    $compare.slideUp(\"fast\").slideDown(\"slow\");\n                    return;\n                } else if (filename < compare) { \n                    entry.insertBefore($compare); \n                } else { \n                    entry.insertAfter($compare); \n                }\n                entry.slideDown(\"slow\");\n            }\n            \n            \n            var files = String(\"{{payload.files}}\").split(',');\n            var links = String(\"{{payload.links}}\").split(',');\n            \n            var list_of_items = $(\"#list_of_items\");\n            \n            files.forEach(function(file,index) {\n                if (links[index] == \"\") {\n                    addListEntry(this, file.slice(0,-4));\n                } else {\n                    addListEntry(this, file.slice(0,-4), links[index].slice(0,-4));\n                }\n            },list_of_items);\n           \n           \n            $(\"#linkModal\").on(\"click\", \"button.link-create\", function(event){\n               event.preventDefault();\n               if ($(\"#linkName\").val() == \"\") {\n                    $('#linkName').focus();\n                    $('#linkName').parent().addClass(\"has-error\");\n                    return false;\n               }\n               $(\"#linkFile\").prop(\"disabled\",false);               \n               $.ajax({\n                    type: 'PUT',\n                    data: $(\"#linkForm\").serialize(),\n                    success: function(result) {\n                        $(\"#linkModal\").modal('hide');\n                        addListEntry(list_of_items, $('#linkName').val(), $('#linkFile').val());\n                    },\n                    error: function(result) {\n                        $(\"#linkFile\").prop(\"disabled\", true);\n                        $('#linkName').focus();\n                        $('#linkName').parent().addClass(\"has-error\");\n                        $(linkForm).append(\"<div id='linkError' class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n                });\n            });\n            \n            $(\"#browse\").on('click', function () {\n                fileUpload.click();\n            });\n            \n            $(\"#fileUpload\").on('change', function () {\n                $(\"#filename\").val($(\"#fileUpload\").val().split('/').pop().split('\\\\').pop());\n            });\n            \n            var frm = $(\"#main_input_box\");\n            \n            frm.submit( function( e ) {\n                e.preventDefault();\n                if ($('#fileUpload').val() == \"\") return null;\n                $.ajax( {\n                    url: frm.attr('action'),\n                    type: frm.attr('method'),\n                    data: new FormData( this ),\n                    processData: false,\n                    contentType: false,\n                    success: function(result) {\n                        addListEntry(list_of_items, $('#fileUpload').val().slice(0,-4).split('\\\\').pop());\n                        $('#fileUpload').val('');\n                        $(':text').val('');\n                    },\n                    error: function(result) {\n                        $(\"#main_input_box\").append(\"<div class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n\n                });\n            });\n            //form=document.getElementById(\"my_options\");\n            //function askForChange() {\n            //form.action=\"test\";\n            //form.submit();\n            //}\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 670,
        "y": 160,
        "wires": [
            [
                "b4b83576edf903b5"
            ]
        ]
    },
    {
        "id": "cab2d982dca2c30f",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "OTA Delete",
        "url": "/upload-into-database",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 480,
        "wires": [
            [
                "d20bc9138a0169be"
            ]
        ]
    },
    {
        "id": "10a5ab5dcfc58f1b",
        "type": "catch",
        "z": "122f65d809b34d8e",
        "name": "File Error",
        "scope": [
            "e28249513db9b6d9",
            "577364685ab43781",
            "cb89692e72e4a1a9",
            "bc3bb6ffb291288e",
            "4ab20d5b0eb3589e"
        ],
        "x": 80,
        "y": 340,
        "wires": [
            [
                "baf996edda360108"
            ]
        ]
    },
    {
        "id": "baf996edda360108",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Error",
        "rules": [
            {
                "t": "set",
                "p": "statusCode",
                "pt": "msg",
                "to": "500",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 340,
        "wires": [
            [
                "2757674848698812"
            ]
        ]
    },
    {
        "id": "83cd387005aedfca",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Change to MD5 filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.filename",
                "pt": "msg",
                "from": "bin",
                "fromt": "str",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 480,
        "wires": [
            [
                "577364685ab43781"
            ]
        ]
    },
    {
        "id": "5163f3c78ba48b6d",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "OTA Link",
        "url": "/upload-into-database",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 80,
        "y": 400,
        "wires": [
            [
                "ad13d04db5f53905"
            ]
        ]
    },
    {
        "id": "ad13d04db5f53905",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Extract filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.linkName",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".bin",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.linkFile",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".txt",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 400,
        "wires": [
            [
                "cb89692e72e4a1a9"
            ]
        ]
    },
    {
        "id": "90b8bceb32c9c7c8",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Change to MD5 Filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.linkName",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload.linkFile",
                "pt": "msg",
                "from": "bin$",
                "fromt": "re",
                "to": "md5",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 400,
        "wires": [
            [
                "bc3bb6ffb291288e"
            ]
        ]
    },
    {
        "id": "d20bc9138a0169be",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "Extract filename",
        "rules": [
            {
                "t": "change",
                "p": "payload.filename",
                "pt": "msg",
                "from": "$",
                "fromt": "re",
                "to": ".txt",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 480,
        "wires": [
            [
                "e28249513db9b6d9",
                "229b68c9527f20eb"
            ]
        ]
    },
    {
        "id": "cb89692e72e4a1a9",
        "type": "fs-ops-move",
        "z": "122f65d809b34d8e",
        "name": "Link firmware",
        "sourcePath": "",
        "sourcePathType": "str",
        "sourceFilename": "payload.linkFile",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "payload.linkName",
        "destFilenameType": "msg",
        "link": true,
        "x": 590,
        "y": 400,
        "wires": [
            [
                "90b8bceb32c9c7c8"
            ]
        ]
    },
    {
        "id": "bc3bb6ffb291288e",
        "type": "fs-ops-move",
        "z": "122f65d809b34d8e",
        "name": "Link MD5",
        "sourcePath": "",
        "sourcePathType": "str",
        "sourceFilename": "payload.linkFile",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "payload.linkName",
        "destFilenameType": "msg",
        "link": true,
        "x": 1060,
        "y": 400,
        "wires": [
            [
                "9830d71cb39f6027"
            ]
        ]
    },
    {
        "id": "e28249513db9b6d9",
        "type": "fs-ops-delete",
        "z": "122f65d809b34d8e",
        "name": "Delete firmware",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.filename",
        "filenameType": "msg",
        "x": 600,
        "y": 480,
        "wires": [
            [
                "83cd387005aedfca"
            ]
        ]
    },
    {
        "id": "577364685ab43781",
        "type": "fs-ops-delete",
        "z": "122f65d809b34d8e",
        "name": "Delete MD5 Hash",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.filename",
        "filenameType": "msg",
        "x": 1090,
        "y": 480,
        "wires": [
            [
                "9e5f7be850106284"
            ]
        ]
    },
    {
        "id": "f463a024845ffd4d",
        "type": "fs-ops-link",
        "z": "122f65d809b34d8e",
        "name": "Get Links",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.files",
        "filenameType": "msg",
        "link": "payload.links",
        "linkType": "msg",
        "x": 460,
        "y": 160,
        "wires": [
            [
                "75f8dc9625317378"
            ]
        ]
    },
    {
        "id": "62515f6e3d807c47",
        "type": "fs-ops-dir",
        "z": "122f65d809b34d8e",
        "name": "Firmware listing",
        "path": "firmware.directory",
        "pathType": "flow",
        "filter": "*.json",
        "filterType": "str",
        "dir": "payload.files",
        "dirType": "msg",
        "x": 280,
        "y": 160,
        "wires": [
            [
                "f463a024845ffd4d"
            ]
        ]
    },
    {
        "id": "4ce9f93ab2d5cb33",
        "type": "httpInMultipart",
        "z": "122f65d809b34d8e",
        "name": "OTA Upload",
        "url": "/upload-into-database",
        "method": "post",
        "fields": "[{ \"name\": \"firmware\"}]",
        "swaggerDoc": "",
        "x": 90,
        "y": 240,
        "wires": [
            [
                "4ab20d5b0eb3589e"
            ]
        ]
    },
    {
        "id": "67d2b0e7ed804d0b",
        "type": "mongodb out",
        "z": "122f65d809b34d8e",
        "mongodb": "96e271eba0b52a94",
        "name": "Load file into database",
        "collection": "historia",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 1180,
        "y": 240,
        "wires": []
    },
    {
        "id": "4ab20d5b0eb3589e",
        "type": "fs-ops-move",
        "z": "122f65d809b34d8e",
        "name": "Store firmware",
        "sourcePath": "req.files.firmware[0].destination",
        "sourcePathType": "msg",
        "sourceFilename": "req.files.firmware[0].filename",
        "sourceFilenameType": "msg",
        "destPath": "firmware.directory",
        "destPathType": "flow",
        "destFilename": "req.files.firmware[0].originalname",
        "destFilenameType": "msg",
        "link": false,
        "x": 280,
        "y": 240,
        "wires": [
            [
                "ed09f8e811dd3ebb",
                "a338d691dbcbcc95",
                "4b0e1b8ee55ee3dc"
            ]
        ]
    },
    {
        "id": "574e891f993fcb91",
        "type": "inject",
        "z": "122f65d809b34d8e",
        "g": "0888e7373481d35e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 890,
        "y": 700,
        "wires": [
            [
                "c8ba76d152d7366a"
            ]
        ]
    },
    {
        "id": "c8ba76d152d7366a",
        "type": "mongodb out",
        "z": "122f65d809b34d8e",
        "g": "0888e7373481d35e",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "historia",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 1130,
        "y": 700,
        "wires": []
    },
    {
        "id": "46f6454f8d3bdb92",
        "type": "function",
        "z": "122f65d809b34d8e",
        "name": "Format JSON",
        "func": "msg.payload = JSON.parse(msg.payload);\nmsg.filename = flow.get(\"original_name\");;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 240,
        "wires": [
            [
                "67d2b0e7ed804d0b",
                "5f8702cdecbebdd1"
            ]
        ]
    },
    {
        "id": "b4b83576edf903b5",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "e8c6e9ffed7b9a38"
        ],
        "x": 835,
        "y": 160,
        "wires": []
    },
    {
        "id": "e8c6e9ffed7b9a38",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 17",
        "links": [
            "b4b83576edf903b5",
            "13e5a65e6bd44eda"
        ],
        "x": 1365,
        "y": 220,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "ed09f8e811dd3ebb",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "a2b9b895f1a88888"
        ],
        "x": 415,
        "y": 200,
        "wires": []
    },
    {
        "id": "a2b9b895f1a88888",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 18",
        "links": [
            "ed09f8e811dd3ebb"
        ],
        "x": 1365,
        "y": 260,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "8d9f6656f8f37055",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 19",
        "links": [
            "2757674848698812"
        ],
        "x": 1365,
        "y": 300,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "2757674848698812",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "8d9f6656f8f37055"
        ],
        "x": 425,
        "y": 340,
        "wires": []
    },
    {
        "id": "9e5f7be850106284",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "5baf45c3e6032233"
        ],
        "x": 1225,
        "y": 480,
        "wires": []
    },
    {
        "id": "9830d71cb39f6027",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 6",
        "mode": "link",
        "links": [
            "20ec2a5a24d52017"
        ],
        "x": 1225,
        "y": 400,
        "wires": []
    },
    {
        "id": "20ec2a5a24d52017",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 20",
        "links": [
            "9830d71cb39f6027"
        ],
        "x": 1365,
        "y": 340,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "5baf45c3e6032233",
        "type": "link in",
        "z": "122f65d809b34d8e",
        "g": "0f1cf58e08b73cc2",
        "name": "link in 21",
        "links": [
            "9e5f7be850106284"
        ],
        "x": 1365,
        "y": 380,
        "wires": [
            [
                "21f9347e8aef3828"
            ]
        ]
    },
    {
        "id": "78dabba95c4207d3",
        "type": "config",
        "z": "122f65d809b34d8e",
        "name": "Database Config",
        "properties": [
            {
                "p": "firmware.directory",
                "pt": "flow",
                "to": "/home/rhyloo/OTA/",
                "tot": "str"
            },
            {
                "p": "database.name",
                "pt": "flow",
                "to": "test",
                "tot": "str"
            }
        ],
        "active": true,
        "x": 330,
        "y": 60,
        "wires": []
    },
    {
        "id": "b36aa30.3a7276",
        "type": "http request",
        "z": "122f65d809b34d8e",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "url": "",
        "x": 970,
        "y": 760,
        "wires": [
            [
                "1ef9987c.956c78"
            ]
        ]
    },
    {
        "id": "11167f67.5d5031",
        "type": "inject",
        "z": "122f65d809b34d8e",
        "name": "cars on craigslist",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "http://localhost:1880/upload-into-database",
        "payloadType": "str",
        "x": 640,
        "y": 760,
        "wires": [
            [
                "70154cd4.de1444"
            ]
        ]
    },
    {
        "id": "70154cd4.de1444",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 760,
        "wires": [
            [
                "b36aa30.3a7276"
            ]
        ]
    },
    {
        "id": "1ef9987c.956c78",
        "type": "debug",
        "z": "122f65d809b34d8e",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 1130,
        "y": 760,
        "wires": []
    },
    {
        "id": "a338d691dbcbcc95",
        "type": "change",
        "z": "122f65d809b34d8e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "original_name",
                "pt": "flow",
                "to": "req.files.firmware[0].originalname",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 280,
        "wires": [
            [
                "8c7f90b7fc20034e"
            ]
        ]
    },
    {
        "id": "229b68c9527f20eb",
        "type": "mongodb out",
        "z": "122f65d809b34d8e",
        "mongodb": "96e271eba0b52a94",
        "name": "Remove file from database",
        "collection": "historia",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 600,
        "y": 560,
        "wires": []
    },
    {
        "id": "5f8702cdecbebdd1",
        "type": "debug",
        "z": "122f65d809b34d8e",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1140,
        "y": 300,
        "wires": []
    },
    {
        "id": "ba5bdf24521f902e",
        "type": "mongodb out",
        "z": "122f65d809b34d8e",
        "mongodb": "96e271eba0b52a94",
        "name": "Remove file from database",
        "collection": "historia",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 900,
        "y": 320,
        "wires": []
    },
    {
        "id": "8c7f90b7fc20034e",
        "type": "function",
        "z": "122f65d809b34d8e",
        "name": "Get name",
        "func": "var name = flow.get(\"original_name\");\nmsg.payload = JSON.parse('{\"filename\":\"' + name + '\"}');\nreturn msg;\n'{\"firstName\": \"John\",\"lastName\": \"Doe\",\"location\": \"New York\"}'",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 280,
        "wires": [
            [
                "ba5bdf24521f902e"
            ]
        ]
    },
    {
        "id": "4ccb8e8716f24a2a",
        "type": "debug",
        "z": "122f65d809b34d8e",
        "name": "debug 10",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 480,
        "y": 680,
        "wires": []
    },
    {
        "id": "8bd48ac4766a807d",
        "type": "function",
        "z": "122f65d809b34d8e",
        "name": "function 14",
        "func": "msg.req = { \"_readableState\": { \"objectMode\": false, \"highWaterMark\": 16384, \"buffer\": { \"head\": null, \"tail\": null, \"length\": 0 }, \"length\": 0, \"pipes\": [], \"flowing\": null, \"ended\": true, \"endEmitted\": false, \"reading\": false, \"constructed\": true, \"sync\": true, \"needReadable\": false, \"emittedReadable\": false, \"readableListening\": false, \"resumeScheduled\": false, \"errorEmitted\": false, \"emitClose\": true, \"autoDestroy\": true, \"destroyed\": false, \"errored\": null, \"closed\": false, \"closeEmitted\": false, \"defaultEncoding\": \"utf8\", \"awaitDrainWriters\": null, \"multiAwaitDrain\": false, \"readingMore\": true, \"dataEmitted\": false, \"decoder\": null, \"encoding\": null }, \"_events\": {}, \"_eventsCount\": 1, \"socket\": \"[internal]\", \"httpVersionMajor\": 1, \"httpVersionMinor\": 1, \"httpVersion\": \"1.1\", \"complete\": true, \"rawHeaders\": [\"Host\", \"localhost:1880\", \"User-Agent\", \"Mozilla/5.0 (X11; Linux x86_64; rv:106.0) Gecko/20100101 Firefox/106.0\", \"Accept\", \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8\", \"Accept-Language\", \"en-US,en;q=0.5\", \"Accept-Encoding\", \"gzip, deflate, br\", \"Connection\", \"keep-alive\", \"Upgrade-Insecure-Requests\", \"1\", \"Sec-Fetch-Dest\", \"document\", \"Sec-Fetch-Mode\", \"navigate\", \"Sec-Fetch-Site\", \"none\", \"Sec-Fetch-User\", \"?1\", \"If-None-Match\", \"W/\\\"3128-qMtiVcwBVBzxIdUCUeE/ULHRlsg\\\"\"], \"rawTrailers\": [], \"aborted\": false, \"upgrade\": false, \"url\": \"/upload-into-database\", \"method\": \"GET\", \"statusCode\": null, \"statusMessage\": null, \"client\": \"[internal]\", \"_consuming\": false, \"_dumped\": false, \"baseUrl\": \"\", \"originalUrl\": \"/upload-into-database\", \"_parsedUrl\": { \"protocol\": null, \"slashes\": null, \"auth\": null, \"host\": null, \"port\": null, \"hostname\": null, \"hash\": null, \"search\": null, \"query\": null, \"pathname\": \"/upload-into-database\", \"path\": \"/upload-into-database\", \"href\": \"/upload-into-database\", \"_raw\": \"/upload-into-database\" }, \"params\": {}, \"query\": { \"files\": [\"acertijo.txt\", \"test.txt\"], \"links\": [\"\", \"\"] }, \"res\": \"[internal]\", \"body\": {}, \"_parsedOriginalUrl\": { \"protocol\": null, \"slashes\": null, \"auth\": null, \"host\": null, \"port\": null, \"hostname\": null, \"hash\": null, \"search\": null, \"query\": null, \"pathname\": \"/upload-into-database\", \"path\": \"/upload-into-database\", \"href\": \"/upload-into-database\", \"_raw\": \"/upload-into-database\" }, \"route\": { \"path\": \"/upload-into-database\", \"stack\": [{ \"name\": \"cookieParser\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"httpMiddleware\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"corsHandler\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"metricsHandler\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"<anonymous>\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }, { \"name\": \"<anonymous>\", \"keys\": [], \"regexp\": { \"__enc__\": true, \"type\": \"regexp\", \"data\": \"/^\\\\/?$/i\" }, \"method\": \"get\" }], \"methods\": { \"get\": true } }, \"cookies\": {}, \"signedCookies\": {} };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 620,
        "wires": [
            [
                "6e6303ec1355dd7b"
            ]
        ]
    },
    {
        "id": "3ea1869ededca123",
        "type": "function",
        "z": "122f65d809b34d8e",
        "name": "function 15",
        "func": "flow.set(\"database.name\", msg.payload.cars); \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 680,
        "wires": [
            [
                "4ccb8e8716f24a2a"
            ]
        ]
    },
    {
        "id": "6e6303ec1355dd7b",
        "type": "fs-ops-dir",
        "z": "122f65d809b34d8e",
        "name": "Firmware listing",
        "path": "firmware.directory",
        "pathType": "flow",
        "filter": "*.txt",
        "filterType": "str",
        "dir": "payload.files",
        "dirType": "msg",
        "x": 500,
        "y": 620,
        "wires": [
            [
                "a29930999c9591dd"
            ]
        ]
    },
    {
        "id": "a29930999c9591dd",
        "type": "fs-ops-link",
        "z": "122f65d809b34d8e",
        "name": "Get Links",
        "path": "firmware.directory",
        "pathType": "flow",
        "filename": "payload.files",
        "filenameType": "msg",
        "link": "payload.links",
        "linkType": "msg",
        "x": 720,
        "y": 620,
        "wires": [
            [
                "7c32016dc0bd0ac8"
            ]
        ]
    },
    {
        "id": "13e5a65e6bd44eda",
        "type": "link out",
        "z": "122f65d809b34d8e",
        "name": "link out 7",
        "mode": "link",
        "links": [
            "e8c6e9ffed7b9a38"
        ],
        "x": 1095,
        "y": 620,
        "wires": []
    },
    {
        "id": "eb17e5a1f3da02dc",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "OTA Manager",
        "url": "/test",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 620,
        "wires": [
            [
                "8bd48ac4766a807d"
            ]
        ]
    },
    {
        "id": "08fcca7c8fe2ad73",
        "type": "http in",
        "z": "122f65d809b34d8e",
        "name": "",
        "url": "/test",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 80,
        "y": 680,
        "wires": [
            [
                "8bd48ac4766a807d",
                "3ea1869ededca123"
            ]
        ]
    },
    {
        "id": "7c32016dc0bd0ac8",
        "type": "template",
        "z": "122f65d809b34d8e",
        "name": "Firmware Manager",
        "field": "payload",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<html>\n    <head>\n        <title>Database File Manager</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <link rel=\"stylesheet\" href=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\">\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"></script>\n        <script src=\"http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n        <style>\n            .file-btn-grp {\n                display: none;\n            }\n            body {\n                background-color: #f6f6f6;\n            }\n            .text_holder {\n                display: block;\n                max-width: 100%;\n                word-wrap: break-word;\n                line-height: 30px;\n            }\n            #main {\n                margin-top: 50px;\n                background-color: #ffffff;\n                border-radius: 5px;\n                width: 70%;\n                min-width: 500px;\n                border: 1px solid #545454;\n            }\n            .alert {\n                margin-top: 10px;\n                margin-bottom: 5px;\n            }\n            .link {\n                font-style: italic;\n            }\n            .listentry {\n                display: none;\n                list-style-type: none;\n            }\n        </style>\n\n    </head>\n    <body>\n        <div class=\"container\" id=\"main\">\n            <h1><small>Database File Manager</small></h1>\n            <h2><small>Upload New Files</small></h2>\n<form action=\"test\" method=\"POST\">\n    <label for=\"cars\">Choose a collection:</label>\n    <select name=\"cars\" id=\"cars\">\n    <option value=\"test2\">test2</option>\n    <option value=\"test3\">test3</option>\n    <option value=\"test4\">test4</option>\n    <option value=\"test5\">test5</option>\n  </select>\n    <br><br>\n    <input type=\"submit\" value=\"Submit\">\n</form>\n            <form role =\"form\" id=\"main_input_box\" action=\"upload-into-database\" method=\"POST\" enctype=\"multipart/form-data\" class=\"form-inline\">\n                <input type=\"file\" accept=\".txt\" class=\"hidden\" id=\"fileUpload\" name=\"firmware\" placeholder=\"firmware.bin\">\n                <div class=\"form-group\">\n                <div class=\"input-group\">\n                    <span class=\"input-group-btn\">\n                        <button id=\"browse\" type=\"button\" class=\"btn btn-primary\">Browse...</button>\n                    </span>\n                    <input id=\"filename\" size=100 readonly=\"\" class=\"form-control\" placeholder=\"File\">\n                    <span class=\"input-group-btn\">\n                        <input type=\"submit\" value=\"Upload\" class=\"btn btn-primary add_button\">\n                    </span>\n                </div>\n                </div>\n            </form>\n\n            <h2><small>Current Files</small></h2>\n            <ul class=\"list-group\" id=\"list_of_items\">\n            </ul>\n        </div>\n\n        <div id=\"linkModal\" class=\"modal fade\" role=\"dialog\">\n            <div class=\"modal-dialog\">\n        \n                <!-- Modal content-->\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\n                        <h4 class=\"modal-title\">Create Symbolic Link</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form class=\"form-horizontal\" id=\"linkForm\" role=\"form\" action=\"#\" method=\"POST\">\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkName\">Link:</label> \n                                <div class=\"col-sm-10\">\n                                    <input id=\"linkName\" name=\"linkName\" class=\"form-control\"/>\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"control-label  col-sm-2\" for=\"linkFile\">To:</label> \n                                <div class=\"col-sm-10\">\n                                    <input class=\"form-control\" id=\"linkFile\" name=\"linkFile\"/>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"submit\" class=\"btn btn-success link-create\">Create</button>\n                        <button type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\">Cancel</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <script>\n\n            var deleteButton = \"<button id='delete' class='btn btn-warning'>Delete</button>\";\n            var linkButton = \"<button id='link' class='btn btn-success'>Link</button>\";\n            var oneButton = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + \"</div>\";\n            var twoButtons = \"<div class='file-btn-grp btn-group pull-right'>\" + deleteButton + linkButton + \"</div>\";\n            \n            function addListEntry(list, filename, linkname) {\n            \n                var entry;\n                \n                if (linkname === undefined) {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span>\" \n                    + filename + \"</span>\" + twoButtons + \"</div></li>\");\n                } else {\n                    entry = $(\"<li class='listentry list-group-item'><div class='text_holder'><span class='link'>\" \n                    + filename + \"</span> <span class='glyphicon glyphicon-arrow-right'></span> \" \n                    + linkname + oneButton + \"</div></li>\");\n                }\n                \n                entry.mouseover(function(){\n                    $(this).find(\".btn-group\").fadeIn(\"fast\");\n                });\n                entry.mouseleave(function(){\n                    $(this).find(\".btn-group\").fadeOut(\"slow\");\n                });\n                \n                entry.on(\"click\", \"button#delete\", function(){\n                    var listItem = this.parentElement.parentElement.parentElement;\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $.ajax({\n                        type: 'DELETE',\n                        data: {\"filename\": file},\n                        success: function(result) {\n                            $(listItem).fadeOut(\"slow\", function(){\n                                listItem.remove();\n                            });\n                        },\n                        error: function(result) {\n                            $(listItem).append(\"<div class='alert alert-danger'>\"\n                                + \"<a href='#' class='close' data-dismiss='alert'\"\n                                + \"aria-label='close'>&times;</a>\"\n                                + result.responseText + \"</div>\");\n                        }\n                    });\n                });\n           \n                entry.on(\"click\", \"button#link\", function(){\n                    var file = this.parentElement.parentElement.childNodes[0].childNodes[0].data;\n                    $(\"#linkName\").val(\"\");\n                    $(\"#linkFile\").prop(\"disabled\", true).val(file);\n                    $(\"#linkName\").parent().removeClass(\"has-error\");\n                    $(\"#linkModal\").modal();\n                    $('#linkModal').on('shown.bs.modal', function () {\n                        $('#linkName').focus();\n                    });\n                });\n                \n                if (list.children().length == 0) {\n                    list.append(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n\n                if (filename < $(\"li:first span:first\", list).text()) {\n                    $(\"li:first\", list).before(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                if (filename > $(\"li:last span:first\", list).text()) {\n                    $(\"li:last\", list).after(entry);\n                    entry.fadeIn(\"slow\");\n                    return;\n                }\n                \n                var count = 0;\n                var $li = $(\"li\", list);\n                do {\n                    var index = parseInt($li.length / 2);\n                    var $compare = $li.eq(index);\n                    var compare = $(\"span:first\",$compare).text();\n                    if (filename === compare) {\n                        break;\n                    }\n                    else if (filename > compare) {\n                        $li = $li.slice(index, $li.length);\n                    } else {\n                        $li = $li.slice(0, index);\n                    }\n                } while ($li.length > 1);\n\n                if (filename === compare) {\n                    $compare.slideUp(\"fast\").slideDown(\"slow\");\n                    return;\n                } else if (filename < compare) { \n                    entry.insertBefore($compare); \n                } else { \n                    entry.insertAfter($compare); \n                }\n                entry.slideDown(\"slow\");\n            }\n            \n            \n            var files = String(\"{{payload.files}}\").split(',');\n            var links = String(\"{{payload.links}}\").split(',');\n            \n            var list_of_items = $(\"#list_of_items\");\n            \n            files.forEach(function(file,index) {\n                if (links[index] == \"\") {\n                    addListEntry(this, file.slice(0,-4));\n                } else {\n                    addListEntry(this, file.slice(0,-4), links[index].slice(0,-4));\n                }\n            },list_of_items);\n           \n           \n            $(\"#linkModal\").on(\"click\", \"button.link-create\", function(event){\n               event.preventDefault();\n               if ($(\"#linkName\").val() == \"\") {\n                    $('#linkName').focus();\n                    $('#linkName').parent().addClass(\"has-error\");\n                    return false;\n               }\n               $(\"#linkFile\").prop(\"disabled\",false);               \n               $.ajax({\n                    type: 'PUT',\n                    data: $(\"#linkForm\").serialize(),\n                    success: function(result) {\n                        $(\"#linkModal\").modal('hide');\n                        addListEntry(list_of_items, $('#linkName').val(), $('#linkFile').val());\n                    },\n                    error: function(result) {\n                        $(\"#linkFile\").prop(\"disabled\", true);\n                        $('#linkName').focus();\n                        $('#linkName').parent().addClass(\"has-error\");\n                        $(linkForm).append(\"<div id='linkError' class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n                });\n            });\n            \n            $(\"#browse\").on('click', function () {\n                fileUpload.click();\n            });\n            \n            $(\"#fileUpload\").on('change', function () {\n                $(\"#filename\").val($(\"#fileUpload\").val().split('/').pop().split('\\\\').pop());\n            });\n            \n            var frm = $(\"#main_input_box\");\n            \n            frm.submit( function( e ) {\n                e.preventDefault();\n                if ($('#fileUpload').val() == \"\") return null;\n                $.ajax( {\n                    url: frm.attr('action'),\n                    type: frm.attr('method'),\n                    data: new FormData( this ),\n                    processData: false,\n                    contentType: false,\n                    success: function(result) {\n                        addListEntry(list_of_items, $('#fileUpload').val().slice(0,-4).split('\\\\').pop());\n                        $('#fileUpload').val('');\n                        $(':text').val('');\n                    },\n                    error: function(result) {\n                        $(\"#main_input_box\").append(\"<div class='alert alert-danger'>\"\n                             + \"<a href='#' class='close' data-dismiss='alert'\"\n                             + \"aria-label='close'>&times;</a>\"\n                             + result.responseText + \"</div>\");\n                    }\n\n                });\n            });\n            //form=document.getElementById(\"my_options\");\n            //function askForChange() {\n            //form.action=\"test\";\n            //form.submit();\n            //}\n        </script>\n    </body>\n</html>",
        "output": "str",
        "x": 910,
        "y": 620,
        "wires": [
            [
                "13e5a65e6bd44eda"
            ]
        ]
    },
    {
        "id": "d064a8a08363d9a0",
        "type": "telegram receiver",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "bot": "d95354d46509e771",
        "saveDataDir": "",
        "filterCommands": true,
        "x": 130,
        "y": 120,
        "wires": [
            [
                "22daf5dc41a5c8e3",
                "32e1c65c1907a6cf"
            ],
            []
        ]
    },
    {
        "id": "20a682fad8758c49",
        "type": "telegram sender",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "",
        "bot": "d95354d46509e771",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1510,
        "y": 80,
        "wires": [
            [
                "18eebd5c17ad471e"
            ]
        ]
    },
    {
        "id": "22a622e6e3a77723",
        "type": "subflow:7cbc96056c55979a",
        "z": "b056b4cf9a298e0d",
        "g": "407e3e089de46a03",
        "name": "Cara002",
        "x": 580,
        "y": 480,
        "wires": [
            [
                "ad9e883957d3685b"
            ],
            [
                "1f58fb8b96bce92e"
            ],
            [
                "7dc2883e2ed41873"
            ],
            [
                "7e42775797773e47"
            ]
        ],
        "icon": "font-awesome/fa-asl-interpreting"
    },
    {
        "id": "a483d173586b9e5e",
        "type": "change",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "user",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 220,
        "wires": [
            [
                "a5686142f35c81ec"
            ]
        ]
    },
    {
        "id": "a5686142f35c81ec",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 16",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 220,
        "wires": []
    },
    {
        "id": "eafe96754ad3092d",
        "type": "telegram command",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "command": "/start",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "d95354d46509e771",
        "strict": false,
        "hasresponse": false,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 1,
        "x": 90,
        "y": 220,
        "wires": [
            [
                "f7729e750778cebb"
            ]
        ]
    },
    {
        "id": "fedcb4bb1ace3832",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "name": "link out 8",
        "mode": "link",
        "links": [
            "880fa11cf1585bf1",
            "d8313757e30311dd"
        ],
        "x": 435,
        "y": 320,
        "wires": []
    },
    {
        "id": "b4e7a71c03156b8f",
        "type": "complete",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "scope": [
            "a5686142f35c81ec"
        ],
        "uncaught": false,
        "x": 110,
        "y": 340,
        "wires": [
            [
                "76a6ee3d55ede71e"
            ]
        ]
    },
    {
        "id": "d8313757e30311dd",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "link in 23",
        "links": [
            "e34ad49609205470",
            "fedcb4bb1ace3832",
            "f8d2fc3e0e98c026",
            "f3f6865a4acc64a8",
            "ad9e883957d3685b",
            "48e47a4a4fa7878c",
            "c639bb0d1b3c78f4"
        ],
        "x": 1065,
        "y": 80,
        "wires": [
            [
                "20a682fad8758c49"
            ]
        ]
    },
    {
        "id": "cfe27898c4972426",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "",
        "func": "var time = global.get(\"time\");\ntime = time - 1;\nglobal.set(\"time\", time);\n\nvar sec_num = time;\nvar hours = Math.floor(sec_num / 3600);\nvar minutes = Math.floor((sec_num - (hours * 3600)) / 60);\nvar seconds = sec_num - (hours * 3600) - (minutes * 60);\n\nif (hours < 10) { hours = \"0\" + hours; }\nif (minutes < 10) { minutes = \"0\" + minutes; }\nif (seconds < 10) { seconds = \"0\" + seconds; }\n\nmsg.payload = hours + ':' + minutes + ':' + seconds;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1640,
        "y": 300,
        "wires": [
            [
                "5b392c70bdeeab37"
            ]
        ]
    },
    {
        "id": "08f030f5381a1c7d",
        "type": "config",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "properties": [
            {
                "p": "time",
                "pt": "global",
                "to": "3600",
                "tot": "num"
            },
            {
                "p": "Game",
                "pt": "global",
                "to": "0",
                "tot": "str"
            },
            {
                "p": "save_random",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "active": true,
        "x": 310,
        "y": 280,
        "wires": []
    },
    {
        "id": "da39ff3f3bd01714",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "Send an inline message",
        "func": "var texto = msg.payload;\nmsg.payload = global.get(\"user\");\nmsg.payload.content = texto;\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 140,
        "wires": [
            [
                "20a682fad8758c49"
            ]
        ]
    },
    {
        "id": "ad9e883957d3685b",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "407e3e089de46a03",
        "name": "link out 10",
        "mode": "link",
        "links": [
            "d8313757e30311dd"
        ],
        "x": 755,
        "y": 440,
        "wires": []
    },
    {
        "id": "56de6b18ecd69a81",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "link in 24",
        "links": [
            "5e29b723009e3677",
            "dc20f200c13eb39a",
            "b2227557ab57b7ef",
            "7e40046c60ee2860",
            "ca6fc1c375a4484a"
        ],
        "x": 1065,
        "y": 140,
        "wires": [
            [
                "da39ff3f3bd01714"
            ]
        ]
    },
    {
        "id": "5b392c70bdeeab37",
        "type": "ui_text",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "group": "f870df7d6c3cc2e9",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Game time - User",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1850,
        "y": 300,
        "wires": []
    },
    {
        "id": "8cf6b99ba10ac475",
        "type": "complete",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "scope": [
            "a5686142f35c81ec"
        ],
        "uncaught": false,
        "x": 110,
        "y": 280,
        "wires": [
            [
                "08f030f5381a1c7d"
            ]
        ]
    },
    {
        "id": "078431c881436679",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 6",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 140,
        "wires": []
    },
    {
        "id": "22daf5dc41a5c8e3",
        "type": "change",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "user",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 140,
        "wires": [
            [
                "078431c881436679"
            ]
        ]
    },
    {
        "id": "18eebd5c17ad471e",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "debug 21",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1680,
        "y": 80,
        "wires": []
    },
    {
        "id": "32e1c65c1907a6cf",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "Delete messages from user",
        "func": "msg.payload = global.get(\"user\");\nvar chat_id = msg.payload.chatId;\nvar message_id = msg.payload.messageId;\nmsg.payload.type = \"deleteMessage\";\nmsg.payload.content = message_id;\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 80,
        "wires": [
            [
                "f3f6865a4acc64a8"
            ]
        ]
    },
    {
        "id": "f3f6865a4acc64a8",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "name": "link out 13",
        "mode": "link",
        "links": [
            "d8313757e30311dd"
        ],
        "x": 605,
        "y": 80,
        "wires": []
    },
    {
        "id": "0d44cb0ff1d349ea",
        "type": "ui_led",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "order": 3,
        "group": "f870df7d6c3cc2e9",
        "width": 0,
        "height": 0,
        "label": "Cara002",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff7800",
                "value": "Setting Up",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Waiting to start game",
                "valueType": "str"
            },
            {
                "color": "#dc8add",
                "value": "Starting",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "Playing",
                "valueType": "str"
            },
            {
                "color": "#cc0000",
                "value": "You lose",
                "valueType": "str"
            },
            {
                "color": "#1a5fb4",
                "value": "You won",
                "valueType": "str"
            },
            {
                "color": "#865e3c",
                "value": "Timeout! You lost",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "Cara002",
        "x": 1880,
        "y": 500,
        "wires": []
    },
    {
        "id": "b8246bec0ff6bd43",
        "type": "delay",
        "z": "b056b4cf9a298e0d",
        "g": "407e3e089de46a03",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 220,
        "y": 480,
        "wires": [
            [
                "22a622e6e3a77723"
            ]
        ]
    },
    {
        "id": "1f58fb8b96bce92e",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "407e3e089de46a03",
        "name": "link out 17",
        "mode": "link",
        "links": [
            "0b1f4c3a444e4988",
            "ef258efaabcdd988"
        ],
        "x": 755,
        "y": 480,
        "wires": []
    },
    {
        "id": "7dc2883e2ed41873",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "407e3e089de46a03",
        "name": "link out 18",
        "mode": "link",
        "links": [],
        "x": 755,
        "y": 520,
        "wires": []
    },
    {
        "id": "ef258efaabcdd988",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "link in 26",
        "links": [
            "5e29b723009e3677",
            "dc20f200c13eb39a",
            "b2227557ab57b7ef",
            "1f58fb8b96bce92e",
            "f6583d92a29357b9"
        ],
        "x": 1065,
        "y": 500,
        "wires": [
            [
                "0d44cb0ff1d349ea"
            ]
        ]
    },
    {
        "id": "a30bf994eae7cd3e",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "link in 27",
        "links": [
            "5e29b723009e3677",
            "dc20f200c13eb39a",
            "b2227557ab57b7ef",
            "12cc4231e9594b77",
            "592ea0f1449e87e8",
            "e789e8e1711a246d",
            "2251ca56c78e191a"
        ],
        "x": 1065,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "7e40046c60ee2860",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "f0bc3c69188895b3",
        "name": "link out 19",
        "mode": "link",
        "links": [
            "56de6b18ecd69a81"
        ],
        "x": 755,
        "y": 660,
        "wires": []
    },
    {
        "id": "fdb7e2982875f8ba",
        "type": "delay",
        "z": "b056b4cf9a298e0d",
        "g": "f0bc3c69188895b3",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 420,
        "y": 700,
        "wires": [
            [
                "323b84f05b7a90a2"
            ]
        ]
    },
    {
        "id": "323b84f05b7a90a2",
        "type": "subflow:72ea5fcb0b022fe1",
        "z": "b056b4cf9a298e0d",
        "g": "f0bc3c69188895b3",
        "name": "",
        "x": 590,
        "y": 700,
        "wires": [
            [
                "7e40046c60ee2860"
            ],
            [
                "90effe8f20f81252"
            ],
            [
                "e789e8e1711a246d"
            ]
        ]
    },
    {
        "id": "e851ebc98b56550e",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "g": "f0bc3c69188895b3",
        "name": "terminado?",
        "func": "if (msg.payload == 2){\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 700,
        "wires": [
            [
                "fdb7e2982875f8ba"
            ]
        ]
    },
    {
        "id": "0b1f4c3a444e4988",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "f0bc3c69188895b3",
        "name": "link in 28",
        "links": [
            "1f58fb8b96bce92e"
        ],
        "x": 55,
        "y": 700,
        "wires": [
            [
                "e851ebc98b56550e"
            ]
        ]
    },
    {
        "id": "5d4807349eb7d70c",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "link in 29",
        "links": [
            "5e29b723009e3677",
            "dc20f200c13eb39a",
            "b2227557ab57b7ef",
            "f6583d92a29357b9",
            "90effe8f20f81252"
        ],
        "x": 1065,
        "y": 540,
        "wires": [
            [
                "53043cabf9626c6d"
            ]
        ]
    },
    {
        "id": "c8b701ed5904c646",
        "type": "exec",
        "z": "b056b4cf9a298e0d",
        "command": "hostname -I",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 650,
        "y": 1320,
        "wires": [
            [
                "8c565092cc31b72a"
            ],
            [
                "8c565092cc31b72a"
            ],
            [
                "8c565092cc31b72a"
            ]
        ]
    },
    {
        "id": "54c3cce6610825af",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 280,
        "y": 1300,
        "wires": [
            [
                "35a82e75ac72f0d7"
            ]
        ]
    },
    {
        "id": "8c565092cc31b72a",
        "type": "debug",
        "z": "b056b4cf9a298e0d",
        "name": "debug 28",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 840,
        "y": 1320,
        "wires": []
    },
    {
        "id": "ca6fc1c375a4484a",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "ef9e0b05387b0f7f",
        "name": "link out 20",
        "mode": "link",
        "links": [
            "56de6b18ecd69a81"
        ],
        "x": 755,
        "y": 1020,
        "wires": []
    },
    {
        "id": "81702d1a90090e50",
        "type": "delay",
        "z": "b056b4cf9a298e0d",
        "g": "ef9e0b05387b0f7f",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 420,
        "y": 1060,
        "wires": [
            [
                "d5f490ad8e2a8675"
            ]
        ]
    },
    {
        "id": "5dbd7316c3660276",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "g": "ef9e0b05387b0f7f",
        "name": "terminado?",
        "func": "if (msg.payload == 2){\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 1060,
        "wires": [
            [
                "81702d1a90090e50"
            ]
        ]
    },
    {
        "id": "6fdb94005210418f",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "ef9e0b05387b0f7f",
        "name": "link in 30",
        "links": [
            "90effe8f20f81252"
        ],
        "x": 55,
        "y": 1060,
        "wires": [
            [
                "5dbd7316c3660276"
            ]
        ]
    },
    {
        "id": "d5f490ad8e2a8675",
        "type": "subflow:90d9a362f6d9804b",
        "z": "b056b4cf9a298e0d",
        "g": "ef9e0b05387b0f7f",
        "name": "",
        "x": 600,
        "y": 1060,
        "wires": [
            [
                "ca6fc1c375a4484a"
            ],
            [
                "376f1e1e0b41f292"
            ],
            [
                "592ea0f1449e87e8"
            ]
        ]
    },
    {
        "id": "376f1e1e0b41f292",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "ef9e0b05387b0f7f",
        "name": "link out 25",
        "mode": "link",
        "links": [
            "adf692ef0a9e9fb2"
        ],
        "x": 755,
        "y": 1060,
        "wires": []
    },
    {
        "id": "592ea0f1449e87e8",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "ef9e0b05387b0f7f",
        "name": "link out 26",
        "mode": "link",
        "links": [
            "a30bf994eae7cd3e"
        ],
        "x": 755,
        "y": 1100,
        "wires": []
    },
    {
        "id": "adf692ef0a9e9fb2",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "link in 32",
        "links": [
            "5e29b723009e3677",
            "dc20f200c13eb39a",
            "b2227557ab57b7ef",
            "f6583d92a29357b9",
            "376f1e1e0b41f292"
        ],
        "x": 1065,
        "y": 620,
        "wires": [
            [
                "df04ce1c2dcf737c"
            ]
        ]
    },
    {
        "id": "90effe8f20f81252",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "f0bc3c69188895b3",
        "name": "link out 27",
        "mode": "link",
        "links": [
            "5d4807349eb7d70c",
            "0419ec0ef4ea5662",
            "6fdb94005210418f"
        ],
        "x": 755,
        "y": 700,
        "wires": []
    },
    {
        "id": "e789e8e1711a246d",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "f0bc3c69188895b3",
        "name": "link out 28",
        "mode": "link",
        "links": [
            "a30bf994eae7cd3e"
        ],
        "x": 755,
        "y": 740,
        "wires": []
    },
    {
        "id": "76a6ee3d55ede71e",
        "type": "subflow:7e2a7678166f609f",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "x": 310,
        "y": 340,
        "wires": [
            [
                "fedcb4bb1ace3832"
            ],
            [
                "f7ada90ceac6855c"
            ]
        ]
    },
    {
        "id": "f7ada90ceac6855c",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "name": "link out 29",
        "mode": "link",
        "links": [
            "880fa11cf1585bf1",
            "f43072220deb7eb3"
        ],
        "x": 435,
        "y": 360,
        "wires": []
    },
    {
        "id": "f43072220deb7eb3",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "407e3e089de46a03",
        "name": "link in 33",
        "links": [
            "f7ada90ceac6855c"
        ],
        "x": 55,
        "y": 480,
        "wires": [
            [
                "b8246bec0ff6bd43"
            ]
        ]
    },
    {
        "id": "f7729e750778cebb",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "name": "Set Parse Mode",
        "func": "msg.payload.options = { parse_mode: \"Markdown\" };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 220,
        "wires": [
            [
                "a483d173586b9e5e"
            ]
        ]
    },
    {
        "id": "35a82e75ac72f0d7",
        "type": "subflow:178fa897d7510777",
        "z": "b056b4cf9a298e0d",
        "g": "cf3c6d5c39d2c130",
        "name": "",
        "x": 600,
        "y": 880,
        "wires": [
            [
                "48e47a4a4fa7878c"
            ],
            [
                "1c364c42988add9a"
            ],
            [
                "2251ca56c78e191a"
            ]
        ]
    },
    {
        "id": "48e47a4a4fa7878c",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "cf3c6d5c39d2c130",
        "name": "link out 53",
        "mode": "link",
        "links": [
            "d8313757e30311dd"
        ],
        "x": 755,
        "y": 840,
        "wires": []
    },
    {
        "id": "15db43e96aacebc7",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "g": "cf3c6d5c39d2c130",
        "name": "terminado?",
        "func": "if (msg.payload == 2){\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 880,
        "wires": [
            [
                "6513cbef9618b513"
            ]
        ]
    },
    {
        "id": "6513cbef9618b513",
        "type": "delay",
        "z": "b056b4cf9a298e0d",
        "g": "cf3c6d5c39d2c130",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 420,
        "y": 880,
        "wires": [
            [
                "35a82e75ac72f0d7"
            ]
        ]
    },
    {
        "id": "0419ec0ef4ea5662",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "cf3c6d5c39d2c130",
        "name": "link in 36",
        "links": [
            "90effe8f20f81252"
        ],
        "x": 55,
        "y": 880,
        "wires": [
            [
                "15db43e96aacebc7"
            ]
        ]
    },
    {
        "id": "1c364c42988add9a",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "cf3c6d5c39d2c130",
        "name": "link out 54",
        "mode": "link",
        "links": [
            "eae9519bc6028278"
        ],
        "x": 755,
        "y": 880,
        "wires": []
    },
    {
        "id": "2251ca56c78e191a",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "cf3c6d5c39d2c130",
        "name": "link out 55",
        "mode": "link",
        "links": [
            "a30bf994eae7cd3e"
        ],
        "x": 755,
        "y": 920,
        "wires": []
    },
    {
        "id": "eae9519bc6028278",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "link in 37",
        "links": [
            "5e29b723009e3677",
            "dc20f200c13eb39a",
            "b2227557ab57b7ef",
            "f6583d92a29357b9",
            "1c364c42988add9a"
        ],
        "x": 1065,
        "y": 580,
        "wires": [
            [
                "08ddf1692c99f594"
            ]
        ]
    },
    {
        "id": "c5ae80492cc45acc",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "g": "aebc254432ed2103",
        "name": "Get a range of messages",
        "func": "const min = 0;\nconst max = 6;\nmsg.payload = [\n  { $match: { \"filename\": \"historia.json\" } },\n  { $unwind: \"$payload\" },\n  {\n    $match: {\n      \"payload.numero\": { $gte: min, $lte: max }\n    }\n  },\n  {$sort: {\n    numero: 1 // 1 for ascending, -1 for descending\n  }},\n  { $replaceRoot: { newRoot: \"$payload\" } }\n];\nreturn msg;\n\n//msg.payload = [\n//  { $match: { \"filename\": \"historia.json\" } },\n//  { $unwind: \"$payload\" },\n//  { $match: { $and: [{ \"payload.numero\": { $gt: 0 } }, { \"payload.numero\": { $lt: 2 } }] } },\n//  { $replaceRoot: { newRoot: \"$payload\" } }\n//];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 740,
        "wires": [
            [
                "6fec583b8ba2414b"
            ]
        ]
    },
    {
        "id": "615625af66db86d6",
        "type": "inject",
        "z": "b056b4cf9a298e0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 380,
        "y": 400,
        "wires": [
            [
                "22a622e6e3a77723"
            ]
        ]
    },
    {
        "id": "6fec583b8ba2414b",
        "type": "mongodb in",
        "z": "b056b4cf9a298e0d",
        "g": "aebc254432ed2103",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "historia",
        "operation": "aggregate",
        "x": 1210,
        "y": 820,
        "wires": [
            [
                "1afbd2ca7999e2cb"
            ]
        ]
    },
    {
        "id": "1afbd2ca7999e2cb",
        "type": "function",
        "z": "b056b4cf9a298e0d",
        "g": "aebc254432ed2103",
        "name": "Get a range of messages",
        "func": "var contenido = msg.payload;\nvar lenght = msg.payload.length\nfor (let i = 0; i < lenght; i++) {\n  // Add a delay of 1000 milliseconds (1 second) before continuing to the next iteration\n  await new Promise(resolve => setTimeout(resolve, 5000));\n  msg.payload = contenido[i].content;\n  node.send(msg);\n}\n//return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1470,
        "y": 820,
        "wires": [
            [
                "3ebb0818b8ba2406"
            ]
        ]
    },
    {
        "id": "3ebb0818b8ba2406",
        "type": "delay",
        "z": "b056b4cf9a298e0d",
        "g": "aebc254432ed2103",
        "name": "",
        "pauseType": "random",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "5",
        "randomLast": "10",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1680,
        "y": 820,
        "wires": [
            [
                "da39ff3f3bd01714"
            ]
        ]
    },
    {
        "id": "53043cabf9626c6d",
        "type": "ui_led",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "order": 3,
        "group": "f870df7d6c3cc2e9",
        "width": 0,
        "height": 0,
        "label": "Cara003",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff7800",
                "value": "Setting Up",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Waiting to start game",
                "valueType": "str"
            },
            {
                "color": "#dc8add",
                "value": "Starting",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "Playing",
                "valueType": "str"
            },
            {
                "color": "#cc0000",
                "value": "You lose",
                "valueType": "str"
            },
            {
                "color": "#1a5fb4",
                "value": "You won",
                "valueType": "str"
            },
            {
                "color": "#865e3c",
                "value": "Timeout! You lost",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "Cara003",
        "x": 1880,
        "y": 540,
        "wires": []
    },
    {
        "id": "08ddf1692c99f594",
        "type": "ui_led",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "order": 3,
        "group": "f870df7d6c3cc2e9",
        "width": 0,
        "height": 0,
        "label": "Cara004",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff7800",
                "value": "Setting Up",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Waiting to start game",
                "valueType": "str"
            },
            {
                "color": "#dc8add",
                "value": "Starting",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "Playing",
                "valueType": "str"
            },
            {
                "color": "#cc0000",
                "value": "You lose",
                "valueType": "str"
            },
            {
                "color": "#1a5fb4",
                "value": "You won",
                "valueType": "str"
            },
            {
                "color": "#865e3c",
                "value": "Timeout! You lost",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "Cara004",
        "x": 1880,
        "y": 580,
        "wires": []
    },
    {
        "id": "df04ce1c2dcf737c",
        "type": "ui_led",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "order": 3,
        "group": "f870df7d6c3cc2e9",
        "width": 0,
        "height": 0,
        "label": "Cara005",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff7800",
                "value": "Setting Up",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Waiting to start game",
                "valueType": "str"
            },
            {
                "color": "#dc8add",
                "value": "Starting",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "Playing",
                "valueType": "str"
            },
            {
                "color": "#cc0000",
                "value": "You lose",
                "valueType": "str"
            },
            {
                "color": "#1a5fb4",
                "value": "You won",
                "valueType": "str"
            },
            {
                "color": "#865e3c",
                "value": "Timeout! You lost",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "Cara005",
        "x": 1880,
        "y": 620,
        "wires": []
    },
    {
        "id": "c4abfd79327ad2ff",
        "type": "ui_text",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "text",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1890,
        "y": 360,
        "wires": []
    },
    {
        "id": "7e42775797773e47",
        "type": "link out",
        "z": "b056b4cf9a298e0d",
        "g": "407e3e089de46a03",
        "name": "link out 56",
        "mode": "link",
        "links": [],
        "x": 755,
        "y": 560,
        "wires": []
    },
    {
        "id": "97b7c34a01b8e8b1",
        "type": "link in",
        "z": "b056b4cf9a298e0d",
        "g": "4cd2d92b6f1e42de",
        "name": "link in 38",
        "links": [],
        "x": 1065,
        "y": 380,
        "wires": [
            [
                "c4abfd79327ad2ff"
            ]
        ]
    },
    {
        "id": "ccfe11fbbed43d4e",
        "type": "telegram command",
        "z": "b23dfd10f01a4521",
        "name": "",
        "command": "/tiempo",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "1f33bd2091f1c0f0",
        "strict": false,
        "hasresponse": false,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 1,
        "x": 130,
        "y": 980,
        "wires": [
            [
                "a674ddf7c07917a6"
            ]
        ]
    },
    {
        "id": "a674ddf7c07917a6",
        "type": "function",
        "z": "b23dfd10f01a4521",
        "name": "function 7",
        "func": "msg.user = msg.payload;\nvar hora_str = new Date();\nvar hora = Number(hora_str.getHours());\nif (hora < 6) {\n    var value = 3;\n}else if ( hora >= 6 && hora < 12){\n    var value = 4;\n}else if (hora >= 12 && hora < 18){\n    var value = 5;\n}else if (hora >= 18 && hora < 24){\n    var value = 6;\n}\nmsg.mensaje = value;\nmsg.limit = 1;\nmsg.sort = { \"date\": -1 };\nmsg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 980,
        "wires": [
            [
                "c2d2ecc035fb300b"
            ]
        ]
    },
    {
        "id": "276e58b1359e1c7c",
        "type": "function",
        "z": "b23dfd10f01a4521",
        "name": "function 8",
        "func": "var period = msg.mensaje;\nmsg.elaborado = msg.payload.root.elaborado[0]\nmsg.prob_precipitacion = msg.payload.root.prediccion[0].dia[0].prob_precipitacion[period]._;\nmsg.periodo = msg.payload.root.prediccion[0].dia[0].prob_precipitacion[period].$.periodo;\nmsg.estado_del_cielo = msg.payload.root.prediccion[0].dia[0].estado_cielo[period].$.descripcion;\nmsg.prob_precipitacion_manana = msg.payload.root.prediccion[0].dia[1].prob_precipitacion[0]._;\nmsg.estado_del_cielo_manana = msg.payload.root.prediccion[0].dia[1].estado_cielo[0].$.descripcion;\n\n\nmsg.payload = msg.user;\nmsg.payload.content = \"\";\nmsg.payload.content += \"\\nSegún la AEMET la predicción para las próximas horas (\"+ msg.periodo + \"h)\"\nmsg.payload.content += \" es de \" + msg.estado_del_cielo;\nmsg.payload.content += \" y probabilidad de lluvia de \" + msg.prob_precipitacion + \"%. \"\nmsg.payload.content += \"Mañana se espera \" + msg.estado_del_cielo_manana + \" y probabilidad de lluvia de \" + msg.prob_precipitacion_manana + \"%.\";\nmsg.payload.content += \"\\nPredicción elaborada: \" + msg.elaborado + \".\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "c2d2ecc035fb300b",
        "type": "http request",
        "z": "b23dfd10f01a4521",
        "name": "AEMET http request",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://www.aemet.es/xml/municipios/localidad_29901.xml",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 540,
        "y": 980,
        "wires": [
            [
                "f23289d067bd0fa3"
            ]
        ]
    },
    {
        "id": "f23289d067bd0fa3",
        "type": "xml",
        "z": "b23dfd10f01a4521",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 750,
        "y": 980,
        "wires": [
            [
                "276e58b1359e1c7c"
            ]
        ]
    },
    {
        "id": "44dfea54ec883d66",
        "type": "debug",
        "z": "b23dfd10f01a4521",
        "name": "debug 11",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1320,
        "y": 780,
        "wires": []
    },
    {
        "id": "12692250830d75c6",
        "type": "inject",
        "z": "b23dfd10f01a4521",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "II3/ESP004/cmd/cara004",
        "payload": "0",
        "payloadType": "num",
        "x": 230,
        "y": 620,
        "wires": [
            [
                "df9f920e3170ddf5"
            ]
        ]
    },
    {
        "id": "198f1fb018051790",
        "type": "mqtt out",
        "z": "b23dfd10f01a4521",
        "name": "",
        "topic": "II3/ESP004/cmd/cara004",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "2b251178.95ad2e",
        "x": 750,
        "y": 680,
        "wires": []
    },
    {
        "id": "895ad541ac1ed699",
        "type": "inject",
        "z": "b23dfd10f01a4521",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "II3/ESP004/cmd/cara004",
        "payload": "1",
        "payloadType": "num",
        "x": 230,
        "y": 680,
        "wires": [
            [
                "df9f920e3170ddf5"
            ]
        ]
    },
    {
        "id": "df9f920e3170ddf5",
        "type": "function",
        "z": "b23dfd10f01a4521",
        "name": "function 17",
        "func": "msg.payload = {\n    \"commands\": {\n        \"1\": { \"action\": \"activar_led\", \"value\": \"1\" },\n        \"2\": { \"action\": \"enable_game\", \"value\": \"1\" },\n        \"3\": { \"action\": \"get_sequence\", \"value\": \"010204\" }\n    }\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 640,
        "wires": [
            [
                "198f1fb018051790",
                "3fa040803ea0ef0b"
            ]
        ]
    },
    {
        "id": "3fa040803ea0ef0b",
        "type": "debug",
        "z": "b23dfd10f01a4521",
        "name": "debug 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 640.0833129882812,
        "y": 731.0833435058594,
        "wires": []
    },
    {
        "id": "1d03197f3c061eb1",
        "type": "telegram reply",
        "z": "b23dfd10f01a4521",
        "name": "",
        "bot": "d95354d46509e771",
        "x": 900,
        "y": 160,
        "wires": [
            [
                "22a1024f0a5078c2"
            ]
        ]
    },
    {
        "id": "45b13b8067bd0463",
        "type": "telegram event",
        "z": "b23dfd10f01a4521",
        "name": "",
        "bot": "d95354d46509e771",
        "event": "callback_query",
        "autoanswer": true,
        "x": 200,
        "y": 260,
        "wires": [
            [
                "de872b1f544a4849"
            ]
        ]
    },
    {
        "id": "d0400cc2d42c64a1",
        "type": "telegram control",
        "z": "b23dfd10f01a4521",
        "name": "",
        "bot": "d95354d46509e771",
        "outputs": 1,
        "checkconnection": false,
        "hostname": "",
        "interval": 10,
        "timeout": 1,
        "x": 220,
        "y": 80,
        "wires": [
            [
                "3d9b46ce2ae6df0f"
            ]
        ]
    },
    {
        "id": "3d9b46ce2ae6df0f",
        "type": "debug",
        "z": "b23dfd10f01a4521",
        "name": "debug 22",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 460,
        "y": 80,
        "wires": []
    },
    {
        "id": "410b2e29e96f730c",
        "type": "function",
        "z": "b23dfd10f01a4521",
        "name": "function 18",
        "func": "var texto = msg.payload;\nmsg.payload = global.get(\"user\");\nmsg.payload.content = \"te gusta el pan ?\";\nmsg.payload.type = \"message\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 470,
        "y": 160,
        "wires": [
            [
                "c22d0fc5e8d6920e"
            ]
        ]
    },
    {
        "id": "b7c420a071e870e1",
        "type": "change",
        "z": "b23dfd10f01a4521",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "user",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 160,
        "wires": [
            [
                "410b2e29e96f730c"
            ]
        ]
    },
    {
        "id": "c22d0fc5e8d6920e",
        "type": "telegram sender",
        "z": "b23dfd10f01a4521",
        "name": "",
        "bot": "d95354d46509e771",
        "haserroroutput": false,
        "outputs": 1,
        "x": 670,
        "y": 160,
        "wires": [
            [
                "1d03197f3c061eb1"
            ]
        ]
    },
    {
        "id": "22a1024f0a5078c2",
        "type": "debug",
        "z": "b23dfd10f01a4521",
        "name": "debug 23",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 160,
        "wires": []
    },
    {
        "id": "97f5e9edd2802103",
        "type": "state-machine",
        "z": "b23dfd10f01a4521",
        "name": "",
        "triggerProperty": "topic",
        "triggerPropertyType": "msg",
        "stateProperty": "topic",
        "statePropertyType": "msg",
        "outputStateChangeOnly": false,
        "throwException": false,
        "states": [
            "start",
            "game1",
            "game2"
        ],
        "transitions": [
            {
                "name": "game 1",
                "from": "start",
                "to": "start"
            }
        ],
        "x": 380,
        "y": 1120,
        "wires": [
            [
                "362a9acb79e1d7ca"
            ]
        ]
    },
    {
        "id": "79f25662b28050dd",
        "type": "inject",
        "z": "b23dfd10f01a4521",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 1120,
        "wires": [
            [
                "97f5e9edd2802103"
            ]
        ]
    },
    {
        "id": "362a9acb79e1d7ca",
        "type": "debug",
        "z": "b23dfd10f01a4521",
        "name": "debug 24",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 1120,
        "wires": []
    },
    {
        "id": "9bdde8bb42ac5b19",
        "type": "finite-state-machine",
        "z": "b23dfd10f01a4521",
        "name": "",
        "fsmDefinition": "{\"state\":{\"status\":\"IDLE\",\"data\":{\"x\":5}},\"transitions\":{\"IDLE\":{\"run\":\"RUNNING\"},\"RUNNING\":{\"stop\":\"IDLE\"}}}",
        "sendInitialState": true,
        "sendStateWithoutChange": true,
        "showTransitionErrors": true,
        "x": 390,
        "y": 1160,
        "wires": [
            [
                "86b04bf2bfeb5ee2"
            ]
        ]
    },
    {
        "id": "86b04bf2bfeb5ee2",
        "type": "debug",
        "z": "b23dfd10f01a4521",
        "name": "debug 25",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 620,
        "y": 1160,
        "wires": []
    },
    {
        "id": "8cc29a55472fde41",
        "type": "inject",
        "z": "b23dfd10f01a4521",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "run",
        "payload": "run",
        "payloadType": "str",
        "x": 170,
        "y": 1160,
        "wires": [
            [
                "9bdde8bb42ac5b19"
            ]
        ]
    },
    {
        "id": "de872b1f544a4849",
        "type": "function",
        "z": "b23dfd10f01a4521",
        "name": "function 19",
        "func": "var show_alert = false; // you can set this to true to open a dialog with the answer in the client.\n\n// msg.payload.content contains the callback data from the keyboard.\n// You may change this value here.\nmsg.payload.options = show_alert;\n\nreturn [msg];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 260,
        "wires": [
            [
                "14bc9dd2719eec8b"
            ]
        ]
    },
    {
        "id": "14bc9dd2719eec8b",
        "type": "telegram sender",
        "z": "b23dfd10f01a4521",
        "name": "",
        "bot": "d95354d46509e771",
        "haserroroutput": false,
        "outputs": 1,
        "x": 710,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "1a2629111d9359b7",
        "type": "function",
        "z": "b23dfd10f01a4521",
        "name": "function 20",
        "func": "var opts = {\n    reply_to_message_id: msg.payload.messageId,\n    reply_markup: JSON.stringify({\n        \"inline_keyboard\": [[\n            {\n                \"text\": \"Yes\",\n                \"callback_data\": \"FOO YES\"\n            },\n            {\n                \"text\": \"No\",\n                \"callback_data\": \"FOO NO\"\n            }]\n        ]\n    })\n};\n\nmsg.payload.content = 'Are you sure?';\nmsg.payload.options = opts;\n\nreturn [msg];",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 340,
        "wires": [
            [
                "d3033b7e02e5a0e4"
            ]
        ]
    },
    {
        "id": "d3033b7e02e5a0e4",
        "type": "telegram sender",
        "z": "b23dfd10f01a4521",
        "name": "",
        "bot": "d95354d46509e771",
        "haserroroutput": false,
        "outputs": 1,
        "x": 710,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "19423ee5387d4eca",
        "type": "telegram command",
        "z": "b23dfd10f01a4521",
        "name": "",
        "command": "/menu",
        "description": "",
        "registercommand": false,
        "language": "",
        "scope": "default",
        "bot": "d95354d46509e771",
        "strict": false,
        "hasresponse": false,
        "useregex": false,
        "removeregexcommand": false,
        "outputs": 1,
        "x": 170,
        "y": 340,
        "wires": [
            [
                "1a2629111d9359b7"
            ]
        ]
    },
    {
        "id": "f7d93e22ce1faa13",
        "type": "file in",
        "z": "b23dfd10f01a4521",
        "name": "",
        "filename": "/home/rhyloo/nol/pics/foo.jpeg",
        "filenameType": "str",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 430,
        "y": 800,
        "wires": [
            [
                "02b00a3680685ea1"
            ]
        ]
    },
    {
        "id": "02b00a3680685ea1",
        "type": "mongodb out",
        "z": "b23dfd10f01a4521",
        "mongodb": "6046a47177835823",
        "name": "",
        "collection": "test",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 730,
        "y": 800,
        "wires": []
    },
    {
        "id": "9ed1dc9910ace64f",
        "type": "inject",
        "z": "b23dfd10f01a4521",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 800,
        "wires": [
            [
                "f7d93e22ce1faa13"
            ]
        ]
    },
    {
        "id": "2bb6decf9cc889b5",
        "type": "function",
        "z": "b23dfd10f01a4521",
        "name": "Recupera un acertijo aleatorio de la base de datos",
        "func": "msg.payload = {\"filename\":\"/home/rhyloo/nol/pics/foo.jpeg\"};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 860,
        "wires": [
            [
                "8fd0cf9f2119d17a"
            ]
        ]
    },
    {
        "id": "8fd0cf9f2119d17a",
        "type": "mongodb in",
        "z": "b23dfd10f01a4521",
        "mongodb": "6046a47177835823",
        "name": "",
        "collection": "test",
        "operation": "find",
        "x": 830,
        "y": 860,
        "wires": [
            [
                "9a3a99cb954ede25"
            ]
        ]
    },
    {
        "id": "c18f8a03da6877a1",
        "type": "inject",
        "z": "b23dfd10f01a4521",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 860,
        "wires": [
            [
                "2bb6decf9cc889b5"
            ]
        ]
    },
    {
        "id": "3528be3381a42afd",
        "type": "function",
        "z": "b23dfd10f01a4521",
        "name": "function 22",
        "func": "flow.set(\"photo\", msg.payload[0].payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 860,
        "wires": [
            [
                "44dfea54ec883d66"
            ]
        ]
    },
    {
        "id": "9f8e3c4efe2ab1ec",
        "type": "buffer-maker",
        "z": "b23dfd10f01a4521",
        "name": "",
        "specification": "",
        "specificationType": "ui",
        "items": [
            {
                "name": "item1",
                "type": "int16be",
                "data": "payload",
                "dataType": "msg"
            }
        ],
        "swap1": "",
        "swap2": "",
        "swap3": "",
        "swap1Type": "swap",
        "swap2Type": "swap",
        "swap3Type": "swap",
        "msgProperty": "payload",
        "msgPropertyType": "str",
        "x": 890,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "9a3a99cb954ede25",
        "type": "buffer-parser",
        "z": "b23dfd10f01a4521",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "specification": "spec",
        "specificationType": "ui",
        "items": [
            {
                "type": "buffer",
                "name": "item1",
                "offset": 0,
                "length": 1,
                "offsetbit": 0,
                "scale": "1",
                "mask": ""
            }
        ],
        "swap1": "",
        "swap2": "",
        "swap3": "",
        "swap1Type": "swap",
        "swap2Type": "swap",
        "swap3Type": "swap",
        "msgProperty": "payload",
        "msgPropertyType": "str",
        "resultType": "object",
        "resultTypeType": "return",
        "multipleResult": true,
        "fanOutMultipleResult": false,
        "setTopic": true,
        "outputs": 1,
        "x": 1030,
        "y": 860,
        "wires": [
            [
                "3528be3381a42afd",
                "44dfea54ec883d66"
            ]
        ]
    },
    {
        "id": "051b9e4cb82ebccd",
        "type": "mongodb in",
        "z": "b23dfd10f01a4521",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "recursos_de_las_pruebas",
        "operation": "find",
        "x": 590,
        "y": 1280,
        "wires": [
            [
                "fe0f41ded1231895"
            ]
        ]
    },
    {
        "id": "8dac6d5fc35eabe9",
        "type": "mongodb out",
        "z": "b23dfd10f01a4521",
        "mongodb": "96e271eba0b52a94",
        "name": "",
        "collection": "recursos_de_las_pruebas",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 610,
        "y": 1360,
        "wires": []
    },
    {
        "id": "e4c1b5a1df6803f9",
        "type": "inject",
        "z": "b23dfd10f01a4521",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 300,
        "y": 1280,
        "wires": [
            [
                "051b9e4cb82ebccd"
            ]
        ]
    },
    {
        "id": "fe0f41ded1231895",
        "type": "debug",
        "z": "b23dfd10f01a4521",
        "name": "debug 30",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 980,
        "y": 1280,
        "wires": []
    },
    {
        "id": "f9c43e7b.e1716",
        "type": "file in",
        "z": "d13323c9cef06b5d",
        "name": "Read audio file",
        "filename": "filename",
        "filenameType": "msg",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "x": 600,
        "y": 140,
        "wires": [
            [
                "36e6c708.f3d3a"
            ]
        ]
    },
    {
        "id": "36e6c708.f3d3a",
        "type": "mongodb out",
        "z": "d13323c9cef06b5d",
        "mongodb": "96e271eba0b52a94",
        "name": "Save audio file to MongoDB",
        "collection": "audio_test",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 860,
        "y": 140,
        "wires": []
    },
    {
        "id": "22c58b82.6dcd64",
        "type": "mongodb in",
        "z": "d13323c9cef06b5d",
        "mongodb": "96e271eba0b52a94",
        "name": "Retrieve audio file from MongoDB",
        "collection": "audio_test",
        "operation": "find",
        "x": 600,
        "y": 340,
        "wires": [
            [
                "983b1f9fd1205006",
                "242723e243bb1259",
                "f46ba2e19f335c54"
            ]
        ]
    },
    {
        "id": "4304a9d7a43c2519",
        "type": "inject",
        "z": "d13323c9cef06b5d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "filename",
                "v": "/home/rhyloo/nol/pics/mensaje1.wav",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 320,
        "y": 140,
        "wires": [
            [
                "f9c43e7b.e1716"
            ]
        ]
    },
    {
        "id": "cddeeafbc72621f1",
        "type": "inject",
        "z": "d13323c9cef06b5d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "()",
        "payloadType": "str",
        "x": 290,
        "y": 340,
        "wires": [
            [
                "22c58b82.6dcd64"
            ]
        ]
    },
    {
        "id": "8b076147b61f80f3",
        "type": "function",
        "z": "d13323c9cef06b5d",
        "name": "voide - msg 1",
        "func": "var audio = msg.payload[0];\nmsg.payload = global.get(\"user\");\nmsg.payload.content = audio;\nmsg.payload.type = 'voice';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 340,
        "wires": [
            [
                "620dbc930d372bc6"
            ]
        ]
    },
    {
        "id": "620dbc930d372bc6",
        "type": "telegram sender",
        "z": "d13323c9cef06b5d",
        "name": "",
        "bot": "d95354d46509e771",
        "haserroroutput": false,
        "outputs": 1,
        "x": 1390,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "983b1f9fd1205006",
        "type": "debug",
        "z": "d13323c9cef06b5d",
        "name": "debug 44",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 440,
        "wires": []
    },
    {
        "id": "242723e243bb1259",
        "type": "function",
        "z": "d13323c9cef06b5d",
        "name": "function 25",
        "func": "msg.payload = Buffer.from(msg.payload); \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 340,
        "wires": [
            [
                "8b076147b61f80f3",
                "9ce7382270600c46"
            ]
        ]
    },
    {
        "id": "9ce7382270600c46",
        "type": "debug",
        "z": "d13323c9cef06b5d",
        "name": "debug 47",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1140,
        "y": 420,
        "wires": []
    },
    {
        "id": "f46ba2e19f335c54",
        "type": "file",
        "z": "d13323c9cef06b5d",
        "name": "",
        "filename": "~/nol/pics/test.wav",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "setbymsg",
        "x": 970,
        "y": 240,
        "wires": [
            []
        ]
    }
]